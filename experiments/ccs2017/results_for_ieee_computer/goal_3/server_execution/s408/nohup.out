changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s408.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's408',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 41 49 42 41 41 4b 43 41 51 45 41 36 34 ... > }
Handler: listening on port 22100
s408:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200058
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33794
received auth hello!
{ authId: 402, nonce: <Buffer 1a 65 1d 76 74 80 a2 86> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 65 b3 96 3b 32 ae 49 5a>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 7a 5d d8 87 d1 58 1c 45 35 ca 38 81 3a 51 3a 5b>,
  macKeyVal: <Buffer f4 d0 34 a9 ab 37 21 82 06 b1 ee 99 04 e5 61 e6 b1 f7 3a e8 9d 97 75 40 47 fc a7 23 0b 95 0a 03>,
  absValidity: 2018-08-27T08:35:27.741Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 07 09 48 6a d6 10 b9 cb>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 07 09 48 6a d6 10 b9 cb> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.52:50930',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200060
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33806
received auth hello!
{ authId: 402, nonce: <Buffer bc f0 ac b9 76 76 bd e6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a9 04 fd cf d5 a9 93 73>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 3c 0b 43 bf c5 bb dd ec>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 3c 0b 43 bf c5 bb dd ec> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.54:55762',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200065
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33962
received auth hello!
{ authId: 402, nonce: <Buffer 2f 9e 1e ff 68 3e 1e 7a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 87 4d fe 6c 21 4e 8b 13>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 1c ee 98 04 a0 aa bb eb>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 1c ee 98 04 a0 aa bb eb> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.52:51098',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200067
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33986
received auth hello!
{ authId: 402, nonce: <Buffer 39 df 11 8f 26 da 81 b9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 5b e6 a8 a8 0e 40 2f a8>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer b6 0b 36 94 e0 dc e6 ab>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer b6 0b 36 94 e0 dc e6 ab> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.54:55942',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200072
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34234
received auth hello!
{ authId: 402, nonce: <Buffer 2d ca 60 a3 05 a5 85 7f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 96 c4 3b 32 7c 6e 6f 45>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 0e 46 16 11 5b 25 7c 0a>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 0e 46 16 11 5b 25 7c 0a> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.52:51370',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200074
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34258
received auth hello!
{ authId: 402, nonce: <Buffer 95 fd d4 3c 2e 9c 02 a3> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 31 d6 87 3d 8b 5e 16 82>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 8d 9f 86 c6 41 3a ab 60>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 8d 9f 86 c6 41 3a ab 60> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.54:56214',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200079
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34504
received auth hello!
{ authId: 402, nonce: <Buffer cc ec eb 07 5e 05 b4 eb> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c8 5d 48 9e ee 04 e8 71>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer a9 8a eb a9 bd 9a 56 e9>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer a9 8a eb a9 bd 9a 56 e9> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.52:51640',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200081
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34528
received auth hello!
{ authId: 402, nonce: <Buffer bc 8a f1 0f a0 3a 12 91> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer d4 b3 69 ad 2d b5 e2 f2>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d7 15 62 19 06 f4 d4 d2>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d7 15 62 19 06 f4 d4 d2> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.54:56484',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200086
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34774
received auth hello!
{ authId: 402, nonce: <Buffer 02 3a 9d 94 2f f0 b3 f9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 6c c7 49 58 0d 4f e1 f9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 16 4f 46 3b 16 9e 85 e7>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 16 4f 46 3b 16 9e 85 e7> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.52:51910',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200088
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34798
received auth hello!
{ authId: 402, nonce: <Buffer 83 3b 08 ea ae 13 38 f4> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 2d ac f3 a9 0c a5 c4 73>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer a0 87 47 5a eb b6 4c 99>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer a0 87 47 5a eb b6 4c 99> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.54:56754',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200093
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 35044
received auth hello!
{ authId: 402, nonce: <Buffer 5a 2f c3 3a 72 6c 00 d5> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer eb b0 1b 48 3d ff 8e 14>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 92 db e8 26 0d c4 d4 d9>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 92 db e8 26 0d c4 d4 d9> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 10,
  remoteAddress: '::ffff:10.0.1.52:52180',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 10 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 10 }
specified socketID: 10
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200095
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 35068
received auth hello!
{ authId: 402, nonce: <Buffer c7 41 f3 80 91 4c f9 1d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 75 f2 54 45 c4 3b 08 04>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer aa 32 19 04 70 13 04 d1>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer aa 32 19 04 70 13 04 d1> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 11,
  remoteAddress: '::ffff:10.0.1.54:57024',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 11 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 11 }
specified socketID: 11
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #10 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200100
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 35314
received auth hello!
{ authId: 402, nonce: <Buffer c6 a9 d6 ea 59 19 a7 88> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ec cf d1 d5 77 9d fc 2f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 67 a5 89 8a c2 0b ed 52>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 67 a5 89 8a c2 0b ed 52> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 12,
  remoteAddress: '::ffff:10.0.1.52:52450',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 12 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 12 }
specified socketID: 12
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #11 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200102
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 35338
received auth hello!
{ authId: 402, nonce: <Buffer 73 24 ae 3a 78 e1 cf fb> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 85 85 24 47 5d 83 8d 0a>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 30 25 33 38 a8 c4 f7 11>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 30 25 33 38 a8 c4 f7 11> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 13,
  remoteAddress: '::ffff:10.0.1.54:57294',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 13 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 13 }
specified socketID: 13
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #12 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200107
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 35580
received auth hello!
{ authId: 402, nonce: <Buffer 70 59 0f 39 fd 89 71 2c> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 0f 1a f7 ea 34 70 c1 3b>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 37 c9 6a 72 62 bf e2 9a>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 37 c9 6a 72 62 bf e2 9a> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 14,
  remoteAddress: '::ffff:10.0.1.52:52716',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 14 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 14 }
specified socketID: 14
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #13 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200109
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 35604
received auth hello!
{ authId: 402, nonce: <Buffer f6 6e fc d4 f7 ea 7a 69> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 54 7d 3d a1 ba 61 ce d4>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 0c 94 9d 62 41 54 d0 08>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 0c 94 9d 62 41 54 d0 08> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 15,
  remoteAddress: '::ffff:10.0.1.54:57560',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 15 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 15 }
specified socketID: 15
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #14 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300282
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 1
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #15 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300284
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 48224
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300292
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 48484
received auth hello!
{ authId: 401, nonce: <Buffer ff 2b 0b 69 7c b1 4e 5f> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '01657A4D9154',
  notBefore: 2018-08-27T07:32:08.000Z,
  notAfter: 2018-08-28T07:33:48.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'CA:6B:22:A0:05:A2:AF:DA:B3:ED:6D:7F:FB:4D:AE:45:88:56:EC:B5',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B753F8DF66531E6B76B1B8E873D2DA288EB78159E298417174AC01A32AC468D74E78E95F28194CDEC365D3FFA303A8ABCF7197845F3E120325FE967FC1298964B04C7D376BA89BACCB87C09546635F81BF2CEBB0AC49B40D52A76C0AA4BC92CE1B5083B92063604A8B545148D45138903005D363D8199BB2A95F99A70B1E803360796379064CD7B4E7B5E36CE8D86B2F1F7C2520198C9B2BCA7341D15014B7D10C94957870B049D6734F36E7C1FFA26E3578C8C51A7CCC18CC755053A03DFB7D50921C4F022AE6279CD0B29EFE680423C55E12B4B7B4241490D4EB039150F7718061F2AE9FB703E4A22D62B85F0B106FC0FA97943A57DE4A4B2750E77C9AD345',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWV6TZFUMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDgy\nNzA3MzIwOFoXDTE4MDgyODA3MzM0OFowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC3U/jfZlMea3axuOhz0toojreBWeKYQXF0rAGjKsRo10546V8o\nGUzew2XT/6MDqKvPcZeEXz4SAyX+ln/BKYlksEx9N2uom6zLh8CVRmNfgb8s67Cs\nSbQNUqdsCqS8ks4bUIO5IGNgSotUUUjUUTiQMAXTY9gZm7KpX5mnCx6AM2B5Y3kG\nTNe057XjbOjYay8ffCUgGYybK8pzQdFQFLfRDJSVeHCwSdZzTzbnwf+ibjV4yMUa\nfMwYzHVQU6A9+31QkhxPAirmJ5zQsp7+aAQjxV4StLe0JBSQ1OsDkVD3cYBh8q6f\ntwPkoi1iuF8LEG/A+peUOlfeSksnUOd8mtNFAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAAZ7pdllYGzBfg1MvvYZnUbEJGR8IkIP\nEJXfr1HhRM5QL7KeAvPOW6eRlqoz7YHez136jHXQ3pho83qraHguyDr31sgCjNAA\nbXqHXdNAyvFBuJJM9du9YrnmSSEzdWyrWPdVaU3/bH4QFJEeK91jfKddRYJrjBu7\n71LfXPAV48u+OAfCDOf4hgPiwyQ5A83njfIULefPgOrlDCJrXqq+BoKKeyVUIj5U\nzaztudduAVmcPiQlxPQP4qA9njQvZF7YDQmC0e7Z1vPNfQQQZsiBLnqz/S7Z7C9k\nVJL9svdfGXMxLFa1gUNi2PY3xTA3L1Q3t+AkAYC9pAHnsSyx7gDSOUU=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 0
to: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300294
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48502
received auth hello!
{ authId: 401, nonce: <Buffer bd 44 41 5e 2d ed 19 1f> }
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
