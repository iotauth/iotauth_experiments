changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c410.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c410',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 41 49 42 41 41 4b 43 41 51 45 41 7a 70 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1535344148539
connected to auth! from local port 53270
received auth hello!
{ authId: 402, nonce: <Buffer d5 57 23 d1 69 dc 1d 61> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 48 65 23 63 c2 9d e3 84>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 53 ed a6 6b 1d 48 57 ae 04 8a 98 b8 f7 03 57 95>,
  macKeyVal: <Buffer 97 8f fc d0 4d dc 78 00 50 4a ee f4 54 08 4a d6 29 29 2d a2 2a c0 04 97 ae 9b 8b 42 10 ff 54 8b>,
  absValidity: 2018-08-27T05:29:08.712Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200058,
  cipherKeyVal: <Buffer be 47 87 77 db 47 eb f1 03 9e 38 dc bb b4 be 0c>,
  macKeyVal: <Buffer 2c 39 68 28 d8 28 1f 67 58 18 84 a9 0f ee 86 ff 84 04 22 ec 30 df b2 d7 10 76 6f 5d b2 d8 cf 7f>,
  absValidity: 2018-08-28T04:29:08.712Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200058,
     cipherKeyVal: <Buffer be 47 87 77 db 47 eb f1 03 9e 38 dc bb b4 be 0c>,
     macKeyVal: <Buffer 2c 39 68 28 d8 28 1f 67 58 18 84 a9 0f ee 86 ff 84 04 22 ec 30 df b2 d7 10 76 6f 5d b2 d8 cf 7f>,
     absValidity: 2018-08-28T04:29:08.712Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 0a e9 ea c0 33 8c df 29>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:29:09 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1535344150235
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1535344208571
connected to auth! from local port 53438
received auth hello!
{ authId: 402, nonce: <Buffer 07 ec f9 3b fe a3 9d 89> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a8 4a 90 18 b8 6c 67 3f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200065,
  cipherKeyVal: <Buffer 04 c4 cb fa b8 a5 fb 89 d0 cc b2 a4 6a 03 a6 3d>,
  macKeyVal: <Buffer 16 c3 f2 db 25 64 ea 29 13 ea 8d b9 34 9c e6 97 30 8d 15 6b b9 cd 52 ba 6b 31 f9 69 8a e0 06 a7>,
  absValidity: 2018-08-28T04:30:08.826Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200065,
     cipherKeyVal: <Buffer 04 c4 cb fa b8 a5 fb 89 d0 cc b2 a4 6a 03 a6 3d>,
     macKeyVal: <Buffer 16 c3 f2 db 25 64 ea 29 13 ea 8d b9 34 9c e6 97 30 8d 15 6b b9 cd 52 ba 6b 31 f9 69 8a e0 06 a7>,
     absValidity: 2018-08-28T04:30:08.826Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 70 62 e5 60 52 8f 03 19>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:30:09 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1535344210201
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1535344268590
connected to auth! from local port 53708
received auth hello!
{ authId: 402, nonce: <Buffer 54 f0 0f cb 54 d8 11 e9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 8a 26 82 f6 ba bd e4 a9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200072,
  cipherKeyVal: <Buffer 56 cd 03 6b 10 e1 1c 20 1c 40 fe 0f 29 d1 56 d4>,
  macKeyVal: <Buffer de a4 9b a8 1d 04 71 47 b7 74 a1 24 2a c1 ca c3 1e 89 2d ca 9e 98 57 a6 91 3e f1 c9 f1 63 89 10>,
  absValidity: 2018-08-28T04:31:08.817Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200072,
     cipherKeyVal: <Buffer 56 cd 03 6b 10 e1 1c 20 1c 40 fe 0f 29 d1 56 d4>,
     macKeyVal: <Buffer de a4 9b a8 1d 04 71 47 b7 74 a1 24 2a c1 ca c3 1e 89 2d ca 9e 98 57 a6 91 3e f1 c9 f1 63 89 10>,
     absValidity: 2018-08-28T04:31:08.817Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 19 c5 90 8a e2 85 5c 4c>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:31:10 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1535344270584
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1535344328648
connected to auth! from local port 53978
received auth hello!
{ authId: 402, nonce: <Buffer 09 5e 7d 81 9a 6f 04 72> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 01 9c 03 9b 66 ab 11 32>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200079,
  cipherKeyVal: <Buffer a4 1d dd ff ca a3 e3 b1 85 8e 4a bb ae be c4 f5>,
  macKeyVal: <Buffer 77 ed c2 cd d4 c8 d1 fd f4 18 a1 c0 6b 46 bd 5b e4 13 3d 5f bc 02 13 63 0a 8b 67 cd e6 f7 0c f9>,
  absValidity: 2018-08-28T04:32:08.864Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200079,
     cipherKeyVal: <Buffer a4 1d dd ff ca a3 e3 b1 85 8e 4a bb ae be c4 f5>,
     macKeyVal: <Buffer 77 ed c2 cd d4 c8 d1 fd f4 18 a1 c0 6b 46 bd 5b e4 13 3d 5f bc 02 13 63 0a 8b 67 cd e6 f7 0c f9>,
     absValidity: 2018-08-28T04:32:08.864Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer a4 2b 34 6d c0 db 5c b7>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:32:10 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1535344330584
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1535344388673
connected to auth! from local port 54248
received auth hello!
{ authId: 402, nonce: <Buffer cb b5 cd c8 5c ab 09 04> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 57 a9 38 6d a9 8b d6 d9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200086,
  cipherKeyVal: <Buffer 72 26 86 1e e9 2e 17 e7 99 8b 3d d6 d7 93 b5 3e>,
  macKeyVal: <Buffer 1d dd 7d b7 63 01 a7 68 48 cf 5c 3f 94 42 30 00 5e 12 52 f1 0b c9 7b fc d0 26 1d 65 e3 64 05 98>,
  absValidity: 2018-08-28T04:33:08.954Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200086,
     cipherKeyVal: <Buffer 72 26 86 1e e9 2e 17 e7 99 8b 3d d6 d7 93 b5 3e>,
     macKeyVal: <Buffer 1d dd 7d b7 63 01 a7 68 48 cf 5c 3f 94 42 30 00 5e 12 52 f1 0b c9 7b fc d0 26 1d 65 e3 64 05 98>,
     absValidity: 2018-08-28T04:33:08.954Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 10 ea 19 92 da 0f f5 35>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:33:10 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1535344390768
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1535344448682
connected to auth! from local port 54518
received auth hello!
{ authId: 402, nonce: <Buffer 9b 96 a8 d3 10 ca e4 4d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 02 8d ef 00 65 c9 c9 d0>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200093,
  cipherKeyVal: <Buffer a2 64 de 1b bc 07 99 b2 37 eb 2b f3 10 2b 44 6d>,
  macKeyVal: <Buffer 36 9f 6d f0 e5 81 8f 2b 5d 29 3c fc 44 81 34 98 43 bb 6a c9 b6 c4 da c7 12 6a be 82 b9 f2 8e 32>,
  absValidity: 2018-08-28T04:34:08.898Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200093,
     cipherKeyVal: <Buffer a2 64 de 1b bc 07 99 b2 37 eb 2b f3 10 2b 44 6d>,
     macKeyVal: <Buffer 36 9f 6d f0 e5 81 8f 2b 5d 29 3c fc 44 81 34 98 43 bb 6a c9 b6 c4 da c7 12 6a be 82 b9 f2 8e 32>,
     absValidity: 2018-08-28T04:34:08.898Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 1f 56 41 a0 4c 42 40 e1>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:34:10 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1535344450654
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1535344508708
connected to auth! from local port 54788
received auth hello!
{ authId: 402, nonce: <Buffer 78 f8 8f db 98 22 31 6d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 1a c0 22 b3 5f e7 62 fd>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200100,
  cipherKeyVal: <Buffer e2 e8 7c 71 91 bd da c8 88 df 04 80 f6 67 59 7d>,
  macKeyVal: <Buffer 3c c3 19 8d fa 0f fc e2 ce 29 e7 e5 62 1b 5f b1 08 46 2c 47 4d 07 e5 03 53 74 86 8f 4a b0 a7 62>,
  absValidity: 2018-08-28T04:35:09.007Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200100,
     cipherKeyVal: <Buffer e2 e8 7c 71 91 bd da c8 88 df 04 80 f6 67 59 7d>,
     macKeyVal: <Buffer 3c c3 19 8d fa 0f fc e2 ce 29 e7 e5 62 1b 5f b1 08 46 2c 47 4d 07 e5 03 53 74 86 8f 4a b0 a7 62>,
     absValidity: 2018-08-28T04:35:09.007Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 17 38 d8 47 e1 48 31 5d>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:35:10 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1535344510713
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1535344568766
connected to auth! from local port 55054
received auth hello!
{ authId: 402, nonce: <Buffer c7 e7 86 1b 4d f2 8d 57> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a5 fc 0f 41 ad 49 de 07>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200107,
  cipherKeyVal: <Buffer 00 3d 26 f4 3d 13 55 cc 2d f1 2a 76 5a 91 58 07>,
  macKeyVal: <Buffer fa 5f f6 7a 6a ca de f0 bb 4a 5c 25 6e 9b af 14 47 73 7f c2 51 f6 33 59 42 ff 88 f5 3c 92 a8 59>,
  absValidity: 2018-08-28T04:36:09.028Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200107,
     cipherKeyVal: <Buffer 00 3d 26 f4 3d 13 55 cc 2d f1 2a 76 5a 91 58 07>,
     macKeyVal: <Buffer fa 5f f6 7a 6a ca de f0 bb 4a 5c 25 6e 9b af 14 47 73 7f c2 51 f6 33 59 42 ff 88 f5 3c 92 a8 59>,
     absValidity: 2018-08-28T04:36:09.028Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer fb 4e 8c 3e 88 a8 0c e4>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:36:10 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1535344570524
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1535344628784
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1535344688794
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 34994
received auth hello!
{ authId: 502, nonce: <Buffer 10 b6 1b 4e bf b4 60 26> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1535344748800
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 35226
received auth hello!
{ authId: 502, nonce: <Buffer 9e 5f 02 50 4f db 0c e4> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1535344808810
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.4:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 13 0.6153846153846154 1535344868817
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 51822
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 14 0.5714285714285714 1535344928824
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 52080
received auth hello!
{ authId: 401, nonce: <Buffer 5e dd 71 79 f2 3b e7 07> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '016579A30508',
  notBefore: 2018-08-27T04:25:51.000Z,
  notAfter: 2018-08-28T04:27:31.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '79:D7:F0:36:F5:63:C9:5F:2F:6C:10:F7:B5:4C:7F:0A:36:A9:97:CE',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'AF23BC17C526A7AFDABD10E11B69948936F06BDEC216730D0926F4729C3F53806C2812687248D00BE365D1DB11907B8C3441F9A9A7F0B913065F79BBEFB9605DD128C9B144B177076B7E46B92A3FA31511995B3D57F9BFA275EBEDA464AF403971A8925028BF43CC548AC9052D7E35AD851586AC0C4EA1FC7C755E22CB819A087D35C0E9C0DF733E9757F060E6AF797111A2B852A6191E6341A7CF678D8604077227A06289ADD8492928D5EECC3787C220575D0F755645359EFE007ECCC7BBCE9132761D1346C2B4F372E3F9A44DF760E0EDCCAC935454D03E6F2A22C1BFC15A4ABCAA38B7AB27FC12DF6127B9A5258B4BD00B1E6D28F03EEDEDAE39ABC5924F',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWV5owUIMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDgy\nNzA0MjU1MVoXDTE4MDgyODA0MjczMVowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCvI7wXxSanr9q9EOEbaZSJNvBr3sIWcw0JJvRynD9TgGwoEmhy\nSNAL42XR2xGQe4w0Qfmpp/C5EwZfebvvuWBd0SjJsUSxdwdrfka5Kj+jFRGZWz1X\n+b+idevtpGSvQDlxqJJQKL9DzFSKyQUtfjWthRWGrAxOofx8dV4iy4GaCH01wOnA\n33M+l1fwYOaveXERorhSphkeY0Gnz2eNhgQHciegYomt2EkpKNXuzDeHwiBXXQ91\nVkU1nv4AfszHu86RMnYdE0bCtPNy4/mkTfdg4O3MrJNUVNA+byoiwb/BWkq8qji3\nqyf8Et9hJ7mlJYtL0AsebSjwPu3trjmrxZJPAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAD1utwYa5+xnllujS5dNOdoosfgaJAEl\nlQNGOFbYHbYFwyjppfapHpodKI5w+ThXBhVDDp9ZfzMzSptRpO7i+b7t1fmocUdT\nTbBXZ+QdPnEFUVnDK3Nqko/Bitsroyfrh83XfNGni4hsWihfR1LTbasb6Z+oEpKT\n+SVOCbrulTjuzGTWwLh6gcomgh9RYgy3/6qh3sRadHEn9nhWqgBo+i64otcKtozN\nzFswSGMIe2L76I+gi2JSLAR5DQ1sIGTsh46EnbiViYCjcWCpNc2vpyC1uHBgwIBF\ns+8FN/dpf9fOzPqIS1BXjV2w/BSYhWnMpKEIjglpASpBjWVarQoxIes=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 2
to: 3
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 15 0.5333333333333333 1535344988834
connected to auth! from local port 52324
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 16 0.5 1535345048840
connected to auth! from local port 52582
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 17 0.47058823529411764 1535345108850
connected to auth! from local port 52852
Handler: Error in secure comm - details: Auth hello timedout ...
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
