changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s408.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's408',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 41 49 42 41 41 4b 43 41 51 45 41 36 34 ... > }
Handler: listening on port 22100
s408:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200003
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55276
received auth hello!
{ authId: 402, nonce: <Buffer f8 4b f5 6d 40 2b ac 1d> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 4f 25 da 3c b8 f3 b8 d6>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 5e bf 32 6b 22 df e4 e6 cf 40 2d 08 ee 57 10 48>,
  macKeyVal: <Buffer 96 8b 04 4f 90 9a 68 f0 c0 68 3d da b8 b8 90 8d b4 e4 11 e3 b0 0a 2a 15 e8 55 54 7c d2 7e 3d 60>,
  absValidity: 2018-08-27T07:49:16.177Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 6d ed 24 3d b6 1a a4 e8>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 6d ed 24 3d b6 1a a4 e8> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.52:44180',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200005
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55288
received auth hello!
{ authId: 402, nonce: <Buffer 42 1a d7 5c d4 f2 39 3f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 83 76 56 81 18 66 df c1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer cc 33 e0 1a 17 af 24 1f>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer cc 33 e0 1a 17 af 24 1f> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.54:49012',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200010
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55444
received auth hello!
{ authId: 402, nonce: <Buffer 4f 10 ad b3 44 e9 de ce> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer fe 6d 33 4d 00 a5 e1 ce>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 63 f0 59 5b c4 dd 06 0f>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 63 f0 59 5b c4 dd 06 0f> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.52:44348',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200012
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55468
received auth hello!
{ authId: 402, nonce: <Buffer bd f4 86 b5 a3 d9 90 fa> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 40 5a 05 01 b4 37 21 61>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 74 12 e2 85 8c 88 08 98>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 74 12 e2 85 8c 88 08 98> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.54:49192',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200017
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55716
received auth hello!
{ authId: 402, nonce: <Buffer ff 57 11 21 00 35 ae 9c> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 61 e8 88 d9 8f 3a 85 a2>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer bb 11 79 63 a0 4c 1b 55>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer bb 11 79 63 a0 4c 1b 55> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.52:44620',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200019
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55740
received auth hello!
{ authId: 402, nonce: <Buffer 6b 6e d5 ac 11 61 05 16> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a4 2d e3 11 6c 23 f6 ac>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 91 34 e7 5c 5d 5c 13 12>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 91 34 e7 5c 5d 5c 13 12> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.54:49464',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200024
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 55986
received auth hello!
{ authId: 402, nonce: <Buffer 6f 8a 36 e7 95 92 90 09> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 72 e0 63 7b 19 66 9e 3e>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 70 8f dc be 84 9d ee 9d>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 70 8f dc be 84 9d ee 9d> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.52:44890',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200026
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56010
received auth hello!
{ authId: 402, nonce: <Buffer 9e 8b e5 38 09 f2 54 7c> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer f4 9b b9 22 0e d1 d8 99>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 72 b0 c1 6c 4c f1 67 67>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 72 b0 c1 6c 4c f1 67 67> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.54:49734',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200031
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56256
received auth hello!
{ authId: 402, nonce: <Buffer 98 3a 93 1e fa cd 3d 5d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer eb 22 58 d5 e2 07 57 43>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer dd 0e 18 35 a1 75 a7 af>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer dd 0e 18 35 a1 75 a7 af> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.52:45160',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200033
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56280
received auth hello!
{ authId: 402, nonce: <Buffer 9f be e0 5a b3 78 43 c1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ca 99 5f a3 d9 b8 2a 44>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 10 4c 1a 81 b0 12 4c 0d>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 10 4c 1a 81 b0 12 4c 0d> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.54:50004',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200038
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56526
received auth hello!
{ authId: 402, nonce: <Buffer 51 cd ac 0b 99 e4 8f c3> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 31 49 aa 18 d0 1b 66 38>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 1c a0 70 c6 61 52 4b d5>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 1c a0 70 c6 61 52 4b d5> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 10,
  remoteAddress: '::ffff:10.0.1.52:45430',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 10 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 10 }
specified socketID: 10
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200040
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56550
received auth hello!
{ authId: 402, nonce: <Buffer 86 9e b4 d4 c8 99 7b bd> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 34 a2 20 c6 67 84 3a 0b>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 66 dc fb b4 de a6 e5 67>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 66 dc fb b4 de a6 e5 67> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 11,
  remoteAddress: '::ffff:10.0.1.54:50274',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 11 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 11 }
specified socketID: 11
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #10 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200045
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56796
received auth hello!
{ authId: 402, nonce: <Buffer 31 52 f1 04 10 f9 4a b1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer d8 f0 c5 e1 44 66 4a b4>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 0d 12 69 a0 7a 84 f0 43>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 0d 12 69 a0 7a 84 f0 43> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 12,
  remoteAddress: '::ffff:10.0.1.52:45700',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 12 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 12 }
specified socketID: 12
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #11 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200047
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56820
received auth hello!
{ authId: 402, nonce: <Buffer e7 51 57 11 82 a6 45 c7> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 7e df bf de 12 b3 8c 62>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 7d d0 b6 b6 89 48 8a 77>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 7d d0 b6 b6 89 48 8a 77> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 13,
  remoteAddress: '::ffff:10.0.1.54:50544',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 13 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 13 }
specified socketID: 13
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #12 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200052
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57062
received auth hello!
{ authId: 402, nonce: <Buffer f2 84 db 5b 11 42 3f e9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e3 d9 2c c0 99 8c 28 29>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer c2 5a df 80 9a 1a 09 94>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer c2 5a df 80 9a 1a 09 94> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 14,
  remoteAddress: '::ffff:10.0.1.52:45966',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 14 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 14 }
specified socketID: 14
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #13 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200054
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57086
Handler: Error in server - details: Disconnected from auth before getting session key response
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #14 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300047
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 1
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300049
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 41404
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300057
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 41624
received auth hello!
{ authId: 401, nonce: <Buffer 43 54 2d 41 85 69 cf 29> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '01657A234642',
  notBefore: 2018-08-27T06:45:56.000Z,
  notAfter: 2018-08-28T06:47:36.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'B5:A1:1F:1F:F1:A3:99:32:7F:D0:0D:A5:90:DA:63:03:5E:55:C2:35',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B753F8DF66531E6B76B1B8E873D2DA288EB78159E298417174AC01A32AC468D74E78E95F28194CDEC365D3FFA303A8ABCF7197845F3E120325FE967FC1298964B04C7D376BA89BACCB87C09546635F81BF2CEBB0AC49B40D52A76C0AA4BC92CE1B5083B92063604A8B545148D45138903005D363D8199BB2A95F99A70B1E803360796379064CD7B4E7B5E36CE8D86B2F1F7C2520198C9B2BCA7341D15014B7D10C94957870B049D6734F36E7C1FFA26E3578C8C51A7CCC18CC755053A03DFB7D50921C4F022AE6279CD0B29EFE680423C55E12B4B7B4241490D4EB039150F7718061F2AE9FB703E4A22D62B85F0B106FC0FA97943A57DE4A4B2750E77C9AD345',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWV6I0ZCMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDgy\nNzA2NDU1NloXDTE4MDgyODA2NDczNlowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC3U/jfZlMea3axuOhz0toojreBWeKYQXF0rAGjKsRo10546V8o\nGUzew2XT/6MDqKvPcZeEXz4SAyX+ln/BKYlksEx9N2uom6zLh8CVRmNfgb8s67Cs\nSbQNUqdsCqS8ks4bUIO5IGNgSotUUUjUUTiQMAXTY9gZm7KpX5mnCx6AM2B5Y3kG\nTNe057XjbOjYay8ffCUgGYybK8pzQdFQFLfRDJSVeHCwSdZzTzbnwf+ibjV4yMUa\nfMwYzHVQU6A9+31QkhxPAirmJ5zQsp7+aAQjxV4StLe0JBSQ1OsDkVD3cYBh8q6f\ntwPkoi1iuF8LEG/A+peUOlfeSksnUOd8mtNFAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAJWR83UPgg9erEpkek30NROafU8Pfgga\ngULNS631h5coYTeHaQ4W0ZfZQKE/rIRv0d1pHOxFcgm5GIFZJImX7VCWQn+x907H\nRx3sCJxRjXfooJLNiRPf95i1zBrECy3b72UOXF2AtyjIFf/MczVs0wAMtAVTpq8l\nr/WV776yCdZ5a32n2t+5qLkP2Gz/R1VrT53svijE4Ix+Cr+yCsrZyyxFaOT0VGAz\noJDPSiLKqc3XFH1ehHzxT2jH+PG6+lQtnXMHEfTGtOZCz8C+GB0nJn8i3zL+8Pgv\nZCYnoRZNyNgye5qetQX2Dd5wcQdA0/Pw8XyJyhKajlJLpSD+lkEJ/2M=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 0
to: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300059
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41642
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Handler: Error in server - details: Disconnected from auth before getting session key response
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
