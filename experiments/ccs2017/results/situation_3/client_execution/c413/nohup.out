changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c413.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c413',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 51 49 42 41 41 4b 43 41 51 45 41 71 51 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1535344158064
connected to auth! from local port 40734
received auth hello!
{ authId: 402, nonce: <Buffer 1a 79 75 cb ad 64 01 92> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer cc f9 b5 a2 18 d8 38 04>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 5b ab 19 e3 d0 77 cd 80 84 46 dc 3e a3 19 54 68>,
  macKeyVal: <Buffer ab 2f 33 29 45 08 64 a5 91 e4 78 92 db 07 a1 e2 c7 40 b5 40 62 86 ab 49 4c a6 b0 46 23 c8 81 d1>,
  absValidity: 2018-08-27T05:29:19.835Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200061,
  cipherKeyVal: <Buffer 95 06 9b b2 95 79 63 c1 a0 51 37 67 86 aa a2 b9>,
  macKeyVal: <Buffer b9 84 f3 f6 2f c9 4c b0 59 3d bc 86 5e 02 88 0b e4 8d cf 8a a1 c1 d5 2a da 5b 62 ca 73 14 8d 51>,
  absValidity: 2018-08-28T04:29:19.835Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200061,
     cipherKeyVal: <Buffer 95 06 9b b2 95 79 63 c1 a0 51 37 67 86 aa a2 b9>,
     macKeyVal: <Buffer b9 84 f3 f6 2f c9 4c b0 59 3d bc 86 5e 02 88 0b e4 8d cf 8a a1 c1 d5 2a da 5b 62 ca 73 14 8d 51>,
     absValidity: 2018-08-28T04:29:19.835Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 5a 31 97 f1 a4 09 3e 51>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:29:21 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1535344162601
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1535344218120
connected to auth! from local port 40918
received auth hello!
{ authId: 402, nonce: <Buffer d7 df 1a ba e4 5e 8b 83> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 5e e2 d6 09 d6 03 94 ab>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200068,
  cipherKeyVal: <Buffer 52 9f d3 2c e7 ca 63 bc 2c bf 85 b2 f6 54 93 ad>,
  macKeyVal: <Buffer 00 a0 14 26 4a a5 31 b0 66 b8 e4 50 41 4f ec d5 a2 30 48 70 4e 0b 27 fe fb e1 3e 07 19 25 a1 8f>,
  absValidity: 2018-08-28T04:30:19.890Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200068,
     cipherKeyVal: <Buffer 52 9f d3 2c e7 ca 63 bc 2c bf 85 b2 f6 54 93 ad>,
     macKeyVal: <Buffer 00 a0 14 26 4a a5 31 b0 66 b8 e4 50 41 4f ec d5 a2 30 48 70 4e 0b 27 fe fb e1 3e 07 19 25 a1 8f>,
     absValidity: 2018-08-28T04:30:19.890Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 41 6a 2c b8 27 2a 08 9a>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:30:22 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1535344222749
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1535344278176
connected to auth! from local port 41188
received auth hello!
{ authId: 402, nonce: <Buffer 5a 04 7e f3 d6 2f 2f 77> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 55 d5 5f 1a e5 b2 29 ef>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200075,
  cipherKeyVal: <Buffer f9 9b b0 1e 6b 56 38 1e 95 35 12 1d bd 1b 43 da>,
  macKeyVal: <Buffer bf 11 04 a2 ed 90 02 e0 52 bb e8 d2 70 1e 20 13 ca 4e f1 14 46 0e b5 72 5b e8 ad 7c 81 19 ac 6c>,
  absValidity: 2018-08-28T04:31:19.988Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200075,
     cipherKeyVal: <Buffer f9 9b b0 1e 6b 56 38 1e 95 35 12 1d bd 1b 43 da>,
     macKeyVal: <Buffer bf 11 04 a2 ed 90 02 e0 52 bb e8 d2 70 1e 20 13 ca 4e f1 14 46 0e b5 72 5b e8 ad 7c 81 19 ac 6c>,
     absValidity: 2018-08-28T04:31:19.988Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer d8 06 6e 31 e5 01 6a 20>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:31:22 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1535344282553
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1535344338231
connected to auth! from local port 41458
received auth hello!
{ authId: 402, nonce: <Buffer fc 66 3e 6f e6 19 b2 bc> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 69 45 56 fe 33 43 4e 71>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200082,
  cipherKeyVal: <Buffer 15 3b e3 08 a8 26 f9 8b 2a e2 1a 72 41 7c 51 5d>,
  macKeyVal: <Buffer 0e 28 b7 45 cc 6b f2 38 f1 87 74 46 30 40 b9 6c ab 29 5e 8a b4 f7 34 6b de 5f eb 7a 89 00 24 70>,
  absValidity: 2018-08-28T04:32:20.034Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200082,
     cipherKeyVal: <Buffer 15 3b e3 08 a8 26 f9 8b 2a e2 1a 72 41 7c 51 5d>,
     macKeyVal: <Buffer 0e 28 b7 45 cc 6b f2 38 f1 87 74 46 30 40 b9 6c ab 29 5e 8a b4 f7 34 6b de 5f eb 7a 89 00 24 70>,
     absValidity: 2018-08-28T04:32:20.034Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 85 52 63 3f c8 44 90 cd>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:32:22 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1535344342744
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1535344398288
connected to auth! from local port 41728
received auth hello!
{ authId: 402, nonce: <Buffer 9d 31 25 a7 2e 85 a0 a6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 37 68 41 c8 b3 65 30 54>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200089,
  cipherKeyVal: <Buffer 68 f0 b1 4f 5b 5c 67 e7 57 6f 2c 04 64 c9 62 72>,
  macKeyVal: <Buffer 0a 2f f8 24 84 27 59 bb 6f ef 65 f8 33 aa e4 6a 03 da 0d be 6a 42 5f 12 ce a0 b1 20 b3 82 3f 86>,
  absValidity: 2018-08-28T04:33:20.087Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200089,
     cipherKeyVal: <Buffer 68 f0 b1 4f 5b 5c 67 e7 57 6f 2c 04 64 c9 62 72>,
     macKeyVal: <Buffer 0a 2f f8 24 84 27 59 bb 6f ef 65 f8 33 aa e4 6a 03 da 0d be 6a 42 5f 12 ce a0 b1 20 b3 82 3f 86>,
     absValidity: 2018-08-28T04:33:20.087Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 3f c8 ca 51 a2 c1 01 19>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:33:22 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1535344402757
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1535344458340
connected to auth! from local port 41998
received auth hello!
{ authId: 402, nonce: <Buffer 03 4e 97 cc 1e b4 da d6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer f4 97 f0 58 ae bb eb dd>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200096,
  cipherKeyVal: <Buffer 98 64 d3 65 e0 df 88 be 06 1b 15 f4 9f f5 8a 29>,
  macKeyVal: <Buffer 01 34 11 39 6d 7d b0 59 9f f7 bd 7d c8 de 6c f2 ce 51 c0 6f 0b 74 4d 3e 20 1c 48 fb 56 c9 c4 f1>,
  absValidity: 2018-08-28T04:34:20.108Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200096,
     cipherKeyVal: <Buffer 98 64 d3 65 e0 df 88 be 06 1b 15 f4 9f f5 8a 29>,
     macKeyVal: <Buffer 01 34 11 39 6d 7d b0 59 9f f7 bd 7d c8 de 6c f2 ce 51 c0 6f 0b 74 4d 3e 20 1c 48 fb 56 c9 c4 f1>,
     absValidity: 2018-08-28T04:34:20.108Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer c5 de 4c d1 70 22 f5 44>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:34:22 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1535344462813
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1535344518364
connected to auth! from local port 42268
received auth hello!
{ authId: 402, nonce: <Buffer 0e db 61 00 29 2d 97 b4> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 36 33 d7 f0 a8 37 f9 9c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200103,
  cipherKeyVal: <Buffer 31 70 90 4b 3d 9a ef 90 d9 19 67 0e 48 a2 64 26>,
  macKeyVal: <Buffer 27 d1 9d 36 1c c3 98 04 ec c9 cc e5 3d 8f ed 04 43 71 59 61 68 87 b3 10 f2 3a 36 01 ac e6 93 2a>,
  absValidity: 2018-08-28T04:35:20.223Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200103,
     cipherKeyVal: <Buffer 31 70 90 4b 3d 9a ef 90 d9 19 67 0e 48 a2 64 26>,
     macKeyVal: <Buffer 27 d1 9d 36 1c c3 98 04 ec c9 cc e5 3d 8f ed 04 43 71 59 61 68 87 b3 10 f2 3a 36 01 ac e6 93 2a>,
     absValidity: 2018-08-28T04:35:20.223Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer ee e2 69 97 ff b8 e9 fd>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:35:22 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1535344523092
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1535344578420
connected to auth! from local port 42534
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 9 0.7777777777777778 1535344638430
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 10 0.7 1535344698440
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 44346
received auth hello!
{ authId: 502, nonce: <Buffer 4e c4 c0 4d 51 c0 82 6e> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 11 0.6363636363636364 1535344758450
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 44576
received auth hello!
{ authId: 502, nonce: <Buffer dd fb c0 ff fa e9 cf 9c> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 12 0.5833333333333334 1535344818460
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.4:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 13 0.5384615384615384 1535344878467
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 60306
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 14 0.5 1535344938474
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 60562
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 15 0.4666666666666667 1535344998481
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54074
received auth hello!
{ authId: 403, nonce: <Buffer 60 93 4c 7f a0 85 0c 35> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 16 0.4375 1535345058491
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54338
received auth hello!
{ authId: 403, nonce: <Buffer bf 00 0b 60 f3 88 22 05> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 17 0.4117647058823529 1535345118500
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 3
to: 4
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 52472
received auth hello!
{ authId: 503, nonce: <Buffer b1 03 2d 3a 89 28 2a a8> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth503',
     commonName: '10.0.1.6' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '016579A30590',
  notBefore: 2018-08-27T04:25:51.000Z,
  notAfter: 2018-08-28T04:27:31.000Z,
  subjectHash: '5542437f',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '41:2F:95:3F:A6:AC:74:7F:43:20:A2:5C:1A:A9:E9:1D:95:7D:9C:9A',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B23F6093C850A1F776C6B25A211F3D5D8785C0DAD492C4DE461DA15D8F9B6101A99371495C8D7E30C245C7CC7E2E192E5B5EB588DBBBDBA927B35EDD2BAE5D8C5C65824B855A9221C4466C8784616AD037B77C8AADC6EF39D05015670368020871C42CAC357EA02550E2A7B413707218579A29BD6E3766CDC96E0C38274B71EADD932F983948893BE88DFCA5822A49F903804459FF6A6BE5F8D58602F470CF3B3720B509B13C86CB937B7103FB5BB709F3236962F0A80B162386009C70550963F281A68E509BD7FD3B899E2D99BBF01E7FAD284D2AA9766FC563E437A20FC2DB9E924A4047450953A3342A8380752168F1038EC6A4763C6E85566CE28AE879E7',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.6' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 503,
  host: '10.0.1.6',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWV5owWQMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDgy\nNzA0MjU1MVoXDTE4MDgyODA0MjczMVowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMzERMA8GA1UEAwwIMTAuMC4xLjYwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCyP2CTyFCh93bGslohHz1dh4XA2tSSxN5GHaFdj5thAamTcUlc\njX4wwkXHzH4uGS5bXrWI27vbqSezXt0rrl2MXGWCS4VakiHERmyHhGFq0De3fIqt\nxu850FAVZwNoAghxxCysNX6gJVDip7QTcHIYV5opvW43Zs3Jbgw4J0tx6t2TL5g5\nSIk76I38pYIqSfkDgERZ/2pr5fjVhgL0cM87NyC1CbE8hsuTe3ED+1u3CfMjaWLw\nqAsWI4YAnHBVCWPygaaOUJvX/TuJni2Zu/Aef60oTSqpdm/FY+Q3og/C256SSkBH\nRQlTozQqg4B1IWjxA47GpHY8boVWbOKK6HnnAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQYwDQYJKoZIhvcNAQELBQADggEBAG4qC0Z6/YnhgNRGiexKUnMpCHlyMqxI\n2AEZc+sBDwLeAb7mq8UFTjVRoVTu/v3aLhxBb1AfpFvCoTAHcrAl0a2OZ1EydHOW\n9e2d78o++5Qcdbtvs0MFPmkIqsAWVcS6Lpd3aZstCIkxRi0g4UmV+5kERhMgp3EA\nfcWFkwFCseT1TT0+FmLoJpVwAIYg7Fa159gT9BgEL1EXGq8WCPmZRabtB/atHoqH\nnFYHrn8EQc1HK+im5DzhzA1k3yKcVf/km3STEiGqL+8rKv33a32L9WfJhNGKvV6b\neG8H85cur5uHqPfw8og+v4To1fY3ExTOvJXnN5Zvmkz1UOTfihO7xFk=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 4
to: 5
disconnected from auth
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
