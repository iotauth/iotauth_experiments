changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c411.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c411',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 51 49 42 41 41 4b 43 41 51 45 41 30 68 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1535344151709
connected to auth! from local port 44780
received auth hello!
{ authId: 402, nonce: <Buffer 4c 78 db c6 f8 d4 02 b5> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 64 88 cd 42 19 fd e8 9e>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 6b 62 ec 39 14 78 1a a1 29 52 6b 8a 7f d3 53 33>,
  macKeyVal: <Buffer 4d e1 05 95 d5 13 db d0 68 78 31 95 71 08 3e 2e d4 8b 22 57 51 4e 92 3e 12 1a a1 51 d4 14 31 3b>,
  absValidity: 2018-08-27T05:29:11.898Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200059,
  cipherKeyVal: <Buffer 10 9e 3d 4a 17 3a 60 3f 19 b2 a4 e9 f8 7b 4f 13>,
  macKeyVal: <Buffer 5c 3a 3f aa e8 39 7a 65 22 c8 ad 7a a8 8b e4 90 62 5e 97 d9 d1 00 70 d0 25 63 04 78 09 16 a9 e7>,
  absValidity: 2018-08-28T04:29:11.897Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200059,
     cipherKeyVal: <Buffer 10 9e 3d 4a 17 3a 60 3f 19 b2 a4 e9 f8 7b 4f 13>,
     macKeyVal: <Buffer 5c 3a 3f aa e8 39 7a 65 22 c8 ad 7a a8 8b e4 90 62 5e 97 d9 d1 00 70 d0 25 63 04 78 09 16 a9 e7>,
     absValidity: 2018-08-28T04:29:11.897Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer ca 26 79 e8 cc 99 98 c3>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:29:13 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1535344154256
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1535344211764
connected to auth! from local port 44954
received auth hello!
{ authId: 402, nonce: <Buffer 55 f9 1d d2 a5 41 44 d2> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer f2 49 e0 e7 a0 94 f4 43>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200066,
  cipherKeyVal: <Buffer e3 a2 25 2a 6c f3 9a 9b 5c 31 c3 97 04 fb f0 aa>,
  macKeyVal: <Buffer f0 0b 7b 04 d6 2e 58 20 a3 b8 1f 69 c7 40 27 75 3e 95 6b a6 c3 90 32 96 5a be ac f9 13 df 9c f7>,
  absValidity: 2018-08-28T04:30:11.905Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200066,
     cipherKeyVal: <Buffer e3 a2 25 2a 6c f3 9a 9b 5c 31 c3 97 04 fb f0 aa>,
     macKeyVal: <Buffer f0 0b 7b 04 d6 2e 58 20 a3 b8 1f 69 c7 40 27 75 3e 95 6b a6 c3 90 32 96 5a be ac f9 13 df 9c f7>,
     absValidity: 2018-08-28T04:30:11.905Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer f0 37 42 63 4a 1a 59 c5>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:30:13 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1535344214278
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1535344271820
connected to auth! from local port 45224
received auth hello!
{ authId: 402, nonce: <Buffer cd de 62 16 71 5b 2c 02> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 26 62 5e 18 fb c5 bf fd>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200073,
  cipherKeyVal: <Buffer 1c 94 70 c8 ce 39 77 e7 48 91 e5 85 17 99 df cf>,
  macKeyVal: <Buffer c7 1a 25 96 24 62 c3 0f e2 34 90 e2 53 0a 7e 32 6a 64 98 a5 f6 cf a1 3f 5d fb e9 87 74 2b 24 56>,
  absValidity: 2018-08-28T04:31:11.995Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200073,
     cipherKeyVal: <Buffer 1c 94 70 c8 ce 39 77 e7 48 91 e5 85 17 99 df cf>,
     macKeyVal: <Buffer c7 1a 25 96 24 62 c3 0f e2 34 90 e2 53 0a 7e 32 6a 64 98 a5 f6 cf a1 3f 5d fb e9 87 74 2b 24 56>,
     absValidity: 2018-08-28T04:31:11.995Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 77 75 bb bf c7 fc 3a f2>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:31:14 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1535344274420
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1535344331876
connected to auth! from local port 45494
received auth hello!
{ authId: 402, nonce: <Buffer 0d 5f eb 7d d3 95 3b b1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 45 26 58 4a c5 7f 23 e0>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200080,
  cipherKeyVal: <Buffer 4e 7e bb d1 2b c4 0a 73 ff f1 de 47 08 fb 72 cb>,
  macKeyVal: <Buffer 55 5c 53 cc cf 67 b5 b9 9a bb f7 0b bb a5 b2 7f 83 f9 b8 07 21 5a 67 3c 64 2b 2e 0e 83 a7 5a 4f>,
  absValidity: 2018-08-28T04:32:12.026Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200080,
     cipherKeyVal: <Buffer 4e 7e bb d1 2b c4 0a 73 ff f1 de 47 08 fb 72 cb>,
     macKeyVal: <Buffer 55 5c 53 cc cf 67 b5 b9 9a bb f7 0b bb a5 b2 7f 83 f9 b8 07 21 5a 67 3c 64 2b 2e 0e 83 a7 5a 4f>,
     absValidity: 2018-08-28T04:32:12.026Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 3b d7 23 cf 8c 4d 67 b0>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:32:14 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1535344334379
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1535344391929
connected to auth! from local port 45764
received auth hello!
{ authId: 402, nonce: <Buffer 1c a8 fa 5f 08 a4 9c 2f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c8 aa 09 db 56 0c 81 38>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200087,
  cipherKeyVal: <Buffer 82 e5 cd cd bd 0d 46 13 70 30 1a f5 39 61 fd ff>,
  macKeyVal: <Buffer 02 3b 5a 91 cb 6f 52 d0 ed f9 4c b8 4f 2e 82 57 02 43 a7 71 ca 89 d0 38 d9 65 46 d9 d8 45 63 77>,
  absValidity: 2018-08-28T04:33:12.101Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200087,
     cipherKeyVal: <Buffer 82 e5 cd cd bd 0d 46 13 70 30 1a f5 39 61 fd ff>,
     macKeyVal: <Buffer 02 3b 5a 91 cb 6f 52 d0 ed f9 4c b8 4f 2e 82 57 02 43 a7 71 ca 89 d0 38 d9 65 46 d9 d8 45 63 77>,
     absValidity: 2018-08-28T04:33:12.101Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer c5 60 92 fc 79 01 59 c9>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:33:14 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1535344394438
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1535344451982
connected to auth! from local port 46034
received auth hello!
{ authId: 402, nonce: <Buffer fe e7 5a bd 62 9c bd 46> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 01 cc 01 78 b3 43 6c 3c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200094,
  cipherKeyVal: <Buffer 63 16 fc 9d f1 1e cb 63 2c a6 a1 da 0f 9f a6 a0>,
  macKeyVal: <Buffer 4d cc f9 c5 0b 43 da c2 97 d6 9f ba a9 1e c8 b9 08 4f b3 47 43 cd 5b 60 3c fe 10 03 4c c6 7e 49>,
  absValidity: 2018-08-28T04:34:12.137Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200094,
     cipherKeyVal: <Buffer 63 16 fc 9d f1 1e cb 63 2c a6 a1 da 0f 9f a6 a0>,
     macKeyVal: <Buffer 4d cc f9 c5 0b 43 da c2 97 d6 9f ba a9 1e c8 b9 08 4f b3 47 43 cd 5b 60 3c fe 10 03 4c c6 7e 49>,
     absValidity: 2018-08-28T04:34:12.137Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer e7 7a 4e bc ee ba b6 6c>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:34:14 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1535344454490
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1535344512039
connected to auth! from local port 46304
received auth hello!
{ authId: 402, nonce: <Buffer 8f 25 bb ca 7c 14 09 3a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ae 66 89 51 32 2b e4 ba>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200101,
  cipherKeyVal: <Buffer 30 21 47 74 e2 c5 10 2f 2d f7 4a aa f9 b9 35 4f>,
  macKeyVal: <Buffer f8 67 8f 6a 12 ff 6e a4 31 34 9b c0 72 46 11 f0 74 53 d9 a2 c2 01 33 ce 5b 4f eb 2e 83 51 83 96>,
  absValidity: 2018-08-28T04:35:12.219Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200101,
     cipherKeyVal: <Buffer 30 21 47 74 e2 c5 10 2f 2d f7 4a aa f9 b9 35 4f>,
     macKeyVal: <Buffer f8 67 8f 6a 12 ff 6e a4 31 34 9b c0 72 46 11 f0 74 53 d9 a2 c2 01 33 ce 5b 4f eb 2e 83 51 83 96>,
     absValidity: 2018-08-28T04:35:12.219Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 20 7f f8 98 28 fe a8 ab>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:35:14 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1535344514669
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1535344572096
connected to auth! from local port 46570
received auth hello!
{ authId: 402, nonce: <Buffer 9a c0 1a e2 9d bf 17 82> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 6d 9b cb d5 08 dd 03 2d>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200108,
  cipherKeyVal: <Buffer 22 af 13 ee 9b eb 4c 6f 7f ad 73 5e ea e4 4d a2>,
  macKeyVal: <Buffer 21 20 78 9e a1 5a 29 4c 45 6b cd 51 cd 55 aa 79 01 b0 fe 91 1c 3a 7e 17 a2 f5 3b d1 b8 dd 8e a9>,
  absValidity: 2018-08-28T04:36:12.224Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200108,
     cipherKeyVal: <Buffer 22 af 13 ee 9b eb 4c 6f 7f ad 73 5e ea e4 4d a2>,
     macKeyVal: <Buffer 21 20 78 9e a1 5a 29 4c 45 6b cd 51 cd 55 aa 79 01 b0 fe 91 1c 3a 7e 17 a2 f5 3b d1 b8 dd 8e a9>,
     absValidity: 2018-08-28T04:36:12.224Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 25 13 f8 c5 ed 63 95 cd>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:36:14 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1535344574560
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1535344632154
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1535344692164
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 40260
received auth hello!
{ authId: 502, nonce: <Buffer 13 5f 6a ad 03 f8 6e 03> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1535344752172
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 40492
received auth hello!
{ authId: 502, nonce: <Buffer 89 54 fb ee 5a e1 07 26> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1535344812182
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.4:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 13 0.6153846153846154 1535344872189
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 45802
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 14 0.5714285714285714 1535344932197
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 46056
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 15 0.5333333333333333 1535344992204
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54932
received auth hello!
{ authId: 403, nonce: <Buffer 3e 5e e8 61 c2 93 45 c2> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 16 0.5 1535345052207
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 55194
received auth hello!
{ authId: 403, nonce: <Buffer 01 51 c1 e3 57 e3 94 89> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 17 0.47058823529411764 1535345112217
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 3
to: 4
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 33642
received auth hello!
{ authId: 503, nonce: <Buffer 26 7b 2e e7 e9 7b f2 3e> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth503',
     commonName: '10.0.1.6' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '016579A30590',
  notBefore: 2018-08-27T04:25:51.000Z,
  notAfter: 2018-08-28T04:27:31.000Z,
  subjectHash: '5542437f',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '41:2F:95:3F:A6:AC:74:7F:43:20:A2:5C:1A:A9:E9:1D:95:7D:9C:9A',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B23F6093C850A1F776C6B25A211F3D5D8785C0DAD492C4DE461DA15D8F9B6101A99371495C8D7E30C245C7CC7E2E192E5B5EB588DBBBDBA927B35EDD2BAE5D8C5C65824B855A9221C4466C8784616AD037B77C8AADC6EF39D05015670368020871C42CAC357EA02550E2A7B413707218579A29BD6E3766CDC96E0C38274B71EADD932F983948893BE88DFCA5822A49F903804459FF6A6BE5F8D58602F470CF3B3720B509B13C86CB937B7103FB5BB709F3236962F0A80B162386009C70550963F281A68E509BD7FD3B899E2D99BBF01E7FAD284D2AA9766FC563E437A20FC2DB9E924A4047450953A3342A8380752168F1038EC6A4763C6E85566CE28AE879E7',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.6' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 503,
  host: '10.0.1.6',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWV5owWQMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDgy\nNzA0MjU1MVoXDTE4MDgyODA0MjczMVowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMzERMA8GA1UEAwwIMTAuMC4xLjYwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCyP2CTyFCh93bGslohHz1dh4XA2tSSxN5GHaFdj5thAamTcUlc\njX4wwkXHzH4uGS5bXrWI27vbqSezXt0rrl2MXGWCS4VakiHERmyHhGFq0De3fIqt\nxu850FAVZwNoAghxxCysNX6gJVDip7QTcHIYV5opvW43Zs3Jbgw4J0tx6t2TL5g5\nSIk76I38pYIqSfkDgERZ/2pr5fjVhgL0cM87NyC1CbE8hsuTe3ED+1u3CfMjaWLw\nqAsWI4YAnHBVCWPygaaOUJvX/TuJni2Zu/Aef60oTSqpdm/FY+Q3og/C256SSkBH\nRQlTozQqg4B1IWjxA47GpHY8boVWbOKK6HnnAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQYwDQYJKoZIhvcNAQELBQADggEBAG4qC0Z6/YnhgNRGiexKUnMpCHlyMqxI\n2AEZc+sBDwLeAb7mq8UFTjVRoVTu/v3aLhxBb1AfpFvCoTAHcrAl0a2OZ1EydHOW\n9e2d78o++5Qcdbtvs0MFPmkIqsAWVcS6Lpd3aZstCIkxRi0g4UmV+5kERhMgp3EA\nfcWFkwFCseT1TT0+FmLoJpVwAIYg7Fa159gT9BgEL1EXGq8WCPmZRabtB/atHoqH\nnFYHrn8EQc1HK+im5DzhzA1k3yKcVf/km3STEiGqL+8rKv33a32L9WfJhNGKvV6b\neG8H85cur5uHqPfw8og+v4To1fY3ExTOvJXnN5Zvmkz1UOTfihO7xFk=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 4
to: 5
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
