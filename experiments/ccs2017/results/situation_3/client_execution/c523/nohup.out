changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c523.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c523',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 38 65 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1535344254128
connected to auth! from local port 51194
received auth hello!
{ authId: 504, nonce: <Buffer 66 1e 7c 5d 8e 77 57 93> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer e1 2d a0 ae a2 4e c1 c7>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 04 43 08 10 22 2e b6 af ed 73 1c 00 b1 3b 22 ea>,
  macKeyVal: <Buffer 9c 95 b2 1d a9 fc e8 6d a1 8c db 4c 07 cc e1 1d ef 84 95 03 1e 40 25 c7 a1 10 50 73 92 44 8f 00>,
  absValidity: 2018-08-27T05:30:54.337Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400041,
  cipherKeyVal: <Buffer f0 e2 5d 71 19 b4 3b 06 38 f6 01 39 63 ca d8 bf>,
  macKeyVal: <Buffer d7 61 57 5b 91 7b ad cb 27 9b 8d 07 4f 68 25 4d 99 e8 1a be f8 09 c8 57 53 ce da f1 ed 06 fc 0f>,
  absValidity: 2018-08-28T04:30:54.337Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 50400041,
     cipherKeyVal: <Buffer f0 e2 5d 71 19 b4 3b 06 38 f6 01 39 63 ca d8 bf>,
     macKeyVal: <Buffer d7 61 57 5b 91 7b ad cb 27 9b 8d 07 4f 68 25 4d 99 e8 1a be f8 09 c8 57 53 ce da f1 ed 06 fc 0f>,
     absValidity: 2018-08-28T04:30:54.337Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer ad 51 97 92 44 d4 46 23>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:30:56 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1535344257225
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1535344314184
connected to auth! from local port 51464
received auth hello!
{ authId: 504, nonce: <Buffer c1 4d 40 df ed 35 10 ba> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 12 4d 88 0f 50 41 30 0f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400047,
  cipherKeyVal: <Buffer 38 ad ce 84 38 7c c7 4b 1f 0f 7b d8 47 6f e8 56>,
  macKeyVal: <Buffer 41 37 cc 99 20 65 2b d7 d4 29 66 3f 80 86 45 11 89 eb f6 02 3d 94 3a 3d 82 98 1c 5f 3e ac 32 1b>,
  absValidity: 2018-08-28T04:31:54.319Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 50400047,
     cipherKeyVal: <Buffer 38 ad ce 84 38 7c c7 4b 1f 0f 7b d8 47 6f e8 56>,
     macKeyVal: <Buffer 41 37 cc 99 20 65 2b d7 d4 29 66 3f 80 86 45 11 89 eb f6 02 3d 94 3a 3d 82 98 1c 5f 3e ac 32 1b>,
     absValidity: 2018-08-28T04:31:54.319Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 73 e7 dd c1 45 7c 4f 50>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:31:56 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1535344317222
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1535344374242
connected to auth! from local port 51734
received auth hello!
{ authId: 504, nonce: <Buffer 0d 8d c0 60 49 aa c9 b0> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 76 1b 4e e3 d7 87 4b ed>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400053,
  cipherKeyVal: <Buffer 33 d5 37 fa 3e 34 cd b1 25 af 77 7b d5 e2 e7 9b>,
  macKeyVal: <Buffer 42 fc 9d c2 e2 15 2d 8d 7f 25 9a e0 8a 04 63 b1 4e 66 9e 45 6d 37 5c 98 7b f2 d5 72 8d 17 15 eb>,
  absValidity: 2018-08-28T04:32:54.415Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 50400053,
     cipherKeyVal: <Buffer 33 d5 37 fa 3e 34 cd b1 25 af 77 7b d5 e2 e7 9b>,
     macKeyVal: <Buffer 42 fc 9d c2 e2 15 2d 8d 7f 25 9a e0 8a 04 63 b1 4e 66 9e 45 6d 37 5c 98 7b f2 d5 72 8d 17 15 eb>,
     absValidity: 2018-08-28T04:32:54.415Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 3c c7 d8 2d 43 2d 8e 49>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:32:57 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1535344377544
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1535344434296
connected to auth! from local port 52004
received auth hello!
{ authId: 504, nonce: <Buffer 69 a0 2f 09 f5 88 0c 25> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 2c 20 7b 38 43 84 ca 77>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400059,
  cipherKeyVal: <Buffer 66 6a c3 99 4a 13 8c e8 7d ab 86 ff 90 4d cc d6>,
  macKeyVal: <Buffer ff 6e dc ea d9 d2 1f 7a 37 88 4d d0 b3 75 25 8a 4f 9e 9e 81 2c 2c fd b5 23 16 95 6d 15 51 bd 4e>,
  absValidity: 2018-08-28T04:33:54.431Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 50400059,
     cipherKeyVal: <Buffer 66 6a c3 99 4a 13 8c e8 7d ab 86 ff 90 4d cc d6>,
     macKeyVal: <Buffer ff 6e dc ea d9 d2 1f 7a 37 88 4d d0 b3 75 25 8a 4f 9e 9e 81 2c 2c fd b5 23 16 95 6d 15 51 bd 4e>,
     absValidity: 2018-08-28T04:33:54.431Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 21 f8 49 24 f5 4a 17 83>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:33:57 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1535344437327
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1535344494352
connected to auth! from local port 52274
received auth hello!
{ authId: 504, nonce: <Buffer 5a 59 4e 05 26 08 22 e1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 85 bb e4 bf 78 1d 81 c3>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400065,
  cipherKeyVal: <Buffer b4 c0 a7 cf 43 55 91 dc 3f 04 bd 31 97 85 c8 94>,
  macKeyVal: <Buffer 00 4f c8 9d a4 53 15 e2 7a dd b8 9b c5 54 5c 7e 8d 70 7e a0 6f 1f f5 d8 32 be f2 ac a1 fd 47 be>,
  absValidity: 2018-08-28T04:34:54.524Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 50400065,
     cipherKeyVal: <Buffer b4 c0 a7 cf 43 55 91 dc 3f 04 bd 31 97 85 c8 94>,
     macKeyVal: <Buffer 00 4f c8 9d a4 53 15 e2 7a dd b8 9b c5 54 5c 7e 8d 70 7e a0 6f 1f f5 d8 32 be f2 ac a1 fd 47 be>,
     absValidity: 2018-08-28T04:34:54.524Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 94 b0 31 c9 e5 7f db cb>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:34:57 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1535344497405
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1535344554408
connected to auth! from local port 52544
received auth hello!
{ authId: 504, nonce: <Buffer a8 58 af 4d 2a 09 fa 72> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 57 a0 df 7b 8b 62 58 db>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400071,
  cipherKeyVal: <Buffer 6f 86 7d 83 17 08 0f 09 00 32 e6 48 58 1b 91 6f>,
  macKeyVal: <Buffer d7 69 dc 85 c0 78 1c ec 17 3f 2b 06 77 6c 43 a4 00 b7 c1 b7 3f 5e d6 a0 a6 a1 c7 51 6e e4 bf 96>,
  absValidity: 2018-08-28T04:35:54.575Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 50400071,
     cipherKeyVal: <Buffer 6f 86 7d 83 17 08 0f 09 00 32 e6 48 58 1b 91 6f>,
     macKeyVal: <Buffer d7 69 dc 85 c0 78 1c ec 17 3f 2b 06 77 6c 43 a4 00 b7 c1 b7 3f 5e d6 a0 a6 a1 c7 51 6e e4 bf 96>,
     absValidity: 2018-08-28T04:35:54.575Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 05 33 d4 5a 47 7b 13 a4>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Mon Aug 27 2018 04:35:57 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1535344557767
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1535344614465
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 8 0.75 1535344674476
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 51480
received auth hello!
{ authId: 503, nonce: <Buffer 37 64 c6 a6 bb bd 38 7d> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 9 0.6666666666666666 1535344734481
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 51706
received auth hello!
{ authId: 503, nonce: <Buffer 6c 3f 6e f1 14 09 32 35> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 10 0.6 1535344794491
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 35796
received auth hello!
{ authId: 403, nonce: <Buffer d4 96 d0 cb 39 b7 11 ae> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 11 0.5454545454545454 1535344854501
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 36032
received auth hello!
{ authId: 403, nonce: <Buffer 1b 05 c5 c2 93 75 ea a9> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 12 0.5 1535344914513
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 42670
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 13 0.46153846153846156 1535344974520
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 42928
received auth hello!
{ authId: 401, nonce: <Buffer b0 90 20 e8 19 20 ec bf> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth504',
     commonName: '10.0.0.7' },
  serial: '016579A30E8D',
  notBefore: 2018-08-27T04:25:53.000Z,
  notAfter: 2018-08-28T04:27:33.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '95:9F:B8:B1:71:C6:F1:7D:30:83:CD:20:64:5F:4E:DF:FC:DF:4D:A7',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'AF23BC17C526A7AFDABD10E11B69948936F06BDEC216730D0926F4729C3F53806C2812687248D00BE365D1DB11907B8C3441F9A9A7F0B913065F79BBEFB9605DD128C9B144B177076B7E46B92A3FA31511995B3D57F9BFA275EBEDA464AF403971A8925028BF43CC548AC9052D7E35AD851586AC0C4EA1FC7C755E22CB819A087D35C0E9C0DF733E9757F060E6AF797111A2B852A6191E6341A7CF678D8604077227A06289ADD8492928D5EECC3787C220575D0F755645359EFE007ECCC7BBCE9132761D1346C2B4F372E3F9A44DF760E0EDCCAC935454D03E6F2A22C1BFC15A4ABCAA38B7AB27FC12DF6127B9A5258B4BD00B1E6D28F03EEDEDAE39ABC5924F',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWV5ow6NMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg1MDQxETAPBgNVBAMMCDEwLjAuMC43MB4XDTE4MDgy\nNzA0MjU1M1oXDTE4MDgyODA0MjczM1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCvI7wXxSanr9q9EOEbaZSJNvBr3sIWcw0JJvRynD9TgGwoEmhy\nSNAL42XR2xGQe4w0Qfmpp/C5EwZfebvvuWBd0SjJsUSxdwdrfka5Kj+jFRGZWz1X\n+b+idevtpGSvQDlxqJJQKL9DzFSKyQUtfjWthRWGrAxOofx8dV4iy4GaCH01wOnA\n33M+l1fwYOaveXERorhSphkeY0Gnz2eNhgQHciegYomt2EkpKNXuzDeHwiBXXQ91\nVkU1nv4AfszHu86RMnYdE0bCtPNy4/mkTfdg4O3MrJNUVNA+byoiwb/BWkq8qji3\nqyf8Et9hJ7mlJYtL0AsebSjwPu3trjmrxZJPAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAD7NuP53E379MJE3u//hNNLGLLJjVCgN\ngdaWbyKpGFDdjJczm9dS78SU9aFjeBKxYXAaqv5talDV5abaHoG6ICBcGLP5TzUF\niBaiNjON769Z3bic55YLPeAT1RvkI4Ok5V8AY0npl8r2717NVOJgHtNQTZrJkYcU\njHgHSwt/58nGOzjx3e5EQPziDb6i+xCExGje6pASoST7rrk0Qmh2+1pxfM6efNAI\nIPU2NXuPD7MeLRopB0ycw2lixC9Ova2UoGxKRjbg9QjR17/ICjbToF89Vd25r2Wa\nA85C6/XjE2BHViwL3XW9vEaoyLoRZZr+5eO9jBE/yFkFQgasYb5atp0=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 2
to: 3
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 14 0.42857142857142855 1535345034530
connected to auth! from local port 43170
received auth hello!
{ authId: 401, nonce: <Buffer 80 3b 85 5b 8b f2 1a 1f> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer c0 4f d8 98 be 95 26 fb>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 0e 92 21 6e 39 5a e5 09 06 0b 37 a2 f9 ef 74 c0>,
  macKeyVal: <Buffer a4 07 a5 84 43 ae 66 ac 71 9f 24 b2 3f 9b 32 dc bd ee 64 76 ce aa 39 27 1a 22 4e 79 5c ca 09 12>,
  absValidity: 2018-08-27T05:43:58.331Z }
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100395,
  cipherKeyVal: <Buffer 0a ad 87 87 a4 5d 95 02 92 dc 11 ce f0 0c 00 19>,
  macKeyVal: <Buffer 07 07 19 ed ac 62 8b 47 6f 55 7b d0 22 fd 65 ef 17 69 af 6f cb 64 5c 66 d4 6c 8a a5 2e f1 9c 9e>,
  absValidity: 2018-08-28T04:43:58.331Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 40100395,
     cipherKeyVal: <Buffer 0a ad 87 87 a4 5d 95 02 92 dc 11 ce f0 0c 00 19>,
     macKeyVal: <Buffer 07 07 19 ed ac 62 8b 47 6f 55 7b d0 22 fd 65 ef 17 69 af 6f cb 64 5c 66 d4 6c 8a a5 2e f1 9c 9e>,
     absValidity: 2018-08-28T04:43:58.331Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 0c a2 17 0e 78 27 25 aa>
switching to HANDSHAKE_1_SENT
Handler: secure connection with the server closed.
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.41:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 15 0.4 1535345094536
connected to auth! from local port 43438
received auth hello!
{ authId: 401, nonce: <Buffer 43 7d 4f 94 eb dd 45 b7> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 18 bc c6 90 bc cb 9b 99>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100407,
  cipherKeyVal: <Buffer 54 85 b2 30 39 a5 3f 58 2d 17 0d 1c 3d 3f bf 94>,
  macKeyVal: <Buffer 0b c7 53 2d 0c d7 33 9c ca 5e 60 2f 0d e7 10 ce 0c 38 05 28 36 84 f6 61 df 40 b0 7c 31 07 b7 c5>,
  absValidity: 2018-08-28T04:44:58.269Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 40100407,
     cipherKeyVal: <Buffer 54 85 b2 30 39 a5 3f 58 2d 17 0d 1c 3d 3f bf 94>,
     macKeyVal: <Buffer 0b c7 53 2d 0c d7 33 9c ca 5e 60 2f 0d e7 10 ce 0c 38 05 28 36 84 f6 61 df 40 b0 7c 31 07 b7 c5>,
     absValidity: 2018-08-28T04:44:58.269Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 08 ed 19 df 1f c7 14 18>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.41:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 16 0.375 1535345154542
connected to auth! from local port 43706
received auth hello!
{ authId: 401, nonce: <Buffer 1e 57 6b b5 91 5c 80 07> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 02 61 46 36 ff 7b 7e b2>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100419,
  cipherKeyVal: <Buffer 86 e3 2b 96 32 c3 70 50 86 2e e1 cd 21 be 31 8e>,
  macKeyVal: <Buffer b0 93 6c 8b 30 1d 98 61 7d d9 f7 a2 30 45 ff c1 c9 c2 74 29 02 d9 42 42 b3 1e 7a 22 a2 c0 36 8f>,
  absValidity: 2018-08-28T04:45:58.346Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.41',
  serverPort: 22100,
  sessionKey: 
   { id: 40100419,
     cipherKeyVal: <Buffer 86 e3 2b 96 32 c3 70 50 86 2e e1 cd 21 be 31 8e>,
     macKeyVal: <Buffer b0 93 6c 8b 30 1d 98 61 7d d9 f7 a2 30 45 ff c1 c9 c2 74 29 02 d9 42 42 b3 1e 7a 22 a2 c0 36 8f>,
     absValidity: 2018-08-28T04:45:58.346Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 54 32 5c 76 5f bb bf 03>
switching to HANDSHAKE_1_SENT
disconnected from auth
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
