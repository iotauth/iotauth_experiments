changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c419.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c419',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 78 65 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521581402935
connected to auth! from local port 45452
received auth hello!
{ authId: 403, nonce: <Buffer d5 d0 ed ff 0c 84 93 24> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer a5 fa 8c 87 c4 ff 68 4c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 91 51 1d b9 ed 75 45 90 28 be 31 e7 e5 63 e8 2a>,
  macKeyVal: <Buffer 1e 53 0f 14 ff c8 e9 65 c4 50 a5 df 50 97 f2 8a 47 fe b3 37 e6 c3 29 0e 61 1c 53 a9 c5 5f 6a c1>,
  absValidity: 2018-03-20T22:30:03.865Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300557,
  cipherKeyVal: <Buffer 91 f6 69 7b bc 68 80 69 19 fd 20 7c 38 f2 2c 00>,
  macKeyVal: <Buffer ef cc 56 59 b0 f0 cb 37 23 af d9 ea 62 4c d6 6e 9d f4 21 27 53 10 03 2e 77 6d 6e de 34 84 2d c0>,
  absValidity: 2018-03-21T21:30:03.865Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300557,
     cipherKeyVal: <Buffer 91 f6 69 7b bc 68 80 69 19 fd 20 7c 38 f2 2c 00>,
     macKeyVal: <Buffer ef cc 56 59 b0 f0 cb 37 23 af d9 ea 62 4c d6 6e 9d f4 21 27 53 10 03 2e 77 6d 6e de 34 84 2d c0>,
     absValidity: 2018-03-21T21:30:03.865Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 94 4a b2 83 64 2a d8 33>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:30:05 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521581406323
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521581462990
connected to auth! from local port 45674
received auth hello!
{ authId: 403, nonce: <Buffer d5 22 9a 2c 20 4a 31 05> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 41 12 62 17 de 4b f9 3c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300563,
  cipherKeyVal: <Buffer b1 8d 90 d1 13 22 fe 02 bf d7 7f 06 0a 81 ab 0a>,
  macKeyVal: <Buffer e3 54 2f 30 3b 61 1b 95 d1 b4 f1 97 c6 3a d6 36 d8 87 36 1a 1a 79 84 60 18 0d c7 16 01 22 4b d7>,
  absValidity: 2018-03-21T21:31:03.947Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300563,
     cipherKeyVal: <Buffer b1 8d 90 d1 13 22 fe 02 bf d7 7f 06 0a 81 ab 0a>,
     macKeyVal: <Buffer e3 54 2f 30 3b 61 1b 95 d1 b4 f1 97 c6 3a d6 36 d8 87 36 1a 1a 79 84 60 18 0d c7 16 01 22 4b d7>,
     absValidity: 2018-03-21T21:31:03.947Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 1c 44 3d d0 fa 33 0a 50>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:31:06 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521581466691
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521581523039
connected to auth! from local port 45944
received auth hello!
{ authId: 403, nonce: <Buffer ac 8a fe af 5f 2e db 8f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c9 69 ea 24 de b3 56 26>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300569,
  cipherKeyVal: <Buffer 5e 0a 21 42 36 47 06 38 97 e8 c2 77 af fb b1 67>,
  macKeyVal: <Buffer 15 fe c5 b4 61 4c 70 52 bf c0 48 d0 bb 3a 2c 84 86 74 e3 cd 0b 85 69 ad d6 60 d1 e9 96 05 68 93>,
  absValidity: 2018-03-21T21:32:03.996Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300569,
     cipherKeyVal: <Buffer 5e 0a 21 42 36 47 06 38 97 e8 c2 77 af fb b1 67>,
     macKeyVal: <Buffer 15 fe c5 b4 61 4c 70 52 bf c0 48 d0 bb 3a 2c 84 86 74 e3 cd 0b 85 69 ad d6 60 d1 e9 96 05 68 93>,
     absValidity: 2018-03-21T21:32:03.996Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 3d 91 92 29 aa db 48 1b>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:32:06 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521581526768
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521581583096
connected to auth! from local port 46214
received auth hello!
{ authId: 403, nonce: <Buffer ba 02 8b fa fd ed dc b1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 7d 1f 46 4f 1b 68 b9 d7>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300575,
  cipherKeyVal: <Buffer ef c8 a7 54 ed f3 01 74 2b 12 e6 3e 4b 2c 82 6d>,
  macKeyVal: <Buffer 68 ac 4a f3 1d 9f 1a 3e 27 f5 11 90 90 4f a1 3c e4 c6 cf 14 cd 61 81 db 2f 54 b4 52 9b 30 e4 94>,
  absValidity: 2018-03-21T21:33:04.065Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300575,
     cipherKeyVal: <Buffer ef c8 a7 54 ed f3 01 74 2b 12 e6 3e 4b 2c 82 6d>,
     macKeyVal: <Buffer 68 ac 4a f3 1d 9f 1a 3e 27 f5 11 90 90 4f a1 3c e4 c6 cf 14 cd 61 81 db 2f 54 b4 52 9b 30 e4 94>,
     absValidity: 2018-03-21T21:33:04.065Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 82 de 49 c3 d5 e2 e6 33>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:33:06 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521581586849
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521581643149
connected to auth! from local port 46484
received auth hello!
{ authId: 403, nonce: <Buffer 60 3e 4e 7d e0 46 32 e0> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 84 ef 33 47 08 77 8a a1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300581,
  cipherKeyVal: <Buffer ab c4 7f 26 d5 bd 48 d6 e1 55 a4 d0 f0 f7 ad b7>,
  macKeyVal: <Buffer 4e fa 8f 95 70 7b 22 ad ec aa c3 fd d0 9b 53 b7 b1 58 a6 0b 4c e2 ff 25 e4 91 14 b1 6d a6 9b 56>,
  absValidity: 2018-03-21T21:34:04.090Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300581,
     cipherKeyVal: <Buffer ab c4 7f 26 d5 bd 48 d6 e1 55 a4 d0 f0 f7 ad b7>,
     macKeyVal: <Buffer 4e fa 8f 95 70 7b 22 ad ec aa c3 fd d0 9b 53 b7 b1 58 a6 0b 4c e2 ff 25 e4 91 14 b1 6d a6 9b 56>,
     absValidity: 2018-03-21T21:34:04.090Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 46 a3 82 6d ff 3d 58 1f>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:34:06 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521581646793
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521581703201
connected to auth! from local port 46754
received auth hello!
{ authId: 403, nonce: <Buffer 46 3f f9 9c 1b 5a 45 7b> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 99 e2 fa 1c ba 9c 94 bd>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300587,
  cipherKeyVal: <Buffer 04 90 c0 8a 77 5e 21 66 b7 59 9d 4c e9 c3 cd 8e>,
  macKeyVal: <Buffer a8 a3 43 a5 81 83 2b 1e f6 c5 0a d6 72 5c 14 08 df 05 80 1c ea 02 2a 27 19 69 0f 10 08 51 07 7a>,
  absValidity: 2018-03-21T21:35:04.130Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300587,
     cipherKeyVal: <Buffer 04 90 c0 8a 77 5e 21 66 b7 59 9d 4c e9 c3 cd 8e>,
     macKeyVal: <Buffer a8 a3 43 a5 81 83 2b 1e f6 c5 0a d6 72 5c 14 08 df 05 80 1c ea 02 2a 27 19 69 0f 10 08 51 07 7a>,
     absValidity: 2018-03-21T21:35:04.130Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 86 f4 a7 10 ab bb f4 0f>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:35:06 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521581706770
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521581763257
connected to auth! from local port 47024
received auth hello!
{ authId: 403, nonce: <Buffer ed cc 4f 2f ba 3c 65 17> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 44 75 57 0d ea f6 d9 f6>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300593,
  cipherKeyVal: <Buffer 6d 62 2b 5e 19 f1 e3 3a 21 bb ad e6 ee 61 23 6e>,
  macKeyVal: <Buffer 78 a3 2e 56 d5 86 64 3f 2a 84 97 fe a8 a6 a2 5c b3 0d 33 11 29 9e b2 6f 30 f6 e7 0c 29 00 0a fb>,
  absValidity: 2018-03-21T21:36:04.212Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300593,
     cipherKeyVal: <Buffer 6d 62 2b 5e 19 f1 e3 3a 21 bb ad e6 ee 61 23 6e>,
     macKeyVal: <Buffer 78 a3 2e 56 d5 86 64 3f 2a 84 97 fe a8 a6 a2 5c b3 0d 33 11 29 9e b2 6f 30 f6 e7 0c 29 00 0a fb>,
     absValidity: 2018-03-21T21:36:04.212Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 40 b3 3c 71 be 65 29 b7>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:36:06 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521581766840
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521581823313
connected to auth! from local port 47290
received auth hello!
{ authId: 403, nonce: <Buffer b6 1f 69 77 d9 35 93 8d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 39 1f d2 64 1c 49 0a 55>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40300599,
  cipherKeyVal: <Buffer ee 2d 26 94 4e 5e 0b da 38 f9 66 86 c6 6a ba d1>,
  macKeyVal: <Buffer 9b 60 75 d4 51 da cc 4f 89 db a4 79 bc 35 5d de a0 63 8c 18 a3 5f ed d3 4c 22 72 13 ae 66 ed 74>,
  absValidity: 2018-03-21T21:37:05.000Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40300599,
     cipherKeyVal: <Buffer ee 2d 26 94 4e 5e 0b da 38 f9 66 86 c6 6a ba d1>,
     macKeyVal: <Buffer 9b 60 75 d4 51 da cc 4f 89 db a4 79 bc 35 5d de a0 63 8c 18 a3 5f ed d3 4c 22 72 13 ae 66 ed 74>,
     absValidity: 2018-03-21T21:37:05.000Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 53 1f e0 f8 8a 3e dc da>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.23:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 9 0.7777777777777778 1521581883322
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 10 0.7 1521581943329
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.6:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 11 0.6363636363636364 1521582003333
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.7:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 12 0.5833333333333334 1521582063341
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 13 0.5384615384615384 1521582123348
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
connected to auth! from local port 45700
received auth hello!
{ authId: 502, nonce: <Buffer 79 49 25 2f bd 8a fa 4c> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 14 0.5 1521582183357
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
connected to auth! from local port 45944
received auth hello!
{ authId: 502, nonce: <Buffer 35 d7 1b 91 fc 5f 11 00> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 15 0.4666666666666667 1521582243368
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 3
to: 4
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.4:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 16 0.4375 1521582303376
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 4
to: 5
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.3:21100
connected to auth! from local port 40086
received auth hello!
{ authId: 401, nonce: <Buffer 38 eb 48 6a 04 99 e7 56> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth403',
     commonName: '10.0.0.3' },
  serial: '0162454FC10E',
  notBefore: 2018-03-20T21:26:17.000Z,
  notAfter: 2018-03-21T21:27:57.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '63:62:E7:FB:27:8A:13:B4:5F:A0:F2:C8:B9:EC:32:31:29:17:1E:29',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B95EF3029A4C4FAE066EFDE0A6119C37979EDB5A64C834CFDC68175183A2CCB6F817A6CEE1A9EF3E562CF75048E8894B6036030296F313DEBF7C1069E42825C46A5F1F6D69FFE10EE6D73B7805503AA7E6A4C2FF62C2E4D5BF7079FBED00C4B24480D5BC43B7B3B042025990D06DEE0A0388CF2AE7F4B313EF564F2EB3931C44FD1DBD6DFA6DA12843C6DBAAE1EFBC5E7EEDA9407AE6D78B6211169F194056CA6F9CD9F20F33FE469D35BCC944D43D2ECB947F73AF95BB5530BFF2A9B92CA16EB949D06EB8218BBBEC8EA009AC9F6C53C626A2796484448AEDAAB3D19834BA2A19D35D0E105AD47B9A6B3E1589517039E098E992676ED418010E608FA312B251',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJFT8EOMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDMxETAPBgNVBAMMCDEwLjAuMC4zMB4XDTE4MDMy\nMDIxMjYxN1oXDTE4MDMyMTIxMjc1N1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC5XvMCmkxPrgZu/eCmEZw3l57bWmTINM/caBdRg6LMtvgXps7h\nqe8+Viz3UEjoiUtgNgMClvMT3r98EGnkKCXEal8fbWn/4Q7m1zt4BVA6p+akwv9i\nwuTVv3B5++0AxLJEgNW8Q7ezsEICWZDQbe4KA4jPKuf0sxPvVk8us5McRP0dvW36\nbaEoQ8bbquHvvF5+7alAeubXi2IRFp8ZQFbKb5zZ8g8z/kadNbzJRNQ9LsuUf3Ov\nlbtVML/yqbksoW65SdBuuCGLu+yOoAmsn2xTxiaieWSERIrtqrPRmDS6KhnTXQ4Q\nWtR7mms+FYlRcDngmOmSZ27UGAEOYI+jErJRAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAM8TbGmgprluEbVz1byr5+suTMtcGtpk\nJPRyqzmH6GV4HseWQi1AGf7JyUlQpc4qIkoUAjV7UyepmZL3V7tV/orNd8Edcq5J\npXSxM2zUvBHxZzBVu5bqnt8fDezXvO58MPjo8f9TpgmmiIPeiNjfmuerpq8lB1Vy\nnzmG54zVkrMDq1nNZ/oM72wZh6IsBuuUs+ffwYfuYxTcuAKOVlHi6YGctL1hQAC9\nqBPeT8ys9ZHEnuu22gi0sZSrRups8ZdRvLdOMTy6/nP+x24juaGe1rYkKWkOrn3Y\nfdt7vOiTzgfoc6Mlryo0enL8Cm8tzUQB03YoYvs4UyaLhnzzLqFxVF0=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 5
to: 6
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 17 0.4117647058823529 1521582363387
connected to auth! from local port 40298
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 18 0.3888888888888889 1521582423398
connected to auth! from local port 40528
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 19 0.3684210526315789 1521582483407
connected to auth! from local port 40724
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 20 0.35 1521582543418
connected to auth! from local port 40904
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 21 0.3333333333333333 1521582603428
connected to auth! from local port 41082
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 22 0.3181818181818182 1521582663438
connected to auth! from local port 41268
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 23 0.30434782608695654 1521582723441
connected to auth! from local port 41432
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 24 0.2916666666666667 1521582783452
connected to auth! from local port 41600
received auth hello!
{ authId: 401, nonce: <Buffer 69 17 05 83 ce 9f f1 dd> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 93 8e b8 a0 da 62 39 6f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 2a 16 58 f9 1b 4b 7c 77 4c 46 33 15 04 88 0c ca>,
  macKeyVal: <Buffer a0 dc 3f 9c 08 65 c2 de 8f d6 69 d2 86 38 e9 82 e2 cf 08 7f 1d 4c dc 31 e0 4f 63 68 04 01 78 2e>,
  absValidity: 2018-03-20T22:53:03.622Z }
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40101236,
  cipherKeyVal: <Buffer 4a 29 52 a6 fb e1 b7 77 df 68 c2 d0 e3 6c 0a 06>,
  macKeyVal: <Buffer 9c 1a a3 cc 3b b8 05 da 76 e2 e6 f4 9a 6a 64 56 0a 6f 79 ee 61 b5 ad 99 b5 c8 4b 32 ca 19 4a 0a>,
  absValidity: 2018-03-21T21:53:03.622Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40101236,
     cipherKeyVal: <Buffer 4a 29 52 a6 fb e1 b7 77 df 68 c2 d0 e3 6c 0a 06>,
     macKeyVal: <Buffer 9c 1a a3 cc 3b b8 05 da 76 e2 e6 f4 9a 6a 64 56 0a 6f 79 ee 61 b5 ad 99 b5 c8 4b 32 ca 19 4a 0a>,
     absValidity: 2018-03-21T21:53:03.622Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 5d 75 6b 0f 3b 30 8b 8e>
switching to HANDSHAKE_1_SENT
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.23:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 25 0.28 1521582843462
connected to auth! from local port 41776
received auth hello!
{ authId: 401, nonce: <Buffer 80 e2 45 89 1e fc 4a 3f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 4a e0 dc 8b e8 44 86 ad>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40101249,
  cipherKeyVal: <Buffer 51 dd 64 ae ff 38 e8 c5 9b fa bc 4c 66 32 b9 6b>,
  macKeyVal: <Buffer 0a 9e ae 51 a7 47 6c 53 8b 80 85 5d 8c 7f 0e 05 72 ff ba 94 bc 42 b1 20 93 e4 84 35 78 5b 95 7d>,
  absValidity: 2018-03-21T21:54:03.639Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40101249,
     cipherKeyVal: <Buffer 51 dd 64 ae ff 38 e8 c5 9b fa bc 4c 66 32 b9 6b>,
     macKeyVal: <Buffer 0a 9e ae 51 a7 47 6c 53 8b 80 85 5d 8c 7f 0e 05 72 ff ba 94 bc 42 b1 20 93 e4 84 35 78 5b 95 7d>,
     absValidity: 2018-03-21T21:54:03.639Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 49 13 e5 f0 c2 ac 1c aa>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.23:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 26 0.2692307692307692 1521582903472
connected to auth! from local port 41948
received auth hello!
{ authId: 401, nonce: <Buffer 58 8b b5 f3 97 b0 c3 23> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 92 b5 d4 7a d4 90 e7 f4>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40101262,
  cipherKeyVal: <Buffer 3c 16 e1 fc 00 30 62 d3 d3 d3 6e f4 fe 19 d9 2a>,
  macKeyVal: <Buffer 08 5a 10 50 90 b6 08 50 62 6b f1 45 8b 71 e1 32 f0 b5 95 b0 b1 a3 7b d0 1b 48 91 55 1b 31 ed f2>,
  absValidity: 2018-03-21T21:55:03.596Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40101262,
     cipherKeyVal: <Buffer 3c 16 e1 fc 00 30 62 d3 d3 d3 6e f4 fe 19 d9 2a>,
     macKeyVal: <Buffer 08 5a 10 50 90 b6 08 50 62 6b f1 45 8b 71 e1 32 f0 b5 95 b0 b1 a3 7b d0 1b 48 91 55 1b 31 ed f2>,
     absValidity: 2018-03-21T21:55:03.596Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 05 7c 74 4c 8d 18 7c 05>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.23:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 27 0.25925925925925924 1521582963482
connected to auth! from local port 42122
received auth hello!
{ authId: 401, nonce: <Buffer 9d 39 ff 7a 99 fb 9a 74> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c7 bb c8 83 67 7f c8 5b>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40101274,
  cipherKeyVal: <Buffer 36 26 23 cf 11 98 cc 2d c1 a2 f1 ea ef 90 f5 c3>,
  macKeyVal: <Buffer b8 08 40 c7 4b 74 be 62 a0 21 f7 00 12 dc 1c 4b 8d 12 ea ec e9 35 5d 38 07 ce d3 75 f1 1c 13 49>,
  absValidity: 2018-03-21T21:56:03.626Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40101274,
     cipherKeyVal: <Buffer 36 26 23 cf 11 98 cc 2d c1 a2 f1 ea ef 90 f5 c3>,
     macKeyVal: <Buffer b8 08 40 c7 4b 74 be 62 a0 21 f7 00 12 dc 1c 4b 8d 12 ea ec e9 35 5d 38 07 ce d3 75 f1 1c 13 49>,
     absValidity: 2018-03-21T21:56:03.626Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 30 3c 7d be d2 e6 9a b9>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.23:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 28 0.25 1521583023492
connected to auth! from local port 42302
received auth hello!
{ authId: 401, nonce: <Buffer aa 76 dd 60 1d ac bc 55> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 51 93 bb 0e ec 24 fd b5>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40101287,
  cipherKeyVal: <Buffer 29 0d 52 c0 52 f1 0b 9e 3c 17 31 bb ba ec 88 34>,
  macKeyVal: <Buffer db 36 8a 2d 47 c9 e4 ca 36 14 94 6b dd 6e 2d 4f 1e 23 6c 60 83 be 98 37 ff 52 3a 23 7e 98 92 d3>,
  absValidity: 2018-03-21T21:57:03.599Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.23',
  serverPort: 22100,
  sessionKey: 
   { id: 40101287,
     cipherKeyVal: <Buffer 29 0d 52 c0 52 f1 0b 9e 3c 17 31 bb ba ec 88 34>,
     macKeyVal: <Buffer db 36 8a 2d 47 c9 e4 ca 36 14 94 6b dd 6e 2d 4f 1e 23 6c 60 83 be 98 37 ff 52 3a 23 7e 98 92 d3>,
     absValidity: 2018-03-21T21:57:03.599Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer e8 21 bb af 4e d8 a0 9a>
switching to HANDSHAKE_1_SENT
disconnected from auth
