changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c411.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c411',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 67 49 42 41 41 4b 43 41 51 45 41 77 62 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521581376947
connected to auth! from local port 47104
received auth hello!
{ authId: 402, nonce: <Buffer 39 89 a4 e2 f4 59 19 33> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer e0 3d 1e 0f 75 09 e0 d9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer e1 ad 9b 40 f4 4e 33 21 da 79 3a e8 99 e8 ef 82>,
  macKeyVal: <Buffer 8e 66 14 fb 47 46 40 c3 cc 0c 02 13 0c 57 7f 47 d4 e1 7a d8 90 8b 2a 5a 15 d4 64 27 7e d6 39 fa>,
  absValidity: 2018-03-20T22:29:37.256Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200365,
  cipherKeyVal: <Buffer bf 06 60 ba 45 4c fc 33 f9 08 e8 42 c9 f1 3c 95>,
  macKeyVal: <Buffer bb db 97 ee 71 c7 e4 22 ed bd 28 39 3f 91 9b d1 a5 85 e7 cb bf 84 89 ce 2f c1 36 2e 31 63 e1 ad>,
  absValidity: 2018-03-21T21:29:37.255Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200365,
     cipherKeyVal: <Buffer bf 06 60 ba 45 4c fc 33 f9 08 e8 42 c9 f1 3c 95>,
     macKeyVal: <Buffer bb db 97 ee 71 c7 e4 22 ed bd 28 39 3f 91 9b d1 a5 85 e7 cb bf 84 89 ce 2f c1 36 2e 31 63 e1 ad>,
     absValidity: 2018-03-21T21:29:37.255Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 25 36 4a 46 ba ff 98 e3>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:29:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521581379672
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521581437002
connected to auth! from local port 47278
received auth hello!
{ authId: 402, nonce: <Buffer 40 2c 38 10 59 dc aa 14> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer be e8 95 74 1e a8 dc 16>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200372,
  cipherKeyVal: <Buffer 73 f0 e1 16 68 97 99 d5 5d b8 62 38 cf 9a 43 e1>,
  macKeyVal: <Buffer c5 88 4f 1b 47 0a b0 a3 6b e2 7d af 46 6f 81 c1 d1 70 f1 09 c2 f7 07 e3 b9 23 9d 79 61 14 0e 1f>,
  absValidity: 2018-03-21T21:30:37.315Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200372,
     cipherKeyVal: <Buffer 73 f0 e1 16 68 97 99 d5 5d b8 62 38 cf 9a 43 e1>,
     macKeyVal: <Buffer c5 88 4f 1b 47 0a b0 a3 6b e2 7d af 46 6f 81 c1 d1 70 f1 09 c2 f7 07 e3 b9 23 9d 79 61 14 0e 1f>,
     absValidity: 2018-03-21T21:30:37.315Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 4a 78 b3 1d 12 a7 b0 8b>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:30:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521581440125
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521581497058
connected to auth! from local port 47548
received auth hello!
{ authId: 402, nonce: <Buffer c6 d9 31 48 af c8 4c 00> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 3d d6 11 16 c3 67 0b 5e>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200379,
  cipherKeyVal: <Buffer e1 dc be 93 8a d3 07 8c 14 1f cf 89 68 8b e3 7e>,
  macKeyVal: <Buffer 78 0f 8e 9c 23 72 ef 6d 1d 2e 9a d0 23 27 af 2c 32 90 b2 56 7b 3e ed 7c 69 7d 01 f7 25 49 35 c1>,
  absValidity: 2018-03-21T21:31:37.346Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200379,
     cipherKeyVal: <Buffer e1 dc be 93 8a d3 07 8c 14 1f cf 89 68 8b e3 7e>,
     macKeyVal: <Buffer 78 0f 8e 9c 23 72 ef 6d 1d 2e 9a d0 23 27 af 2c 32 90 b2 56 7b 3e ed 7c 69 7d 01 f7 25 49 35 c1>,
     absValidity: 2018-03-21T21:31:37.346Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer a3 5d 2f 9b a5 d8 3c fe>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:31:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521581499827
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521581557085
connected to auth! from local port 47818
received auth hello!
{ authId: 402, nonce: <Buffer b3 0a 02 be 3e 44 00 76> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 1e 62 9f 47 ec e5 e7 f1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200386,
  cipherKeyVal: <Buffer ac 61 76 a1 a9 be cf 38 9f ac fd cb 03 d7 67 52>,
  macKeyVal: <Buffer 8b 7e bf 06 6f 63 c3 fc df a2 23 33 84 ab d2 a2 19 f1 73 42 61 fd 94 d0 f3 6d 17 94 33 34 2c 1a>,
  absValidity: 2018-03-21T21:32:37.384Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200386,
     cipherKeyVal: <Buffer ac 61 76 a1 a9 be cf 38 9f ac fd cb 03 d7 67 52>,
     macKeyVal: <Buffer 8b 7e bf 06 6f 63 c3 fc df a2 23 33 84 ab d2 a2 19 f1 73 42 61 fd 94 d0 f3 6d 17 94 33 34 2c 1a>,
     absValidity: 2018-03-21T21:32:37.384Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer f8 a3 d5 be 0c 7e fa 32>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:32:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521581560001
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521581617141
connected to auth! from local port 48088
received auth hello!
{ authId: 402, nonce: <Buffer d3 73 c5 84 ee 48 03 01> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 1f d4 77 05 d3 88 6c cc>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200393,
  cipherKeyVal: <Buffer 68 34 4c e6 ca 22 c6 e0 c4 c0 c5 55 28 16 ee 08>,
  macKeyVal: <Buffer 2b 18 16 6a c3 73 24 36 36 72 6b bc b4 fa 7b bf 78 1e a9 f7 83 37 68 85 7e 6a 82 df 5a cd c3 9d>,
  absValidity: 2018-03-21T21:33:37.416Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200393,
     cipherKeyVal: <Buffer 68 34 4c e6 ca 22 c6 e0 c4 c0 c5 55 28 16 ee 08>,
     macKeyVal: <Buffer 2b 18 16 6a c3 73 24 36 36 72 6b bc b4 fa 7b bf 78 1e a9 f7 83 37 68 85 7e 6a 82 df 5a cd c3 9d>,
     absValidity: 2018-03-21T21:33:37.416Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 70 10 86 77 66 32 b2 50>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:33:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521581620060
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521581677197
connected to auth! from local port 48358
received auth hello!
{ authId: 402, nonce: <Buffer 27 f7 24 51 d9 d8 c1 bd> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ba d3 56 61 80 fb e6 19>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200400,
  cipherKeyVal: <Buffer 5f 9c 7d c1 9e 72 87 75 3d 37 56 77 f6 1d b9 07>,
  macKeyVal: <Buffer de df d6 6c 6e 52 13 e8 f7 56 ad 69 08 1f 33 a5 38 ed 5c 5e 2a 52 44 19 6c f2 e4 5f fb dd a4 d5>,
  absValidity: 2018-03-21T21:34:37.524Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200400,
     cipherKeyVal: <Buffer 5f 9c 7d c1 9e 72 87 75 3d 37 56 77 f6 1d b9 07>,
     macKeyVal: <Buffer de df d6 6c 6e 52 13 e8 f7 56 ad 69 08 1f 33 a5 38 ed 5c 5e 2a 52 44 19 6c f2 e4 5f fb dd a4 d5>,
     absValidity: 2018-03-21T21:34:37.524Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 3c a9 79 ce 3c 68 fe a3>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:34:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521581680067
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521581737253
connected to auth! from local port 48628
received auth hello!
{ authId: 402, nonce: <Buffer 37 64 16 4a 59 e1 6c 94> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 24 aa bb ec 50 78 ba 90>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200407,
  cipherKeyVal: <Buffer 07 b4 cb fd 44 f8 fe 98 e9 28 e6 d5 c1 4d 36 fd>,
  macKeyVal: <Buffer 5f 2d 4a 57 0c 09 e6 40 48 6f 38 f5 2f 11 1f 80 ff f9 b4 7d d0 4b b8 d6 d6 20 08 ef 14 0f dc d5>,
  absValidity: 2018-03-21T21:35:37.538Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200407,
     cipherKeyVal: <Buffer 07 b4 cb fd 44 f8 fe 98 e9 28 e6 d5 c1 4d 36 fd>,
     macKeyVal: <Buffer 5f 2d 4a 57 0c 09 e6 40 48 6f 38 f5 2f 11 1f 80 ff f9 b4 7d d0 4b b8 d6 d6 20 08 ef 14 0f dc d5>,
     absValidity: 2018-03-21T21:35:37.538Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 62 33 3f c7 f6 96 93 49>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:35:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521581740061
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521581797311
connected to auth! from local port 48898
received auth hello!
{ authId: 402, nonce: <Buffer e9 ae 73 5c 8b 26 48 eb> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e6 48 d6 6a 83 e6 27 15>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200414,
  cipherKeyVal: <Buffer bd 72 a1 70 6b 33 81 0d f6 a9 7d 35 2d 3b 11 13>,
  macKeyVal: <Buffer 95 73 73 37 11 11 ce df e2 92 e5 f8 6d ea 46 d3 ac f6 53 d4 4d 3e ba f2 31 0a a9 85 5c 38 81 f1>,
  absValidity: 2018-03-21T21:36:37.561Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200414,
     cipherKeyVal: <Buffer bd 72 a1 70 6b 33 81 0d f6 a9 7d 35 2d 3b 11 13>,
     macKeyVal: <Buffer 95 73 73 37 11 11 ce df e2 92 e5 f8 6d ea 46 d3 ac f6 53 d4 4d 3e ba f2 31 0a a9 85 5c 38 81 f1>,
     absValidity: 2018-03-21T21:36:37.561Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer eb 48 1c ea ab f7 dd 91>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 21:36:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1521581800179
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1521581857361
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1521581917372
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 39014
received auth hello!
{ authId: 502, nonce: <Buffer 3d 26 1f 10 98 86 59 01> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1521581977381
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 39222
received auth hello!
{ authId: 502, nonce: <Buffer 98 81 a1 6a 5d dc 4e 85> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1521582037389
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.4:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 13 0.6153846153846154 1521582097393
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 50886
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 14 0.5714285714285714 1521582157401
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 51130
received auth hello!
{ authId: 401, nonce: <Buffer 3b df 87 c2 58 b2 aa c9> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '0162454FBF39',
  notBefore: 2018-03-20T21:26:16.000Z,
  notAfter: 2018-03-21T21:27:56.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'FE:FD:D7:99:1F:78:2C:CB:28:B1:FD:1F:99:CD:6B:33:1C:77:78:FC',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B95EF3029A4C4FAE066EFDE0A6119C37979EDB5A64C834CFDC68175183A2CCB6F817A6CEE1A9EF3E562CF75048E8894B6036030296F313DEBF7C1069E42825C46A5F1F6D69FFE10EE6D73B7805503AA7E6A4C2FF62C2E4D5BF7079FBED00C4B24480D5BC43B7B3B042025990D06DEE0A0388CF2AE7F4B313EF564F2EB3931C44FD1DBD6DFA6DA12843C6DBAAE1EFBC5E7EEDA9407AE6D78B6211169F194056CA6F9CD9F20F33FE469D35BCC944D43D2ECB947F73AF95BB5530BFF2A9B92CA16EB949D06EB8218BBBEC8EA009AC9F6C53C626A2796484448AEDAAB3D19834BA2A19D35D0E105AD47B9A6B3E1589517039E098E992676ED418010E608FA312B251',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJFT785MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMDIxMjYxNloXDTE4MDMyMTIxMjc1NlowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC5XvMCmkxPrgZu/eCmEZw3l57bWmTINM/caBdRg6LMtvgXps7h\nqe8+Viz3UEjoiUtgNgMClvMT3r98EGnkKCXEal8fbWn/4Q7m1zt4BVA6p+akwv9i\nwuTVv3B5++0AxLJEgNW8Q7ezsEICWZDQbe4KA4jPKuf0sxPvVk8us5McRP0dvW36\nbaEoQ8bbquHvvF5+7alAeubXi2IRFp8ZQFbKb5zZ8g8z/kadNbzJRNQ9LsuUf3Ov\nlbtVML/yqbksoW65SdBuuCGLu+yOoAmsn2xTxiaieWSERIrtqrPRmDS6KhnTXQ4Q\nWtR7mms+FYlRcDngmOmSZ27UGAEOYI+jErJRAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAJGql4M6RsX615fMFAmNdHqgwqFqAden\nHVLK+G1opS7GTHHf4Y5q/f5fvpg/131/QZefGEMnENp2yGodOGxSF9sdKHkIcCkU\nc3jGyCwPbEvuLqT4BPWB7TQ9DwuCrtiEHW2EEhTI36daNUbi8KA6sTXSk6I7zvxZ\nb7OSDx4119opuCk9vjOZhx1fw8LFV7bo3klbm9wwttES+2pJR8J4OsFl2NtamBMh\nAfQuqjxwqlLLphQXIUMUaPhLt8HFzy+ytir3huOe0s6CegI6+TFgdMrUJ2wVKpXH\nq3WMvDb1tl18ZL8QbkELhxZHfhCUXC09t0dHmOjAMAxrXfctKiZiHOE=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 2
to: 3
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 15 0.5333333333333333 1521582217409
connected to auth! from local port 51362
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 16 0.5 1521582277420
connected to auth! from local port 51606
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 17 0.47058823529411764 1521582337430
connected to auth! from local port 51840
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 18 0.4444444444444444 1521582397437
connected to auth! from local port 52050
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
