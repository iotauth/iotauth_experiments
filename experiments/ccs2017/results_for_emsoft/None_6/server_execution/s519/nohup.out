changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s519.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's519',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 67 49 42 41 41 4b 43 41 51 45 41 70 4b ... > }
Handler: listening on port 22100
s519:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400419
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40294
received auth hello!
{ authId: 504, nonce: <Buffer 8f 14 6c 37 10 4a 63 f7> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer c0 93 61 6d e4 41 ba 23>
auth nonce verified
updating distribution key: { cipherKeyVal: <Buffer f4 23 ee 99 a6 cb 34 78 86 8d 52 8e b0 2e 16 ce>,
  macKeyVal: <Buffer 2f ff 15 03 a8 52 21 3e e1 51 30 47 d8 27 68 2a 8e 05 36 c5 f2 a5 8f 28 bb 7c 57 ed 5e aa e0 a9>,
  absValidity: 2018-03-22T01:56:33.141Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer e7 d7 6c 3a 13 29 0c 97>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer e7 d7 6c 3a 13 29 0c 97> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.86:48820',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400420
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40320
received auth hello!
{ authId: 504, nonce: <Buffer be 21 f8 96 bb 71 d7 c9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 7b 17 9a 56 27 b1 fe 6b>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f2 78 21 4a 62 be 39 55>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer f2 78 21 4a 62 be 39 55> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.87:50110',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400425
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40570
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400426
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40580
received auth hello!
{ authId: 504, nonce: <Buffer 4b c9 c9 80 6f 30 f8 60> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 55 04 33 84 44 9a fc c0>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d6 bd f6 74 44 c4 ba eb>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d6 bd f6 74 44 c4 ba eb> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.86:49094',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 7d 52 d3 79 6c 9c 46 7b> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer fd 65 b1 6e 95 93 e3 17>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 83 6c 3f 1f 34 14 ce d6>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 83 6c 3f 1f 34 14 ce d6> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.87:50372',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400431
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40834
received auth hello!
{ authId: 504, nonce: <Buffer 83 72 e3 8b 8c a2 cb 16> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer cf d6 77 a7 a0 82 03 34>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer a8 4a c0 a1 7b 82 55 19>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer a8 4a c0 a1 7b 82 55 19> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.86:49358',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400432
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40860
received auth hello!
{ authId: 504, nonce: <Buffer a3 00 43 26 f0 da 43 a6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 76 85 8b cb 14 a9 5a 82>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d4 89 6e 3d 05 79 c1 3e>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d4 89 6e 3d 05 79 c1 3e> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.87:50650',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400437
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41110
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400438
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41120
received auth hello!
{ authId: 504, nonce: <Buffer 65 ac 81 b2 68 7f dd 15> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer dc 8e 99 ab 6a 26 f9 47>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 9a f1 e5 14 bb d2 05 d2>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 9a f1 e5 14 bb d2 05 d2> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.86:49634',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
received auth hello!
{ authId: 504, nonce: <Buffer 9f 1a c8 2d e0 92 42 74> }
Handler: Error in server - details: handshake2 timed out...
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 1b fb 81 bd 23 60 31 cc>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 65 8d a0 23 76 d5 4c 41>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 65 8d a0 23 76 d5 4c 41> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.87:50912',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400443
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41374
received auth hello!
{ authId: 504, nonce: <Buffer a5 b6 5c 69 24 39 0c fb> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 71 7f 6e d1 dc 7c 76 10>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4f 4e 5d c8 5c 88 c8 01>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 4f 4e 5d c8 5c 88 c8 01> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.86:49900',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400444
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41400
received auth hello!
{ authId: 504, nonce: <Buffer aa 59 3a fb bd c0 db 3f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 0f 6a 19 85 09 af b2 51>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 39 40 19 95 95 da 45 4b>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 39 40 19 95 95 da 45 4b> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.87:51190',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400449
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41644
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400450
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 41662
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer f2 d0 3f db 0c 9a 20 ec> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 3c 00 e6 4b 0f 44 7c 01>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 15 49 fc cf 7c 19 91 e4>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 15 49 fc cf 7c 19 91 e4> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 10,
  remoteAddress: '::ffff:10.0.1.86:50170',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 10 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 10 }
specified socketID: 10
Handler: Error in server - details: Disconnected from auth before getting session key response
Handler: Error in server - details: handshake2 timed out...
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #10 closed
