changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s408.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's408',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 70 6f ... > }
Handler: listening on port 22100
s408:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200309
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56526
received auth hello!
{ authId: 402, nonce: <Buffer 2b 8e a4 7b b6 30 4c ee> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer d0 62 d6 b6 ce 2d aa c8>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer f6 fd f5 3f c9 16 9f d9 0c d3 f0 87 83 27 a6 e9>,
  macKeyVal: <Buffer c5 f4 5f aa 75 06 04 a1 e9 ab 74 a0 45 4a 55 a8 b9 d9 d5 51 f9 e5 7a f3 ed 9d a8 e8 bd f8 95 61>,
  absValidity: 2018-03-21T07:36:34.521Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 95 64 e0 43 d5 c8 81 19>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 95 64 e0 43 d5 c8 81 19> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.52:50550',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200311
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56538
received auth hello!
{ authId: 402, nonce: <Buffer 95 cc 36 c1 f3 3d ca 11> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 41 bf 12 b8 54 ac 01 01>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 39 07 03 74 37 7a 4b 91>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 39 07 03 74 37 7a 4b 91> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.54:54306',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200316
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56694
received auth hello!
{ authId: 402, nonce: <Buffer 58 d6 4c 8e 6e ba 00 b5> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 24 db 7a 59 8b ba ac a1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 52 2f e4 15 71 97 4e b2>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 52 2f e4 15 71 97 4e b2> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.52:50718',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200318
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56718
received auth hello!
{ authId: 402, nonce: <Buffer 34 3b ff 22 df a1 47 fa> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 4a 4c ac 84 cd 29 ce aa>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer e9 6d 82 3b 3b fc 7c 6f>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer e9 6d 82 3b 3b fc 7c 6f> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.54:54486',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200323
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56966
received auth hello!
{ authId: 402, nonce: <Buffer 88 15 16 58 49 8f cd d5> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 9d ef 70 5f 9f 0d dd 48>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer cd 38 2d 9a 5d 6f a5 83>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer cd 38 2d 9a 5d 6f a5 83> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.52:50988',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200325
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 56990
received auth hello!
{ authId: 402, nonce: <Buffer d6 d3 10 b2 5d d0 50 87> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 8f 35 9b b5 73 62 18 10>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 61 f3 99 fd 72 b9 a5 e1>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 61 f3 99 fd 72 b9 a5 e1> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.54:54758',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200330
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57236
received auth hello!
{ authId: 402, nonce: <Buffer 0b 24 ba cd 26 c6 d7 16> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 52 80 8a f9 fe 3f 7e 6c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer ea b1 7d 71 6c 48 94 71>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer ea b1 7d 71 6c 48 94 71> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.52:51260',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200332
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57260
received auth hello!
{ authId: 402, nonce: <Buffer c2 f5 74 c7 6d 19 e6 d6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 0a ee 11 b3 d6 10 93 4f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d6 21 09 51 6e a8 59 6b>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d6 21 09 51 6e a8 59 6b> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.54:55028',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200337
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57506
received auth hello!
{ authId: 402, nonce: <Buffer b0 1e ec 73 ac 67 5f 13> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 5e a2 cd 9d 7c fa 6e ef>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 6c 88 92 82 c5 7c a3 df>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 6c 88 92 82 c5 7c a3 df> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.52:51530',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200339
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57530
received auth hello!
{ authId: 402, nonce: <Buffer c2 e1 5d c0 b3 86 46 ac> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 2e 31 f4 2b a1 64 90 28>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer bc fb a6 41 a8 91 2c 4a>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer bc fb a6 41 a8 91 2c 4a> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.54:55298',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200344
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57776
received auth hello!
{ authId: 402, nonce: <Buffer 48 c2 b9 d0 46 49 0f e9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ff a2 c3 25 3b 76 73 12>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d6 7a fa 5c 5f 77 2f ba>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d6 7a fa 5c 5f 77 2f ba> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 10,
  remoteAddress: '::ffff:10.0.1.52:51800',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 10 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 10 }
specified socketID: 10
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200346
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57800
received auth hello!
{ authId: 402, nonce: <Buffer d7 b3 61 fd 84 0a 85 2e> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 3d 5f d3 16 b3 20 9b d0>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer b5 28 ac 4c c3 e4 fe c6>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer b5 28 ac 4c c3 e4 fe c6> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 11,
  remoteAddress: '::ffff:10.0.1.54:55568',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 11 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 11 }
specified socketID: 11
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #10 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200351
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58046
received auth hello!
{ authId: 402, nonce: <Buffer f9 c1 af be 01 e5 57 09> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 8e 55 1e 39 2d 74 a0 5e>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer dd ac 04 f3 07 01 3e 71>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer dd ac 04 f3 07 01 3e 71> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 12,
  remoteAddress: '::ffff:10.0.1.52:52070',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 12 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 12 }
specified socketID: 12
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #11 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200353
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58070
received auth hello!
{ authId: 402, nonce: <Buffer 34 46 6b cb 03 dd f1 72> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 6f b3 c9 04 03 ba 3e 94>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4c f0 b0 8d 22 97 1f a5>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 4c f0 b0 8d 22 97 1f a5> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 13,
  remoteAddress: '::ffff:10.0.1.54:55838',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 13 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 13 }
specified socketID: 13
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #12 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200358
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58312
received auth hello!
{ authId: 402, nonce: <Buffer 31 ab 98 ee 5c 80 e4 77> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 1f d8 08 7b dd 4d 12 05>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 3b ca d0 99 f1 5f 77 ee>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 3b ca d0 99 f1 5f 77 ee> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 14,
  remoteAddress: '::ffff:10.0.1.52:52336',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 14 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 14 }
specified socketID: 14
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #13 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200360
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58336
received auth hello!
{ authId: 402, nonce: <Buffer 04 0b c2 98 9b d0 33 c1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 64 1a db 9c 96 0c 2f 16>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f9 ea 58 7c 45 8c 26 76>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer f9 ea 58 7c 45 8c 26 76> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 15,
  remoteAddress: '::ffff:10.0.1.54:56104',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 15 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 15 }
specified socketID: 15
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #14 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300650
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 1
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #15 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300652
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 44866
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300660
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 45082
received auth hello!
{ authId: 401, nonce: <Buffer e5 6b ec e1 e7 3b 90 73> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '0162474488A5',
  notBefore: 2018-03-21T06:33:16.000Z,
  notAfter: 2018-03-22T06:34:56.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '69:91:FD:36:30:4B:55:8B:AA:76:84:22:4C:96:7A:B9:1D:95:F8:E4',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: '9BB9EF8F89BB5C622F6CF785404B30A45462BD4D78011970FC62F2FAFB6D80276C53B5FB2E698EC201DD27A7A1CE0D247BC5431F625F38A5E0EC17ACC836AB4394C69AF2539AE2907B2471D4F97899CE484460EC05416C07211F1865D3167D31D865F2C4BF55710A3AADE1EF2E45C843BDB35618E74A037593E8F948EB8FB1B6DA791EF780B1F15DCADA78F4FFBAFE929ACF57158EFA972D5D09F9B961EC4748E714C453F30DF0A57849457AC162C1D9B086E3306FF4B77C842C049C289A8D0EFF527B1052D9D020049610C8DE17E560FB2604E8353A051C884B4197C60B51F575A31F1AD8C9528908B6E18576C3B677AF0507E15EC39815EE2157CC4CE9CABD',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
disconnected from auth
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJHRIilMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMTA2MzMxNloXDTE4MDMyMjA2MzQ1NlowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCbue+PibtcYi9s94VASzCkVGK9TXgBGXD8YvL6+22AJ2xTtfsu\naY7CAd0np6HODSR7xUMfYl84peDsF6zINqtDlMaa8lOa4pB7JHHU+XiZzkhEYOwF\nQWwHIR8YZdMWfTHYZfLEv1VxCjqt4e8uRchDvbNWGOdKA3WT6PlI64+xttp5HveA\nsfFdytp49P+6/pKaz1cVjvqXLV0J+blh7EdI5xTEU/MN8KV4SUV6wWLB2bCG4zBv\n9Ld8hCwEnCiajQ7/UnsQUtnQIASWEMjeF+Vg+yYE6DU6BRyIS0GXxgtR9XWjHxrY\nyVKJCLbhhXbDtnevBQfhXsOYFe4hV8xM6cq9AgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAILRF62qZ9R0krm3iwrQ7R/YicmZVOXh\n00fuqIRnmneu4tQshVbbn7SoukYuZI+0ZfSz8qApMMgUlZ2h/gVQQm7BHOImbqCO\nDQkwDJaD1OVW0ZxKhxQX9IHDZyIw39F/JCVK6yWnIREFMQ0zi35vsRAegj2kqfSE\n/B8Ke4OUQOcaOoSuG+lM/zZPc+p+NbWHIeduTcv+b/Q3XiUSrr9nDwiStUMJBtY2\nFjG/b+QoGmTIMxi27egIYPyDlnuS/LKF329yGnnrjTPsPYn2NnZ1VnapmUZfGB7Q\nlLaqTPljDuN3leo76KmTV+sofM5OmJrdEZKBHPM2x/QMp/Y4ZLG16KE=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 0
to: 1
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300662
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45100
received auth hello!
{ authId: 401, nonce: <Buffer 04 d5 90 a8 57 8e 80 9e> }
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
