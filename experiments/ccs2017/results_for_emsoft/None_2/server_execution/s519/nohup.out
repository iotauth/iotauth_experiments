changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s519.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's519',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 67 49 42 41 41 4b 43 41 51 45 41 70 4b ... > }
Handler: listening on port 22100
s519:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400270
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45582
received auth hello!
{ authId: 504, nonce: <Buffer 01 ca 6e e7 48 8c 34 0d> }
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400271
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 75 1e e2 97 6e 9f 5b ad>
auth nonce verified
updating distribution key: { cipherKeyVal: <Buffer 16 97 1a 04 a7 3c 9b 4d 32 b2 24 ad 05 bb 29 b3>,
  macKeyVal: <Buffer cc 25 64 ff 22 a0 80 f6 04 03 85 a6 ac e0 15 7d 69 84 99 f6 22 d5 f0 1b 9a 91 da fd 43 76 a1 72>,
  absValidity: 2018-03-21T17:58:36.025Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 07 43 b9 35 e4 4c f5 05>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 07 43 b9 35 e4 4c f5 05> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.86:54108',
  status: 'open' }
connected to auth! from local port 45604
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 01 f7 a1 05 ed 34 26 78> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 5f ef 7b 09 c8 3e dc 3c>
auth nonce verified
updating distribution key: { cipherKeyVal: <Buffer 01 66 c6 a1 09 fd f9 9c 96 2c ff 23 29 b4 8f 15>,
  macKeyVal: <Buffer 60 7a 57 89 3e 7a f0 68 a6 bb 31 7f 64 79 c3 2f f2 a3 57 36 3e 64 94 a7 8e 2b 88 d5 9c 0a 29 8a>,
  absValidity: 2018-03-21T17:58:38.054Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 65 20 0c 3c 25 b3 b5 fd>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 65 20 0c 3c 25 b3 b5 fd> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.87:55394',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400276
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45858
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400277
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45868
received auth hello!
{ authId: 504, nonce: <Buffer 46 d3 e5 40 16 41 a4 f8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 0b 27 60 5e 24 ef 53 77>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 1e 64 cc 14 31 82 ec a1>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 1e 64 cc 14 31 82 ec a1> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.86:54384',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 56 72 8d 2f a8 3f 58 b3> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 01 cf 8a 84 5f 3d 00 a7>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 47 c4 18 64 45 83 d5 03>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 47 c4 18 64 45 83 d5 03> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.87:55660',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400282
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46122
received auth hello!
{ authId: 504, nonce: <Buffer 8e f7 fe 1d 36 de c8 76> }
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400283
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a5 50 07 00 e0 63 ec 26>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer e4 f9 08 08 6c 43 1b 35>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer e4 f9 08 08 6c 43 1b 35> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.86:54648',
  status: 'open' }
connected to auth! from local port 46144
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer fa 4d cb 95 a6 23 19 69> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 85 19 54 f3 f3 4e 44 ae>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 35 63 93 48 16 b1 c0 d5>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 35 63 93 48 16 b1 c0 d5> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.87:55934',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400288
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46398
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400289
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46410
received auth hello!
{ authId: 504, nonce: <Buffer 65 7d 14 6d 2d 8b 62 f0> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b2 14 e7 7c 9c 53 97 8c>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 87 36 48 f0 bf 9e 27 62>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 87 36 48 f0 bf 9e 27 62> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.86:54922',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
received auth hello!
{ authId: 504, nonce: <Buffer b7 d6 34 bd 25 78 ad e2> }
Handler: Error in server - details: handshake2 timed out...
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 92 f4 bf 50 54 e8 b2 7c>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 61 e6 17 90 69 3f 85 b8>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 61 e6 17 90 69 3f 85 b8> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.87:56200',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400294
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46668
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400295
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46680
received auth hello!
{ authId: 504, nonce: <Buffer 3f 7b 02 24 77 04 27 50> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 66 e8 f1 dd 3b cc f6 20>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 96 27 cd cd 9d dc ba ea>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 96 27 cd cd 9d dc ba ea> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.86:55192',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 97 5e e2 e9 2e 8e 1d 65> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 40 02 95 0e 61 7a 09 92>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 86 49 69 42 54 5f b4 cf>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 86 49 69 42 54 5f b4 cf> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.87:56470',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400300
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46932
Handler: Error in server - details: Disconnected from auth before getting session key response
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
