changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c411.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c411',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 72 4a ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521597513622
connected to auth! from local port 52166
received auth hello!
{ authId: 402, nonce: <Buffer 66 46 64 57 f9 5f ee 12> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer b6 58 2f 16 e4 0c 13 78>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 96 45 12 9c 65 a0 1f 64 90 2f a4 3d a7 6c f8 9d>,
  macKeyVal: <Buffer e8 f5 52 d5 c4 7a 22 09 bd 9c 9b b2 d8 02 6e 7e b3 a7 97 b7 54 f5 81 30 c6 de ec 3e 87 59 12 f6>,
  absValidity: 2018-03-21T02:58:33.806Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200310,
  cipherKeyVal: <Buffer cc 6d 68 72 f2 de 55 57 f3 25 05 d8 d8 78 0a 29>,
  macKeyVal: <Buffer dd 32 a8 b2 a0 e6 19 0e 75 3b 70 d2 58 be 7c ea f2 4e 9e df e4 0c d8 e2 3d 80 47 e6 6f 94 d7 25>,
  absValidity: 2018-03-22T01:58:33.806Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200310,
     cipherKeyVal: <Buffer cc 6d 68 72 f2 de 55 57 f3 25 05 d8 d8 78 0a 29>,
     macKeyVal: <Buffer dd 32 a8 b2 a0 e6 19 0e 75 3b 70 d2 58 be 7c ea f2 4e 9e df e4 0c d8 e2 3d 80 47 e6 6f 94 d7 25>,
     absValidity: 2018-03-22T01:58:33.806Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 42 09 30 91 b1 96 66 80>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 01:58:35 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521597516251
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521597573678
connected to auth! from local port 52340
received auth hello!
{ authId: 402, nonce: <Buffer 18 74 45 e2 70 00 9a 85> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 2a e0 6d a0 14 40 86 01>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200317,
  cipherKeyVal: <Buffer a9 7b 53 81 19 88 9a de 32 4c 16 6c 43 44 59 21>,
  macKeyVal: <Buffer 4b 10 df e1 59 96 35 40 a4 d8 10 ea a1 11 52 5c e2 6a 57 c0 94 91 87 2b 71 7a ca 15 ac f7 fa d3>,
  absValidity: 2018-03-22T01:59:33.858Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200317,
     cipherKeyVal: <Buffer a9 7b 53 81 19 88 9a de 32 4c 16 6c 43 44 59 21>,
     macKeyVal: <Buffer 4b 10 df e1 59 96 35 40 a4 d8 10 ea a1 11 52 5c e2 6a 57 c0 94 91 87 2b 71 7a ca 15 ac f7 fa d3>,
     absValidity: 2018-03-22T01:59:33.858Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer fe f7 f7 1a d4 93 4a c9>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 01:59:35 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521597576486
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521597633733
connected to auth! from local port 52612
received auth hello!
{ authId: 402, nonce: <Buffer 27 2f 53 86 ea 3f 70 31> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 3d 1e f5 f6 69 9e 9d d0>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200324,
  cipherKeyVal: <Buffer a4 be df 20 7e 74 ce f8 b2 f5 33 fc 5c c2 1e e1>,
  macKeyVal: <Buffer 55 0c 81 70 56 6b c5 97 c5 ff f9 d1 c9 e8 70 93 04 a2 d4 77 31 12 b0 49 bb 67 67 86 c3 fc 54 18>,
  absValidity: 2018-03-22T02:00:33.896Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200324,
     cipherKeyVal: <Buffer a4 be df 20 7e 74 ce f8 b2 f5 33 fc 5c c2 1e e1>,
     macKeyVal: <Buffer 55 0c 81 70 56 6b c5 97 c5 ff f9 d1 c9 e8 70 93 04 a2 d4 77 31 12 b0 49 bb 67 67 86 c3 fc 54 18>,
     absValidity: 2018-03-22T02:00:33.896Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer a1 c5 17 32 bd 24 2a a6>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 02:00:35 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521597636280
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521597693789
connected to auth! from local port 52882
received auth hello!
{ authId: 402, nonce: <Buffer e9 40 a0 2a 17 e8 11 4f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c7 12 33 9d 09 b1 4d 8c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200331,
  cipherKeyVal: <Buffer c2 f5 df 19 80 7a a7 ca 26 84 1a 1a 81 b3 01 98>,
  macKeyVal: <Buffer d5 aa 0e f6 86 a1 45 f9 50 68 39 da 1b bb 1f 6b 24 3b a4 8f 52 d2 b5 76 35 b9 7c 81 3b 1c 39 db>,
  absValidity: 2018-03-22T02:01:33.953Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200331,
     cipherKeyVal: <Buffer c2 f5 df 19 80 7a a7 ca 26 84 1a 1a 81 b3 01 98>,
     macKeyVal: <Buffer d5 aa 0e f6 86 a1 45 f9 50 68 39 da 1b bb 1f 6b 24 3b a4 8f 52 d2 b5 76 35 b9 7c 81 3b 1c 39 db>,
     absValidity: 2018-03-22T02:01:33.953Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 78 96 e4 8f ca a0 52 88>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 02:01:36 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521597696483
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521597753845
connected to auth! from local port 53152
received auth hello!
{ authId: 402, nonce: <Buffer 60 84 e6 8a e6 11 7d 16> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 0c 56 3d c0 ce c6 ad 27>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200338,
  cipherKeyVal: <Buffer 72 dc 0f 65 3f 28 bd 49 8b 6e 11 0a 90 e9 4a fa>,
  macKeyVal: <Buffer 3a 4f fc b3 0a cd f8 d5 af 93 ad 26 91 d6 77 99 17 a8 04 5f cf f8 2a 9e 57 9f 4d 39 3f e6 3e 8d>,
  absValidity: 2018-03-22T02:02:34.001Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200338,
     cipherKeyVal: <Buffer 72 dc 0f 65 3f 28 bd 49 8b 6e 11 0a 90 e9 4a fa>,
     macKeyVal: <Buffer 3a 4f fc b3 0a cd f8 d5 af 93 ad 26 91 d6 77 99 17 a8 04 5f cf f8 2a 9e 57 9f 4d 39 3f e6 3e 8d>,
     absValidity: 2018-03-22T02:02:34.001Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 49 a0 ac 81 8f 60 a3 76>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 02:02:36 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521597756509
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521597813901
connected to auth! from local port 53422
received auth hello!
{ authId: 402, nonce: <Buffer ab c7 e6 43 3b 0e 06 e8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e0 df 8a ca 83 a4 05 c7>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200345,
  cipherKeyVal: <Buffer c5 17 31 be fe 72 b9 5a 80 30 88 0d 14 ab b3 83>,
  macKeyVal: <Buffer 5f 0c b5 d5 6a 1a 1b 3a 01 c2 1c 86 0e a7 ff 71 e2 d7 f8 86 d2 5d 84 3e e0 8f ee 0f d6 08 c3 c4>,
  absValidity: 2018-03-22T02:03:34.076Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200345,
     cipherKeyVal: <Buffer c5 17 31 be fe 72 b9 5a 80 30 88 0d 14 ab b3 83>,
     macKeyVal: <Buffer 5f 0c b5 d5 6a 1a 1b 3a 01 c2 1c 86 0e a7 ff 71 e2 d7 f8 86 d2 5d 84 3e e0 8f ee 0f d6 08 c3 c4>,
     absValidity: 2018-03-22T02:03:34.076Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 94 fb 13 27 3a fc af 6a>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 02:03:36 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521597816495
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521597873959
connected to auth! from local port 53692
received auth hello!
{ authId: 402, nonce: <Buffer 34 2c 3c c7 f3 0a b9 70> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 13 b3 38 8d 9d 86 b6 93>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200352,
  cipherKeyVal: <Buffer 07 10 8f e7 10 73 31 b5 57 a4 c7 f6 32 ca 54 d8>,
  macKeyVal: <Buffer 2b 18 85 4d 64 dc e8 a2 58 75 c0 57 d8 8b 57 14 b8 25 bb dc 06 3a af b6 fa 5c c6 f8 43 90 96 b4>,
  absValidity: 2018-03-22T02:04:34.158Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200352,
     cipherKeyVal: <Buffer 07 10 8f e7 10 73 31 b5 57 a4 c7 f6 32 ca 54 d8>,
     macKeyVal: <Buffer 2b 18 85 4d 64 dc e8 a2 58 75 c0 57 d8 8b 57 14 b8 25 bb dc 06 3a af b6 fa 5c c6 f8 43 90 96 b4>,
     absValidity: 2018-03-22T02:04:34.158Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer ff 63 16 3b 20 7e a6 8c>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 02:04:36 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521597876626
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521597934016
connected to auth! from local port 53962
received auth hello!
{ authId: 402, nonce: <Buffer ea d3 74 f4 cc de 55 a8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 92 d3 25 4d 70 e9 e2 22>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200359,
  cipherKeyVal: <Buffer 8a 34 4f b0 f3 91 70 c2 29 a1 9c 15 27 8d b1 6e>,
  macKeyVal: <Buffer 63 e0 90 db 31 59 af 33 e7 aa 5e f7 ec 2c 67 bb 31 7c cf d9 a3 cb 76 95 bc e5 3c bb 3a 6f 93 45>,
  absValidity: 2018-03-22T02:05:34.130Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200359,
     cipherKeyVal: <Buffer 8a 34 4f b0 f3 91 70 c2 29 a1 9c 15 27 8d b1 6e>,
     macKeyVal: <Buffer 63 e0 90 db 31 59 af 33 e7 aa 5e f7 ec 2c 67 bb 31 7c cf d9 a3 cb 76 95 bc e5 3c bb 3a 6f 93 45>,
     absValidity: 2018-03-22T02:05:34.130Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer a9 76 81 9b f0 9e 41 51>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Wed Mar 21 2018 02:05:36 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1521597936553
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1521597994051
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1521598054061
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.3:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1521598114069
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 55562
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1521598174076
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 55810
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
