changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s408.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's408',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 70 6f ... > }
Handler: listening on port 22100
s408:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200254
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49058
received auth hello!
{ authId: 402, nonce: <Buffer 53 34 c5 64 27 f4 b7 3a> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer e5 44 d2 f8 fb 65 e7 4a>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer d4 e2 cf b2 4d a5 58 f6 de 3d 77 84 cb 3b 59 95>,
  macKeyVal: <Buffer 3e b0 90 0b 9e 9a a3 09 ad f0 60 4f 1b ee 06 80 9a cd dc 0a f4 00 78 ba 34 ee 12 83 32 f2 ac 76>,
  absValidity: 2018-03-21T06:47:25.743Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4b f8 b3 41 7d fd 29 28>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 4b f8 b3 41 7d fd 29 28> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.52:43082',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200256
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49070
received auth hello!
{ authId: 402, nonce: <Buffer bd fc 81 89 ec 40 a0 30> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 85 97 58 a2 5d fb dc 74>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 1f 9d 19 d2 87 7d 24 44>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 1f 9d 19 d2 87 7d 24 44> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.54:46838',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200261
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49226
received auth hello!
{ authId: 402, nonce: <Buffer b2 a7 53 77 93 4b 1d 35> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 6f a3 60 4d 92 de 9e 91>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer a2 35 f9 3b a6 98 33 1e>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer a2 35 f9 3b a6 98 33 1e> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.52:43250',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200263
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49250
received auth hello!
{ authId: 402, nonce: <Buffer 77 0d 76 2b 99 68 74 c6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer d8 78 86 66 f8 ab ff 76>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d2 e9 29 75 78 d4 45 2a>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer d2 e9 29 75 78 d4 45 2a> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.54:47018',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200268
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49498
received auth hello!
{ authId: 402, nonce: <Buffer f5 f9 57 d2 16 40 84 2e> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c9 60 6a cc ec ee c1 39>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 48 bf 01 da 80 b4 f8 aa>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 48 bf 01 da 80 b4 f8 aa> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.52:43522',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200270
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49522
received auth hello!
{ authId: 402, nonce: <Buffer 2a b9 d7 40 1c bb 28 7f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 95 7f 26 42 26 2e 3a 62>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer b8 21 5b bf 7f c9 35 35>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer b8 21 5b bf 7f c9 35 35> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.54:47290',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200275
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49768
received auth hello!
{ authId: 402, nonce: <Buffer ee 8a b3 5d 4f d4 63 1f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 53 f6 3b 6f f9 c4 c1 da>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 20 d4 c7 3e b6 41 53 a6>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 20 d4 c7 3e b6 41 53 a6> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.52:43792',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200277
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49792
received auth hello!
{ authId: 402, nonce: <Buffer e4 de ad ec ed 0b 7c 7f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 7c 12 7d 69 a9 a7 d3 e9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4d 3d 1d 9c 43 1f 8f ee>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 4d 3d 1d 9c 43 1f 8f ee> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.54:47560',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200282
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50038
received auth hello!
{ authId: 402, nonce: <Buffer 78 c6 10 cc 78 f8 68 fd> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 6c 11 3f d8 1a f7 45 b0>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer ba 73 06 b1 b8 55 2e f8>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer ba 73 06 b1 b8 55 2e f8> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.52:44062',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200284
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50062
received auth hello!
{ authId: 402, nonce: <Buffer c5 35 13 9c c4 a8 d7 7d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer f8 10 62 27 b3 85 28 43>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer ee 55 06 f2 6d 97 95 6e>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer ee 55 06 f2 6d 97 95 6e> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.54:47830',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200289
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50308
received auth hello!
{ authId: 402, nonce: <Buffer 45 89 6e 58 db 36 33 0a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer cb fb f2 20 7e 2c db 6b>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4c 92 59 25 24 b1 19 09>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 4c 92 59 25 24 b1 19 09> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 10,
  remoteAddress: '::ffff:10.0.1.52:44332',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 10 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 10 }
specified socketID: 10
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200291
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50332
received auth hello!
{ authId: 402, nonce: <Buffer 2d d3 79 76 d6 9c 82 53> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 95 39 34 44 e3 fa 9e 19>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 64 3b ba 03 2b b3 f3 43>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 64 3b ba 03 2b b3 f3 43> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 11,
  remoteAddress: '::ffff:10.0.1.54:48100',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 11 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 11 }
specified socketID: 11
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #10 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200296
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50578
received auth hello!
{ authId: 402, nonce: <Buffer a9 5d 92 88 a1 c9 de 79> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ee 93 b9 86 cf dc bc 21>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 5c a6 74 c3 71 a7 19 93>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 5c a6 74 c3 71 a7 19 93> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 12,
  remoteAddress: '::ffff:10.0.1.52:44602',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 12 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 12 }
specified socketID: 12
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #11 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200298
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50602
received auth hello!
{ authId: 402, nonce: <Buffer 42 3f e9 b2 7a 72 af 54> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 53 e8 5b 88 4a 36 78 ce>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 1f 0f 84 31 cb c2 3b a3>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 1f 0f 84 31 cb c2 3b a3> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 13,
  remoteAddress: '::ffff:10.0.1.54:48370',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 13 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 13 }
specified socketID: 13
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #12 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200303
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50848
received auth hello!
{ authId: 402, nonce: <Buffer 79 41 71 32 14 51 64 32> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 98 74 80 b7 18 2f e2 05>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4f 6e 6e 4e 42 d8 7a 79>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 4f 6e 6e 4e 42 d8 7a 79> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 14,
  remoteAddress: '::ffff:10.0.1.52:44872',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 14 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 14 }
specified socketID: 14
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #13 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40200305
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 50872
received auth hello!
{ authId: 402, nonce: <Buffer 34 fb 75 b1 73 21 21 2c> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e8 69 e8 50 00 27 dc 90>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 51 d9 1f df df 67 31 7c>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 51 d9 1f df df 67 31 7c> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 15,
  remoteAddress: '::ffff:10.0.1.54:48640',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 15 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 15 }
specified socketID: 15
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #14 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300418
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 1
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #15 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300420
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 37472
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300428
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 37736
received auth hello!
{ authId: 401, nonce: <Buffer 44 6d 63 5e 01 53 3a 9b> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '0162471789A8',
  notBefore: 2018-03-21T05:44:07.000Z,
  notAfter: 2018-03-22T05:45:47.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'A8:7E:AA:05:0C:8B:83:59:25:67:62:17:F8:C3:AA:C8:54:16:A4:2F',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: '9BB9EF8F89BB5C622F6CF785404B30A45462BD4D78011970FC62F2FAFB6D80276C53B5FB2E698EC201DD27A7A1CE0D247BC5431F625F38A5E0EC17ACC836AB4394C69AF2539AE2907B2471D4F97899CE484460EC05416C07211F1865D3167D31D865F2C4BF55710A3AADE1EF2E45C843BDB35618E74A037593E8F948EB8FB1B6DA791EF780B1F15DCADA78F4FFBAFE929ACF57158EFA972D5D09F9B961EC4748E714C453F30DF0A57849457AC162C1D9B086E3306FF4B77C842C049C289A8D0EFF527B1052D9D020049610C8DE17E560FB2604E8353A051C884B4197C60B51F575A31F1AD8C9528908B6E18576C3B677AF0507E15EC39815EE2157CC4CE9CABD',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJHF4moMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMTA1NDQwN1oXDTE4MDMyMjA1NDU0N1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCbue+PibtcYi9s94VASzCkVGK9TXgBGXD8YvL6+22AJ2xTtfsu\naY7CAd0np6HODSR7xUMfYl84peDsF6zINqtDlMaa8lOa4pB7JHHU+XiZzkhEYOwF\nQWwHIR8YZdMWfTHYZfLEv1VxCjqt4e8uRchDvbNWGOdKA3WT6PlI64+xttp5HveA\nsfFdytp49P+6/pKaz1cVjvqXLV0J+blh7EdI5xTEU/MN8KV4SUV6wWLB2bCG4zBv\n9Ld8hCwEnCiajQ7/UnsQUtnQIASWEMjeF+Vg+yYE6DU6BRyIS0GXxgtR9XWjHxrY\nyVKJCLbhhXbDtnevBQfhXsOYFe4hV8xM6cq9AgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBACjxlorlk7vOBREfo82sWPSpC3HXtnki\nocpJ8XB4qEuU2laqJNvEZbQMxV8oBmkPFu3hZDG818JbiSc+RtVWx0MK6++Y6Qq7\n6IHNCBND+2cVxX5HAm3N+mSVLG8bLRD7/+OcQOiQ76Po28vC2dAfPxqu5SWvU3KG\nBIcywrrGIn+xHp2oulLZ7IceLhyS/pfQe0ZLZ3b7ULYvdM6+dFurc0zwqUee8c8s\naOtVdsPtflsCeKu4tFpsLYP/5KhCWgFYvXAvqj2sySXBEmJld36USPQGI45ZFT2W\nonWvtZqWVZ11is7Y0plQOIuJ6SJwKXzrwZBRDyf74hzVtzS1qflACe4=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 0
to: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300430
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 37754
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
