changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c412.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c412',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 67 49 42 41 41 4b 43 41 51 45 41 36 63 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521569555726
connected to auth! from local port 47310
received auth hello!
{ authId: 402, nonce: <Buffer f0 bf bc fb 59 e2 bf 4c> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 2c 5d bb df d4 7e 7e d1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 6e 8e b1 b7 0f 20 b3 51 b3 f6 b5 35 dd 6d 6a ec>,
  macKeyVal: <Buffer 01 ff 77 00 bc e1 31 fb a8 92 36 aa 23 47 11 3c 0f e5 96 3a 8e 0c eb d1 b9 47 39 b8 74 18 55 36>,
  absValidity: 2018-03-20T19:12:36.808Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200201,
  cipherKeyVal: <Buffer 51 39 45 a9 d8 61 7a d1 26 bf dd 54 6f 32 a4 bb>,
  macKeyVal: <Buffer a7 39 1e 6d ae 45 33 41 a3 66 b3 1b 07 f5 0a 3e b3 8c f7 1b 59 bf e2 86 f0 21 51 55 da 59 ac 89>,
  absValidity: 2018-03-21T18:12:36.807Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200201,
     cipherKeyVal: <Buffer 51 39 45 a9 d8 61 7a d1 26 bf dd 54 6f 32 a4 bb>,
     macKeyVal: <Buffer a7 39 1e 6d ae 45 33 41 a3 66 b3 1b 07 f5 0a 3e b3 8c f7 1b 59 bf e2 86 f0 21 51 55 da 59 ac 89>,
     absValidity: 2018-03-21T18:12:36.807Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer d8 d6 19 34 c6 b8 d6 6b>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:12:38 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521569559104
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521569615782
connected to auth! from local port 47490
received auth hello!
{ authId: 402, nonce: <Buffer d6 14 e0 39 5b 1f b5 42> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 4a a6 0d af b6 d8 df 11>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200208,
  cipherKeyVal: <Buffer 14 75 7d d0 e6 ca 56 01 7c 41 06 9a d9 d9 60 c1>,
  macKeyVal: <Buffer df e0 2e 6c 82 9d e4 f5 4b f8 5b 3e ce 6d fc 3f 42 e4 ae 80 21 bd 19 62 57 ba fc 6c 0a 7b 8d 41>,
  absValidity: 2018-03-21T18:13:36.845Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200208,
     cipherKeyVal: <Buffer 14 75 7d d0 e6 ca 56 01 7c 41 06 9a d9 d9 60 c1>,
     macKeyVal: <Buffer df e0 2e 6c 82 9d e4 f5 4b f8 5b 3e ce 6d fc 3f 42 e4 ae 80 21 bd 19 62 57 ba fc 6c 0a 7b 8d 41>,
     absValidity: 2018-03-21T18:13:36.845Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer cd d6 0b 85 de c2 6b 53>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:13:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521569619369
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521569675835
connected to auth! from local port 47760
received auth hello!
{ authId: 402, nonce: <Buffer f7 c3 e4 c2 76 12 d5 f6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a1 18 6a f1 10 e6 13 dd>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200215,
  cipherKeyVal: <Buffer 39 8d da 26 e8 ed cd fc b9 60 a2 63 07 ee d7 f8>,
  macKeyVal: <Buffer 38 5e 1e a3 bb e4 1a 0a 03 79 5d 59 4d 05 3c f3 6a 4a e7 f1 09 12 20 de 7e de 67 0a 26 44 ff 26>,
  absValidity: 2018-03-21T18:14:36.908Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200215,
     cipherKeyVal: <Buffer 39 8d da 26 e8 ed cd fc b9 60 a2 63 07 ee d7 f8>,
     macKeyVal: <Buffer 38 5e 1e a3 bb e4 1a 0a 03 79 5d 59 4d 05 3c f3 6a 4a e7 f1 09 12 20 de 7e de 67 0a 26 44 ff 26>,
     absValidity: 2018-03-21T18:14:36.908Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer fc 59 9d 89 34 b7 8c 97>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:14:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521569679529
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521569735836
connected to auth! from local port 48030
received auth hello!
{ authId: 402, nonce: <Buffer 77 38 60 61 55 52 70 c2> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b2 79 1e 75 3f 21 95 54>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200222,
  cipherKeyVal: <Buffer 32 e9 2e 9e 8c 5f 3f 89 97 be 15 87 e8 43 1b 32>,
  macKeyVal: <Buffer 76 0d 86 84 97 d7 02 3b 43 aa c2 19 c9 4c 58 b1 d0 8c 5f 24 58 26 52 04 fe 29 da 25 2b 07 99 2f>,
  absValidity: 2018-03-21T18:15:36.975Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200222,
     cipherKeyVal: <Buffer 32 e9 2e 9e 8c 5f 3f 89 97 be 15 87 e8 43 1b 32>,
     macKeyVal: <Buffer 76 0d 86 84 97 d7 02 3b 43 aa c2 19 c9 4c 58 b1 d0 8c 5f 24 58 26 52 04 fe 29 da 25 2b 07 99 2f>,
     absValidity: 2018-03-21T18:15:36.975Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 77 5d 28 81 8c 11 26 be>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:15:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521569739481
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521569795893
connected to auth! from local port 48300
received auth hello!
{ authId: 402, nonce: <Buffer cf 4d cd 07 0a c5 e5 f0> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 80 e1 7a 72 12 3e 97 83>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200229,
  cipherKeyVal: <Buffer 2c ef 89 79 8c 4f ab ff c8 e7 92 35 6e 7c e5 d4>,
  macKeyVal: <Buffer e5 ec 7a 0c 8e d4 e9 d4 94 d3 c1 d6 0a 9b 53 ff 5d 1c 5d 29 58 87 e7 e9 46 58 45 56 35 40 0c 3b>,
  absValidity: 2018-03-21T18:16:37.025Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200229,
     cipherKeyVal: <Buffer 2c ef 89 79 8c 4f ab ff c8 e7 92 35 6e 7c e5 d4>,
     macKeyVal: <Buffer e5 ec 7a 0c 8e d4 e9 d4 94 d3 c1 d6 0a 9b 53 ff 5d 1c 5d 29 58 87 e7 e9 46 58 45 56 35 40 0c 3b>,
     absValidity: 2018-03-21T18:16:37.025Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer ac 07 c2 ec 7f 6a e3 b6>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:16:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521569799518
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521569855950
connected to auth! from local port 48570
received auth hello!
{ authId: 402, nonce: <Buffer 8c c0 47 5f cc 36 6d 00> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 07 57 da 67 ac 0e d2 b9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200236,
  cipherKeyVal: <Buffer 6d 3d 01 13 8d 8f 71 fd 5a 30 fd 1b af fe 8c 1b>,
  macKeyVal: <Buffer 5f 28 c7 5d 36 af 1e 70 1b 1d 19 a5 c6 e6 9f 71 79 61 d5 ba d4 8b 91 0d 32 13 34 44 22 80 bb f2>,
  absValidity: 2018-03-21T18:17:37.046Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200236,
     cipherKeyVal: <Buffer 6d 3d 01 13 8d 8f 71 fd 5a 30 fd 1b af fe 8c 1b>,
     macKeyVal: <Buffer 5f 28 c7 5d 36 af 1e 70 1b 1d 19 a5 c6 e6 9f 71 79 61 d5 ba d4 8b 91 0d 32 13 34 44 22 80 bb f2>,
     absValidity: 2018-03-21T18:17:37.046Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 30 c3 62 5c 6a 0b cb 23>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:17:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521569859584
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521569915990
connected to auth! from local port 48840
received auth hello!
{ authId: 402, nonce: <Buffer 61 0b 23 57 16 a9 30 3e> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 48 d8 20 56 e3 4e 5a 36>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200243,
  cipherKeyVal: <Buffer 73 1d 4f a6 e4 c4 61 38 1d 95 64 a8 60 0b 23 e4>,
  macKeyVal: <Buffer 5c 8c f5 de 34 4a e6 6e ef 66 86 ca 9b 18 c6 6a 27 63 0b 11 24 e1 30 6c 87 07 bc c0 a6 0b 09 6f>,
  absValidity: 2018-03-21T18:18:37.130Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200243,
     cipherKeyVal: <Buffer 73 1d 4f a6 e4 c4 61 38 1d 95 64 a8 60 0b 23 e4>,
     macKeyVal: <Buffer 5c 8c f5 de 34 4a e6 6e ef 66 86 ca 9b 18 c6 6a 27 63 0b 11 24 e1 30 6c 87 07 bc c0 a6 0b 09 6f>,
     absValidity: 2018-03-21T18:18:37.130Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 80 a2 29 d8 97 54 1b aa>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:18:39 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521569919665
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521569976037
connected to auth! from local port 49106
received auth hello!
{ authId: 402, nonce: <Buffer 10 93 e9 bc d8 3c 85 27> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ed c0 62 36 1a fa c4 66>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200250,
  cipherKeyVal: <Buffer 10 ac 70 16 0b da c0 01 e0 6f 6c b4 70 29 ee 3b>,
  macKeyVal: <Buffer de d1 70 d3 67 cb b3 61 5b f5 6e 9a 92 7a c5 a8 77 9e 84 19 9f 0d be 47 09 8a 31 76 84 1b aa ff>,
  absValidity: 2018-03-21T18:19:37.174Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.15',
  serverPort: 22100,
  sessionKey: 
   { id: 40200250,
     cipherKeyVal: <Buffer 10 ac 70 16 0b da c0 01 e0 6f 6c b4 70 29 ee 3b>,
     macKeyVal: <Buffer de d1 70 d3 67 cb b3 61 5b f5 6e 9a 92 7a c5 a8 77 9e 84 19 9f 0d be 47 09 8a 31 76 84 1b aa ff>,
     absValidity: 2018-03-21T18:19:37.174Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 79 8e d6 52 44 29 aa 31>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:19:40 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1521569980262
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1521570036094
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1521570096104
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 50888
received auth hello!
{ authId: 502, nonce: <Buffer 4d 62 5f 60 a0 44 4d 92> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1521570156106
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 51136
received auth hello!
{ authId: 502, nonce: <Buffer 76 12 84 bf 05 bb c0 f8> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1521570216113
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54098
received auth hello!
{ authId: 501, nonce: <Buffer 9f 91 12 06 e7 7c 1a 2b> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 13 0.6153846153846154 1521570276123
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54346
received auth hello!
{ authId: 501, nonce: <Buffer 64 de c1 9f 69 8f 40 92> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 14 0.5714285714285714 1521570336134
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 60932
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 15 0.5333333333333333 1521570396141
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 32952
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 16 0.5 1521570456142
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 41846
received auth hello!
{ authId: 403, nonce: <Buffer 62 55 5f 29 29 d7 a3 48> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 17 0.47058823529411764 1521570516151
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 42104
received auth hello!
{ authId: 403, nonce: <Buffer 1d cf f8 9d 23 cc 3b db> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 18 0.4444444444444444 1521570576162
failure in connection with Auth : authFailureCount: 10
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 3
to: 4
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 49284
received auth hello!
{ authId: 503, nonce: <Buffer 3f 1b 98 39 df 59 fd 6a> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth503',
     commonName: '10.0.1.6' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '0162449B557E',
  notBefore: 2018-03-20T18:09:13.000Z,
  notAfter: 2018-03-21T18:10:53.000Z,
  subjectHash: '5542437f',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '3C:AA:C7:02:26:ED:A0:5F:E6:73:73:C6:D1:0C:84:E7:C9:3A:0D:90',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'DE5B30AA46CAB50E9EB99610D7CD6F5A13A506E423E0B2FA7E5B5516308134D5EBA5029E1E86687304DE74F1EDC282AFF2BDBD5A1EEA4AB5A9C11B58BE559B6581427760281F7D05FB35B0241357C06845115CC2742374425A859E0CF161E9E28FB5DADEF2AD5312533F095CB0709A99F829AD0B3B1B19C8FB4E17DFB5D85CE6E65EA745001E8C0CC8AC5A752E195090E212D1563BE34185B3211F90F9135C8AD962B139057D6E600CF5797302C942DB7EEA5A0963E1105D1B46C227E6B60D0B1D7EF08EA4E9BE1220E5269AD51AB8E328F18D2AC5A2F47D0508AD6101DC087A6295158FC3BEDA4B4CD32EC8D3E6E2F67DC2962059753EE1281A41E463966327',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.6' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 503,
  host: '10.0.1.6',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEm1V+MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMDE4MDkxM1oXDTE4MDMyMTE4MTA1M1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMzERMA8GA1UEAwwIMTAuMC4xLjYwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQDeWzCqRsq1Dp65lhDXzW9aE6UG5CPgsvp+W1UWMIE01eulAp4e\nhmhzBN508e3Cgq/yvb1aHupKtanBG1i+VZtlgUJ3YCgffQX7NbAkE1fAaEURXMJ0\nI3RCWoWeDPFh6eKPtdre8q1TElM/CVywcJqZ+CmtCzsbGcj7Thfftdhc5uZep0UA\nHowMyKxadS4ZUJDiEtFWO+NBhbMhH5D5E1yK2WKxOQV9bmAM9XlzAslC237qWglj\n4RBdG0bCJ+a2DQsdfvCOpOm+EiDlJprVGrjjKPGNKsWi9H0FCK1hAdwIemKVFY/D\nvtpLTNMuyNPm4vZ9wpYgWXU+4SgaQeRjlmMnAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQYwDQYJKoZIhvcNAQELBQADggEBABVb9rf2T3ft1bpaAmDr3eb+nODoWvrl\nXeJ5EgDA8Tpf2+eYByrKYmPxgGjcPaX5mRpCJy2/5oxWG4dQe1Ex2GrL7sJ78NGA\nCkkOlFkzqQ4KITkc3qJ2TpvRF1wNr0tf7phZuv5KgZdE7qG3W34k5nsYMp/Qe08s\nNJHEkXjQ/Tstt2eMlC72TUJL6n25leowJ7RZrF8lDynOdYUp+gRVkiCNMev4hl9n\nfpfx31jALYqVFON0s6E9mI/o8vJM+1vpTZX0/K4gUZIqtcKKDwjaBUHuX/EB9sk5\ntsi9w9TZ14XNc2ct+YrJzhUNtzy9XBNRzpkyOd4CPoPtE7vRcVKZ9Us=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 4
to: 5
disconnected from auth
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
