changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c526.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c526',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 34 6c ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521569664679
connected to auth! from local port 48048
received auth hello!
{ authId: 504, nonce: <Buffer b7 d3 2d 1d 4c f9 63 b3> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 2a 11 84 0a 35 14 8c f7>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 6a a2 61 51 80 bd f0 08 6a 61 fa 55 b9 0a 3e 26>,
  macKeyVal: <Buffer ef 94 d4 0e 3c 49 a2 da 40 2d 3c c2 ac 6d 05 3c f1 e5 51 82 37 75 92 4a ea 6c d4 f9 91 d9 74 0e>,
  absValidity: 2018-03-20T19:14:28.106Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400044,
  cipherKeyVal: <Buffer b4 34 48 a5 20 be 77 cf c5 0c 4d 4a 46 7b 87 e3>,
  macKeyVal: <Buffer 4c ce 49 eb e4 57 ba 34 f6 3d 9f 86 ec cd d3 91 14 1f 73 d0 29 51 bc 89 1a b4 bf 89 9a 4d 18 30>,
  absValidity: 2018-03-21T18:14:28.106Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400044,
     cipherKeyVal: <Buffer b4 34 48 a5 20 be 77 cf c5 0c 4d 4a 46 7b 87 e3>,
     macKeyVal: <Buffer 4c ce 49 eb e4 57 ba 34 f6 3d 9f 86 ec cd d3 91 14 1f 73 d0 29 51 bc 89 1a b4 bf 89 9a 4d 18 30>,
     absValidity: 2018-03-21T18:14:28.106Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 1d 84 8a 5a e3 f4 64 8f>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:14:30 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521569671545
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521569724730
connected to auth! from local port 48318
received auth hello!
{ authId: 504, nonce: <Buffer 76 23 31 c2 60 5e ad ba> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 14 31 85 c6 9d b2 2b 77>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400050,
  cipherKeyVal: <Buffer 3c 6a 2d 4a b9 cc 1a f7 cc a9 7d e4 9d f8 60 1e>,
  macKeyVal: <Buffer ef 4a f6 4e 4a f3 a8 41 fd 05 0c 1e 35 9b 42 ca be 2d 59 c7 0f 57 08 51 eb f7 12 46 68 f8 78 17>,
  absValidity: 2018-03-21T18:15:28.689Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400050,
     cipherKeyVal: <Buffer 3c 6a 2d 4a b9 cc 1a f7 cc a9 7d e4 9d f8 60 1e>,
     macKeyVal: <Buffer ef 4a f6 4e 4a f3 a8 41 fd 05 0c 1e 35 9b 42 ca be 2d 59 c7 0f 57 08 51 eb f7 12 46 68 f8 78 17>,
     absValidity: 2018-03-21T18:15:28.689Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 4b 0b 39 aa 5e e1 3e fc>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:15:31 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521569731445
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521569784774
connected to auth! from local port 48588
received auth hello!
{ authId: 504, nonce: <Buffer fd 19 37 c3 0a a1 f5 4a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer da de 97 2e 87 58 ae 92>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400056,
  cipherKeyVal: <Buffer f4 bb e3 fe d0 ee 92 c3 41 48 f7 f5 67 e6 d4 cb>,
  macKeyVal: <Buffer b1 17 3b f8 88 ac c9 40 a5 c8 79 03 8c 14 80 d5 8b 50 4f b0 00 d6 4b 12 4f 10 3c 46 26 d9 87 86>,
  absValidity: 2018-03-21T18:16:28.368Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400056,
     cipherKeyVal: <Buffer f4 bb e3 fe d0 ee 92 c3 41 48 f7 f5 67 e6 d4 cb>,
     macKeyVal: <Buffer b1 17 3b f8 88 ac c9 40 a5 c8 79 03 8c 14 80 d5 8b 50 4f b0 00 d6 4b 12 4f 10 3c 46 26 d9 87 86>,
     absValidity: 2018-03-21T18:16:28.368Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer f4 d0 b9 74 10 16 03 1d>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:16:30 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521569791375
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521569844828
connected to auth! from local port 48858
received auth hello!
{ authId: 504, nonce: <Buffer c3 e6 70 ec c7 00 41 fe> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e3 20 b0 2f 06 cd 24 b9>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400062,
  cipherKeyVal: <Buffer 03 8f 79 74 a6 8c db 30 36 fb 06 c8 2e 0c d7 cd>,
  macKeyVal: <Buffer 1c b7 49 cc b6 f5 76 e2 7f bb 7e 0f 4d 21 5d 7a 2f 44 a6 cc 71 86 ec ab 17 76 b8 a7 06 ed 9c f9>,
  absValidity: 2018-03-21T18:17:28.178Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400062,
     cipherKeyVal: <Buffer 03 8f 79 74 a6 8c db 30 36 fb 06 c8 2e 0c d7 cd>,
     macKeyVal: <Buffer 1c b7 49 cc b6 f5 76 e2 7f bb 7e 0f 4d 21 5d 7a 2f 44 a6 cc 71 86 ec ab 17 76 b8 a7 06 ed 9c f9>,
     absValidity: 2018-03-21T18:17:28.178Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer b9 f7 a1 25 18 f6 4a 85>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:17:31 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521569851536
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521569904837
connected to auth! from local port 49128
received auth hello!
{ authId: 504, nonce: <Buffer 6d 67 a6 31 d0 39 c2 6c> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 55 b0 1c c1 bc 1b c1 0b>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400068,
  cipherKeyVal: <Buffer 4f 90 42 df 44 b1 31 30 08 c1 fc 9d f2 82 45 8f>,
  macKeyVal: <Buffer cb 74 bb 01 ab b5 6a 1d 17 fd 9a ab 7b 9c 82 50 40 eb 28 6b d5 cb 65 91 b3 df 48 15 07 2d 20 bd>,
  absValidity: 2018-03-21T18:18:28.276Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400068,
     cipherKeyVal: <Buffer 4f 90 42 df 44 b1 31 30 08 c1 fc 9d f2 82 45 8f>,
     macKeyVal: <Buffer cb 74 bb 01 ab b5 6a 1d 17 fd 9a ab 7b 9c 82 50 40 eb 28 6b d5 cb 65 91 b3 df 48 15 07 2d 20 bd>,
     absValidity: 2018-03-21T18:18:28.276Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer d7 9a 72 08 7b 29 c1 42>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:18:31 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521569911565
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521569964868
connected to auth! from local port 49398
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 7 0.7142857142857143 1521570024879
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 8 0.625 1521570084889
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 38614
received auth hello!
{ authId: 503, nonce: <Buffer 2e 4c 74 d5 1a a9 25 33> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 9 0.5555555555555556 1521570144900
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 38862
received auth hello!
{ authId: 503, nonce: <Buffer a9 44 80 8f 43 50 31 3a> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 10 0.5 1521570204911
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 55244
received auth hello!
{ authId: 403, nonce: <Buffer 9e bd fe e6 ce 2c 48 88> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 11 0.45454545454545453 1521570264922
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 55492
received auth hello!
{ authId: 403, nonce: <Buffer 32 33 44 ed b1 12 8d 26> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 12 0.4166666666666667 1521570324931
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 58640
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 13 0.38461538461538464 1521570384938
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 58886
received auth hello!
{ authId: 401, nonce: <Buffer 4a 1b d8 b0 cc 5d e2 09> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth504',
     commonName: '10.0.0.7' },
  serial: '0162449B5D18',
  notBefore: 2018-03-20T18:09:15.000Z,
  notAfter: 2018-03-21T18:10:55.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'EC:B8:59:7B:3F:CC:B5:35:90:F7:DA:2B:04:4B:08:08:14:7B:D2:FB',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B95EF3029A4C4FAE066EFDE0A6119C37979EDB5A64C834CFDC68175183A2CCB6F817A6CEE1A9EF3E562CF75048E8894B6036030296F313DEBF7C1069E42825C46A5F1F6D69FFE10EE6D73B7805503AA7E6A4C2FF62C2E4D5BF7079FBED00C4B24480D5BC43B7B3B042025990D06DEE0A0388CF2AE7F4B313EF564F2EB3931C44FD1DBD6DFA6DA12843C6DBAAE1EFBC5E7EEDA9407AE6D78B6211169F194056CA6F9CD9F20F33FE469D35BCC944D43D2ECB947F73AF95BB5530BFF2A9B92CA16EB949D06EB8218BBBEC8EA009AC9F6C53C626A2796484448AEDAAB3D19834BA2A19D35D0E105AD47B9A6B3E1589517039E098E992676ED418010E608FA312B251',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEm10YMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg1MDQxETAPBgNVBAMMCDEwLjAuMC43MB4XDTE4MDMy\nMDE4MDkxNVoXDTE4MDMyMTE4MTA1NVowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC5XvMCmkxPrgZu/eCmEZw3l57bWmTINM/caBdRg6LMtvgXps7h\nqe8+Viz3UEjoiUtgNgMClvMT3r98EGnkKCXEal8fbWn/4Q7m1zt4BVA6p+akwv9i\nwuTVv3B5++0AxLJEgNW8Q7ezsEICWZDQbe4KA4jPKuf0sxPvVk8us5McRP0dvW36\nbaEoQ8bbquHvvF5+7alAeubXi2IRFp8ZQFbKb5zZ8g8z/kadNbzJRNQ9LsuUf3Ov\nlbtVML/yqbksoW65SdBuuCGLu+yOoAmsn2xTxiaieWSERIrtqrPRmDS6KhnTXQ4Q\nWtR7mms+FYlRcDngmOmSZ27UGAEOYI+jErJRAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAHYYkzjM4W/LOEVCey5ognIdFpx8UoSp\nOmBRF/s0KTfl6CmE37F8X+P7N5StA+Hi7azRDzytnIkYVb/lLLV6mnNiRSehzHEy\nK7AK2xq7B1V8Vg19EO5hNzGHj3Wrlq8Q7pTdJ5Avjxusv4B4QBu47IyzrvEKs3H5\ne/6B/a/6rlAkI1+vnpMMqD5imRzn3TYKUawfP19IleVIqZA8ITr4ir29R3/gh4tj\nYDdeUVwccdOdJ5BJrQUpdcsl1YHHULvYcntmxDe1IPzKVVksMUFFO3UAOfGVwfu9\n8kZG4doVLMouaoDcCWGHJvr6nQxlMklFm1cmkTIr577yEzDxcUnEhCM=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 2
to: 3
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 14 0.35714285714285715 1521570444948
connected to auth! from local port 59120
received auth hello!
{ authId: 401, nonce: <Buffer b3 d6 9f 99 24 1e be c5> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 87 b5 6a dc 56 bf 04 28>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 79 19 05 ad ef 74 5d f9 58 65 b4 ae 23 f7 62 c7>,
  macKeyVal: <Buffer 62 56 6f 27 7a 7b 78 c8 fc 34 22 e4 47 90 a0 3d e8 cf 81 a2 96 fc 9c 38 80 ae 4e 54 46 09 ba e8>,
  absValidity: 2018-03-20T19:27:28.203Z }
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100359,
  cipherKeyVal: <Buffer a1 0a 15 65 a7 4e a4 1f 04 2a 6b 7d 88 a5 4f 3a>,
  macKeyVal: <Buffer 66 2d 89 b0 f2 c6 b6 b0 ec 70 92 74 96 f8 8b a8 b4 05 e4 4d d3 4f ef 25 ae 69 7a f1 45 04 f2 68>,
  absValidity: 2018-03-21T18:27:28.202Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 40100359,
     cipherKeyVal: <Buffer a1 0a 15 65 a7 4e a4 1f 04 2a 6b 7d 88 a5 4f 3a>,
     macKeyVal: <Buffer 66 2d 89 b0 f2 c6 b6 b0 ec 70 92 74 96 f8 8b a8 b4 05 e4 4d d3 4f ef 25 ae 69 7a f1 45 04 f2 68>,
     absValidity: 2018-03-21T18:27:28.202Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 30 c8 74 c2 a4 d4 30 ae>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.42:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 15 0.3333333333333333 1521570504956
connected to auth! from local port 59368
received auth hello!
{ authId: 401, nonce: <Buffer 61 2f be c4 50 f7 9e 28> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 4e 6a 2f 59 80 38 47 96>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100368,
  cipherKeyVal: <Buffer a6 6e 9e 12 4a 06 e6 f6 d1 55 2c 23 49 0c f2 d6>,
  macKeyVal: <Buffer 2a 05 92 64 05 51 eb 8a 43 d9 87 53 fb 3a 78 40 f6 8d 13 44 20 e4 d2 0a d3 cf bd 85 23 76 a7 c2>,
  absValidity: 2018-03-21T18:28:28.729Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 40100368,
     cipherKeyVal: <Buffer a6 6e 9e 12 4a 06 e6 f6 d1 55 2c 23 49 0c f2 d6>,
     macKeyVal: <Buffer 2a 05 92 64 05 51 eb 8a 43 d9 87 53 fb 3a 78 40 f6 8d 13 44 20 e4 d2 0a d3 cf bd 85 23 76 a7 c2>,
     absValidity: 2018-03-21T18:28:28.729Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 73 2d f5 fa 6c c3 2f fe>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.42:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 16 0.3125 1521570564962
connected to auth! from local port 59628
received auth hello!
{ authId: 401, nonce: <Buffer c9 92 1a 18 38 8e 1c 09> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer af a1 9d 61 a5 45 41 f4>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100380,
  cipherKeyVal: <Buffer 5f e7 af f4 53 89 5e fb 3e fa c0 7c 30 77 d4 6b>,
  macKeyVal: <Buffer f8 73 f3 59 be d1 20 1d be 65 16 77 78 d4 40 9a 90 c8 fc 2c 38 5a bd f6 7f a2 4a d8 32 b7 93 9a>,
  absValidity: 2018-03-21T18:29:28.765Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 40100380,
     cipherKeyVal: <Buffer 5f e7 af f4 53 89 5e fb 3e fa c0 7c 30 77 d4 6b>,
     macKeyVal: <Buffer f8 73 f3 59 be d1 20 1d be 65 16 77 78 d4 40 9a 90 c8 fc 2c 38 5a bd f6 7f a2 4a d8 32 b7 93 9a>,
     absValidity: 2018-03-21T18:29:28.765Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer dd 88 cd 4f 6a 87 b1 40>
switching to HANDSHAKE_1_SENT
disconnected from auth
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
