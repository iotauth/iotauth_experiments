changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c411.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c411',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 67 49 42 41 41 4b 43 41 51 45 41 77 62 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521572426166
connected to auth! from local port 34264
received auth hello!
{ authId: 402, nonce: <Buffer 50 ae 05 fb 28 73 92 96> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 28 7f 58 36 9e 7f 3f 39>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer a9 8e b0 45 8c 78 da 42 3d e0 e1 c3 0a cb c3 64>,
  macKeyVal: <Buffer ab 5f 59 61 49 ce 68 f1 68 90 e2 4c 05 ff 82 7d 40 10 75 41 e8 b5 c0 c2 ca f2 4f 82 63 51 55 8f>,
  absValidity: 2018-03-20T20:00:26.475Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200255,
  cipherKeyVal: <Buffer 89 ce 83 53 3c 96 57 0e a5 bb 7e f1 7b 69 9c e8>,
  macKeyVal: <Buffer 7e 0a 07 76 cb f2 3a d6 ad 1e da b7 42 23 27 35 ec a0 64 f6 f1 3f b1 d5 03 4f 5e c3 09 13 d1 28>,
  absValidity: 2018-03-21T19:00:26.475Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200255,
     cipherKeyVal: <Buffer 89 ce 83 53 3c 96 57 0e a5 bb 7e f1 7b 69 9c e8>,
     macKeyVal: <Buffer 7e 0a 07 76 cb f2 3a d6 ad 1e da b7 42 23 27 35 ec a0 64 f6 f1 3f b1 d5 03 4f 5e c3 09 13 d1 28>,
     absValidity: 2018-03-21T19:00:26.475Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 37 8c d5 18 c2 58 c1 11>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:00:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521572428921
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521572486185
connected to auth! from local port 34438
received auth hello!
{ authId: 402, nonce: <Buffer ff 59 5d 92 3b ce 3f b8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 9d 01 44 b3 9d b6 55 1f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200262,
  cipherKeyVal: <Buffer ca 43 a3 6c d2 79 6e af 95 a4 74 b0 35 a2 bb 85>,
  macKeyVal: <Buffer d5 c7 52 ab 67 50 22 5d 3a bf 19 58 9a cf d1 77 7f e5 e0 7a c7 3e a2 01 39 42 c6 eb 8a ca 39 9e>,
  absValidity: 2018-03-21T19:01:26.545Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200262,
     cipherKeyVal: <Buffer ca 43 a3 6c d2 79 6e af 95 a4 74 b0 35 a2 bb 85>,
     macKeyVal: <Buffer d5 c7 52 ab 67 50 22 5d 3a bf 19 58 9a cf d1 77 7f e5 e0 7a c7 3e a2 01 39 42 c6 eb 8a ca 39 9e>,
     absValidity: 2018-03-21T19:01:26.545Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 15 6f 40 9a 0a fc f8 70>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:01:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521572489179
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521572546241
connected to auth! from local port 34708
received auth hello!
{ authId: 402, nonce: <Buffer 79 7e 6b 9b 66 03 b9 38> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ab 45 1f 90 0f 3a 4a e8>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200269,
  cipherKeyVal: <Buffer 6f fa d9 cf d6 10 24 4e 98 76 42 1f bc 26 23 97>,
  macKeyVal: <Buffer 28 7f be dc 71 30 e9 75 90 32 28 50 d6 32 62 e3 ae d5 b0 40 04 d4 25 df c7 b4 b5 85 dd d1 88 f7>,
  absValidity: 2018-03-21T19:02:26.626Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200269,
     cipherKeyVal: <Buffer 6f fa d9 cf d6 10 24 4e 98 76 42 1f bc 26 23 97>,
     macKeyVal: <Buffer 28 7f be dc 71 30 e9 75 90 32 28 50 d6 32 62 e3 ae d5 b0 40 04 d4 25 df c7 b4 b5 85 dd d1 88 f7>,
     absValidity: 2018-03-21T19:02:26.626Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 32 72 79 fd 02 3b b3 0c>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:02:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521572549160
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521572606299
connected to auth! from local port 34978
received auth hello!
{ authId: 402, nonce: <Buffer 1c 27 60 b9 78 da 1d 90> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 65 ae 39 86 eb fb 16 9e>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200276,
  cipherKeyVal: <Buffer ba 4c 01 a7 43 70 4a 21 57 7e 5c 56 b8 b3 ac c2>,
  macKeyVal: <Buffer 33 72 75 c1 6b 4d 3c 93 5d 82 d2 dc eb 6c 1f eb f3 87 9c 58 d4 89 6a ab 8a 6c af 51 93 b6 f9 e3>,
  absValidity: 2018-03-21T19:03:26.646Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200276,
     cipherKeyVal: <Buffer ba 4c 01 a7 43 70 4a 21 57 7e 5c 56 b8 b3 ac c2>,
     macKeyVal: <Buffer 33 72 75 c1 6b 4d 3c 93 5d 82 d2 dc eb 6c 1f eb f3 87 9c 58 d4 89 6a ab 8a 6c af 51 93 b6 f9 e3>,
     absValidity: 2018-03-21T19:03:26.646Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 5e d9 21 55 25 14 f8 97>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:03:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521572609265
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521572666353
connected to auth! from local port 35248
received auth hello!
{ authId: 402, nonce: <Buffer e4 7f 3c 64 b3 89 ab 35> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c7 42 5e 5c 34 c1 c1 ca>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200283,
  cipherKeyVal: <Buffer 43 7a 39 cf b1 44 74 da 71 40 a5 3b 9c d3 3b 3a>,
  macKeyVal: <Buffer 91 6f a7 dc 8b 5d d6 fa fd 73 c4 c2 97 34 2a 29 6d fa b8 42 1d 3c 17 5d 58 62 c0 7d f0 dd 79 97>,
  absValidity: 2018-03-21T19:04:26.660Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200283,
     cipherKeyVal: <Buffer 43 7a 39 cf b1 44 74 da 71 40 a5 3b 9c d3 3b 3a>,
     macKeyVal: <Buffer 91 6f a7 dc 8b 5d d6 fa fd 73 c4 c2 97 34 2a 29 6d fa b8 42 1d 3c 17 5d 58 62 c0 7d f0 dd 79 97>,
     absValidity: 2018-03-21T19:04:26.660Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer fb 86 ec 25 25 c5 40 63>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:04:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521572669277
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521572726396
connected to auth! from local port 35518
received auth hello!
{ authId: 402, nonce: <Buffer d4 dc 15 3c dd 90 38 fc> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 92 ed 8c 11 ce b0 2d b6>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200290,
  cipherKeyVal: <Buffer fe 96 8e aa 81 d5 38 82 89 b4 d6 eb c8 f3 25 1b>,
  macKeyVal: <Buffer 7d 94 7d 6d 0d 7a cb 21 f4 3a d1 bc 63 39 3f ec 0a eb 63 0d 47 ae 9f 9e 7d 9d 3c 7c da ba 14 87>,
  absValidity: 2018-03-21T19:05:26.755Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200290,
     cipherKeyVal: <Buffer fe 96 8e aa 81 d5 38 82 89 b4 d6 eb c8 f3 25 1b>,
     macKeyVal: <Buffer 7d 94 7d 6d 0d 7a cb 21 f4 3a d1 bc 63 39 3f ec 0a eb 63 0d 47 ae 9f 9e 7d 9d 3c 7c da ba 14 87>,
     absValidity: 2018-03-21T19:05:26.755Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer a8 40 8b 3e 12 66 7b 17>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:05:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521572729260
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521572786453
connected to auth! from local port 35788
received auth hello!
{ authId: 402, nonce: <Buffer 1d fd c2 7d 28 57 7a 17> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer cb 65 0a c6 f8 b2 b6 d5>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200297,
  cipherKeyVal: <Buffer a6 ce 3a ab 78 81 f4 6f c1 13 3f 31 eb e3 6b 6c>,
  macKeyVal: <Buffer d9 19 21 c0 c6 14 a7 06 03 15 6c 63 20 21 19 25 94 8d 2f e9 de 38 45 72 12 4c 2d fd b3 ee a1 18>,
  absValidity: 2018-03-21T19:06:26.766Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200297,
     cipherKeyVal: <Buffer a6 ce 3a ab 78 81 f4 6f c1 13 3f 31 eb e3 6b 6c>,
     macKeyVal: <Buffer d9 19 21 c0 c6 14 a7 06 03 15 6c 63 20 21 19 25 94 8d 2f e9 de 38 45 72 12 4c 2d fd b3 ee a1 18>,
     absValidity: 2018-03-21T19:06:26.766Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 54 6e f8 d7 27 5a e0 f3>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:06:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521572789326
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521572846511
connected to auth! from local port 36058
received auth hello!
{ authId: 402, nonce: <Buffer 40 5b a5 f5 c6 70 02 cb> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b3 a8 9b f6 2b 0e c5 f1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200304,
  cipherKeyVal: <Buffer e9 0f 3a 66 fa 6b d1 25 de a2 0b d4 30 fb fe 0b>,
  macKeyVal: <Buffer c9 20 51 7b 8d fa a3 95 68 ef 39 10 52 d4 67 48 9a c2 78 00 a5 b7 0d 3a 2b 2a 08 c9 bc 05 62 cf>,
  absValidity: 2018-03-21T19:07:26.848Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.17',
  serverPort: 22100,
  sessionKey: 
   { id: 40200304,
     cipherKeyVal: <Buffer e9 0f 3a 66 fa 6b d1 25 de a2 0b d4 30 fb fe 0b>,
     macKeyVal: <Buffer c9 20 51 7b 8d fa a3 95 68 ef 39 10 52 d4 67 48 9a c2 78 00 a5 b7 0d 3a 2b 2a 08 c9 bc 05 62 cf>,
     absValidity: 2018-03-21T19:07:26.848Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 5a 1a 08 df d8 1c e0 ea>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 19:07:28 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1521572849424
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1521572906569
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1521572966580
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54452
received auth hello!
{ authId: 502, nonce: <Buffer a7 b6 4f 95 cd a5 45 25> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1521573026583
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 54680
received auth hello!
{ authId: 502, nonce: <Buffer 6b 99 e5 00 2a 55 62 17> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1521573086593
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Error: connect EHOSTUNREACH 10.0.1.4:21100
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 13 0.6153846153846154 1521573146601
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 38158
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 14 0.5714285714285714 1521573206608
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 38422
received auth hello!
{ authId: 401, nonce: <Buffer c0 49 29 7c 5e 9d 51 2c> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '016244C72DA0',
  notBefore: 2018-03-20T18:57:06.000Z,
  notAfter: 2018-03-21T18:58:46.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '95:CD:E4:15:B9:6C:17:54:BE:65:78:27:97:BD:A5:22:95:F7:27:04',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B95EF3029A4C4FAE066EFDE0A6119C37979EDB5A64C834CFDC68175183A2CCB6F817A6CEE1A9EF3E562CF75048E8894B6036030296F313DEBF7C1069E42825C46A5F1F6D69FFE10EE6D73B7805503AA7E6A4C2FF62C2E4D5BF7079FBED00C4B24480D5BC43B7B3B042025990D06DEE0A0388CF2AE7F4B313EF564F2EB3931C44FD1DBD6DFA6DA12843C6DBAAE1EFBC5E7EEDA9407AE6D78B6211169F194056CA6F9CD9F20F33FE469D35BCC944D43D2ECB947F73AF95BB5530BFF2A9B92CA16EB949D06EB8218BBBEC8EA009AC9F6C53C626A2796484448AEDAAB3D19834BA2A19D35D0E105AD47B9A6B3E1589517039E098E992676ED418010E608FA312B251',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJExy2gMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMDE4NTcwNloXDTE4MDMyMTE4NTg0NlowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC5XvMCmkxPrgZu/eCmEZw3l57bWmTINM/caBdRg6LMtvgXps7h\nqe8+Viz3UEjoiUtgNgMClvMT3r98EGnkKCXEal8fbWn/4Q7m1zt4BVA6p+akwv9i\nwuTVv3B5++0AxLJEgNW8Q7ezsEICWZDQbe4KA4jPKuf0sxPvVk8us5McRP0dvW36\nbaEoQ8bbquHvvF5+7alAeubXi2IRFp8ZQFbKb5zZ8g8z/kadNbzJRNQ9LsuUf3Ov\nlbtVML/yqbksoW65SdBuuCGLu+yOoAmsn2xTxiaieWSERIrtqrPRmDS6KhnTXQ4Q\nWtR7mms+FYlRcDngmOmSZ27UGAEOYI+jErJRAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAL1++4YVQ8b1jHzb8TObsFDOpugdFIHP\n8D83P3/hBYNvo26azw58Lw9t8YqRHKITUxufoCgBUH3y21qm3F0YosKz6QvvZoe5\n3g7/62TAIQgnTxrDnCjXfbRhRSIfAPLBmDtGkUEd887I2dkPxIZfuF18NvR3gwTF\n03Bb3djQAvbBYA7zLYUCwJAvhsw3A9zhL2Kp/ELaorh9AG64nz4oN6nq9RwHd7Tp\nPcaaLV03zuCAonUvDRMcUlkr0k6Jfrxjc9FFhCBbzF+BnQaClUbLnYes7KnuceAD\nFuOsFNCOd0nJwkzHVkexCgTK9F/EsZh2Wtqq6/1/fTstrQXfVdbyDFg=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 2
to: 3
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 15 0.5333333333333333 1521573266617
connected to auth! from local port 38678
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 16 0.5 1521573326625
connected to auth! from local port 38950
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 17 0.47058823529411764 1521573386635
connected to auth! from local port 39222
received auth hello!
{ authId: 401, nonce: <Buffer 06 aa c8 93 02 d8 87 51> }
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
