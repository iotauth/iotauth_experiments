changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s517.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's517',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 51 49 42 41 41 4b 43 41 51 45 41 75 6e ... > }
Handler: listening on port 22100
s517:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300739
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 38972
received auth hello!
{ authId: 503, nonce: <Buffer 63 94 4e a1 88 82 f3 4c> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer e8 a1 5d 23 4c df 23 3e>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer d8 22 a8 68 2d b9 bc 8a d1 df 10 1e 5b 08 25 1b>,
  macKeyVal: <Buffer b1 7e 18 af 1d bb 81 1c 0b 3e 30 72 05 62 1b d3 da 78 a1 29 b4 a9 24 82 52 4a 37 bf a6 d3 84 ec>,
  absValidity: 2018-03-21T04:23:41.272Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d9 0b 6d 45 2e 5f 1f bf>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d9 0b 6d 45 2e 5f 1f bf> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.83:33438',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300744
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 39242
received auth hello!
{ authId: 503, nonce: <Buffer cc 0f e7 d4 50 e7 90 b2> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 34 7c 21 62 65 3d e0 3c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 38 bc b4 87 d7 20 a9 0b>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 38 bc b4 87 d7 20 a9 0b> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.83:33708',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300749
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 39510
received auth hello!
{ authId: 503, nonce: <Buffer 8b 84 f0 87 0f a8 b1 de> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer f6 dd 47 da 18 6f 25 0c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f9 cf aa 50 8d 13 c0 93>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer f9 cf aa 50 8d 13 c0 93> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.83:33978',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300754
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 39780
received auth hello!
{ authId: 503, nonce: <Buffer a9 e5 e7 3c 99 2b e3 f6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 61 f0 46 5f 7b 24 0a 20>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 66 97 69 37 f0 28 13 01>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 66 97 69 37 f0 28 13 01> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.83:34248',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300759
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40052
received auth hello!
{ authId: 503, nonce: <Buffer ed 8d 48 70 3d ea e0 93> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 2a 8c ab d2 64 ad a6 35>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 51 b8 31 87 50 c6 d2 4a>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 51 b8 31 87 50 c6 d2 4a> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.83:34518',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300764
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 40320
received auth hello!
{ authId: 503, nonce: <Buffer 11 2a 44 d4 91 80 42 31> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer da 72 fb a9 e6 08 d1 9a>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 36 65 8b ef 2a 57 99 ca>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 36 65 8b ef 2a 57 99 ca> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.83:34788',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
