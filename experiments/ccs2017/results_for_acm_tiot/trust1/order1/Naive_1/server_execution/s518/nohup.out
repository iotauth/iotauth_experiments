changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s518.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's518',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 6d 48 ... > }
Handler: listening on port 22100
s518:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400003
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 47642
received auth hello!
{ authId: 504, nonce: <Buffer d8 3b 2f af 28 5d 5d 5e> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 43 97 88 a1 e4 e1 49 c6>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 41 ef 04 1b fb e2 e6 42 5f 52 45 7f 8d a8 80 74>,
  macKeyVal: <Buffer ce 79 2d 7c e7 12 55 a6 82 a9 6e 81 a2 30 b3 0b af 96 d5 62 8a 66 54 b5 d9 7d 52 80 9e b6 59 b0>,
  absValidity: 2018-03-20T18:07:56.868Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 13 80 10 b5 34 9c a8 55>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 13 80 10 b5 34 9c a8 55> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.84:56982',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400005
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 47670
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 39 88 c0 a7 47 e5 0b 2a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 06 81 21 1b 14 65 03 fe>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer ee e8 28 c9 1d c6 44 34>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer ee e8 28 c9 1d c6 44 34> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.85:44236',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400009
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 47912
received auth hello!
{ authId: 504, nonce: <Buffer a8 f3 e4 d4 ad 5f a1 8f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 78 e4 29 62 bd 17 39 24>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f4 96 e2 b9 ea d2 fb 8f>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer f4 96 e2 b9 ea d2 fb 8f> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.84:57252',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400011
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 47940
received auth hello!
{ authId: 504, nonce: <Buffer 77 53 ba 01 f1 4c e8 fc> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 76 55 1b 8e 8f aa 91 19>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 96 52 4d f1 68 07 96 de>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 96 52 4d f1 68 07 96 de> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.85:44506',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400015
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48182
received auth hello!
{ authId: 504, nonce: <Buffer 34 93 db 92 70 4d 89 46> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 06 d6 2b 73 34 87 bf 08>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 8d dd 2c 20 f9 eb f1 c0>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 8d dd 2c 20 f9 eb f1 c0> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.84:57522',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400017
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48210
received auth hello!
{ authId: 504, nonce: <Buffer 98 22 0c 52 10 1f b7 92> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 12 7e 57 24 db 12 3c a2>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer df b9 42 6b 07 61 94 ee>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer df b9 42 6b 07 61 94 ee> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.85:44776',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400021
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48452
received auth hello!
{ authId: 504, nonce: <Buffer 33 8b 9c f3 b3 2c 8c b8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 19 26 b0 85 ad 94 73 07>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 91 33 04 8b ba 55 17 b1>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 91 33 04 8b ba 55 17 b1> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.84:57794',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400023
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48480
received auth hello!
{ authId: 504, nonce: <Buffer 75 ae bc c4 ba b9 e3 83> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 1a 58 02 22 4f 63 3c a1>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 57 f7 9b 48 72 c3 2c 8c>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 57 f7 9b 48 72 c3 2c 8c> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.85:45046',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400027
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48722
received auth hello!
{ authId: 504, nonce: <Buffer ce 46 8c 02 f6 eb 86 53> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 42 f9 d0 9d f7 0c 7f cf>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 59 2c 44 43 a6 ea e6 50>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 59 2c 44 43 a6 ea e6 50> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.84:58064',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400029
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48750
received auth hello!
{ authId: 504, nonce: <Buffer 8c da ad 0c cd bc af 5e> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ef 6c 91 54 4a 0f 19 12>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 0a 24 c2 86 ed 19 ca fb>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 0a 24 c2 86 ed 19 ca fb> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.85:45316',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400033
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 48992
received auth hello!
{ authId: 504, nonce: <Buffer 77 8b b7 9f 76 3a 81 96> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ae 4e 63 b0 68 dc 00 91>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4a 1c 1d ad 47 58 bd cd>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 4a 1c 1d ad 47 58 bd cd> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 10,
  remoteAddress: '::ffff:10.0.1.84:58332',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 10 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 10 }
specified socketID: 10
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400035
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 49020
received auth hello!
{ authId: 504, nonce: <Buffer 2d e9 b8 8d 30 40 a8 ef> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 34 c9 35 49 3c 63 4f 80>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer a6 d0 ce 8c d2 68 25 6d>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer a6 d0 ce 8c d2 68 25 6d> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 11,
  remoteAddress: '::ffff:10.0.1.85:45586',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 11 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 11 }
specified socketID: 11
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #11 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100099
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #10 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100100
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 1
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 37760
received auth hello!
{ authId: 503, nonce: <Buffer 16 9c 34 4a 24 c4 08 3e> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100109
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 37998
received auth hello!
{ authId: 503, nonce: <Buffer 8e a1 2f 3a fe a7 23 99> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100111
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
Handler: Error in server - details: handshake2 timed out...
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 43162
received auth hello!
{ authId: 403, nonce: <Buffer 50 70 d9 59 52 56 d9 c8> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100118
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 43408
received auth hello!
{ authId: 403, nonce: <Buffer 97 ca df 9d 8c b9 d2 9e> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100122
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 56780
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100129
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 57000
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100132
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 57052
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100140
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in migration to another Auth : migrationFailureCount: 3
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 45334
received auth hello!
{ authId: 501, nonce: <Buffer 5e 98 6b 23 b5 51 b1 cb> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth501',
     commonName: '10.0.1.4' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth504',
     commonName: '10.0.0.7' },
  serial: '0162445E9CB5',
  notBefore: 2018-03-20T17:02:53.000Z,
  notAfter: 2018-03-21T17:04:33.000Z,
  subjectHash: '3f39c028',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'FC:F4:39:B9:6B:A2:0C:F3:70:D1:5D:A9:5F:73:03:C4:F5:CF:DE:3E',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B305220D50439E5096824AA1AB00C052735B10C920A6954E368F2A70060CC90063ED5E8EE75398A6A4382D1450737A4C21C6F1EF0176123C3CDE36A6EC846FB8849CD3857B127E3E43D98D96191800E693719D3994663F4943572AB6E9E53C1459B99A1586B1E885DF736E1418BD84566DE57F30A343015FF61EAF5FE8816C7D1ACFD236F7FD92B1033DB958ECAC4CFC84FA8CAAA0FCBB8E38ECC560E7D89034E1E3962EECF62A21D5C12FA09A8B47420FC4A2939B3586EF31E55F64363D7ED3E9216401B22D4F84AC641C4325D695B28AD28C9216B4479DF19B50B1C4D2A122FE51BAAFB7D4507CBBBBEFCD5215DF00A1E189DEFFAB4B74C0EB4F9BF8ED9DE1',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.4' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 501,
  host: '10.0.1.4',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEXpy1MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg1MDQxETAPBgNVBAMMCDEwLjAuMC43MB4XDTE4MDMy\nMDE3MDI1M1oXDTE4MDMyMTE3MDQzM1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMTERMA8GA1UEAwwIMTAuMC4xLjQwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCzBSINUEOeUJaCSqGrAMBSc1sQySCmlU42jypwBgzJAGPtXo7n\nU5impDgtFFBzekwhxvHvAXYSPDzeNqbshG+4hJzThXsSfj5D2Y2WGRgA5pNxnTmU\nZj9JQ1cqtunlPBRZuZoVhrHohd9zbhQYvYRWbeV/MKNDAV/2Hq9f6IFsfRrP0jb3\n/ZKxAz25WOysTPyE+oyqoPy7jjjsxWDn2JA04eOWLuz2KiHVwS+gmotHQg/EopOb\nNYbvMeVfZDY9ftPpIWQBsi1PhKxkHEMl1pWyitKMkha0R53xm1CxxNKhIv5Ruq+3\n1FB8u7vvzVIV3wCh4Yne/6tLdMDrT5v47Z3hAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQQwDQYJKoZIhvcNAQELBQADggEBACIcBRbwyiZxlsh/7V/3n3xAekLolm5g\nuJwp4uIYfiCCLMlaA03ulvmIuUoraz+xvkXt/RumbiWIcobgq0wM2hW2Ab9KM3KK\nrstl7hCNdpDowDj/eA+GGdbR0IXn7lwFbV39MZXBRraNLtaqBqIR6IrCsD5AghI6\nyzePbQjW44ff74sVs+Yydz4BUc0hoBs1zYV46TKnLN46CDKMN3A7xSeD8hpylBgq\nBucFmVxe3vjLoG4lIUxgtbulTOtvTIEPYNZzz56+3fGZf6vOI0kSlzWgOmwfO7Fn\nHZaoB5b9J3iWcmj1AfhrHemZ1JGSd0x9u6wLox4bdPtUe1BKCcpHqv0=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 3
to: 4
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100143
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45366
received auth hello!
{ authId: 501, nonce: <Buffer f4 cf 31 51 cd 63 93 23> }
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Connection with Auth timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100152
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45608
received auth hello!
{ authId: 501, nonce: <Buffer a5 02 8f cb 2e e4 9b d3> }
disconnected from auth
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100153
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45616
received auth hello!
{ authId: 501, nonce: <Buffer fa 89 5f da f1 6e ac 02> }
Handler: Error in server - details: handshake2 timed out...
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Connection with Auth timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Connection with Auth timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100163
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45858
received auth hello!
{ authId: 501, nonce: <Buffer 6c 0f e5 0b 73 4f f8 7d> }
disconnected from auth
Unidentified client connected
Handler: Error in server - details: handshake2 timed out...
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100165
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 45888
received auth hello!
{ authId: 501, nonce: <Buffer e7 64 fd 64 1b 90 d5 a2> }
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Connection with Auth timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Connection with Auth timed out...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100175
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 46132
received auth hello!
{ authId: 501, nonce: <Buffer a1 04 e8 58 a5 e1 51 5b> }
disconnected from auth
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100177
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
Handler: Error in server - details: handshake2 timed out...
connected to auth! from local port 46162
received auth hello!
{ authId: 501, nonce: <Buffer 9a 8c ce fc 4a bb 2d 9d> }
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Connection with Auth timed out...
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
