changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s519.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's519',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 76 31 ... > }
Handler: listening on port 22100
s519:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400006
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33280
Unidentified client connected
received auth hello!
{ authId: 504, nonce: <Buffer 90 cf 3d 47 3c fa e5 10> }
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400007
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer d7 77 36 ff 75 06 f0 a0>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 12 15 aa ae 6b fc ae 8b 1f d7 f9 5d 36 5f e7 7f>,
  macKeyVal: <Buffer 43 f4 36 37 0d 98 8d 29 40 47 4e 0b 4a 94 ff ff 9b 7d 5f f1 84 bb 62 b3 18 4f b1 4f d5 73 20 b4>,
  absValidity: 2018-03-20T18:08:07.828Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 13 fb b7 e7 bb 0d 41 1f>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 13 fb b7 e7 bb 0d 41 1f> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.86:41804',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
connected to auth! from local port 33300
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 7f e3 57 1a 83 9b 6f 3a> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 72 1e 2e 7c f8 d7 7c 42>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer f4 ea 79 00 30 37 3f 15 4a a4 e0 79 c2 4d 52 e8>,
  macKeyVal: <Buffer 9c bd d6 cd 98 a2 9f 2e 51 37 41 d9 b9 99 75 da 32 b4 96 98 21 d1 39 b7 7c 0d 62 55 7f b4 9d 93>,
  absValidity: 2018-03-20T18:08:09.901Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer a3 32 b4 7c df a3 d4 bc>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer a3 32 b4 7c df a3 d4 bc> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.87:43090',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400012
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33554
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400013
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
received auth hello!
{ authId: 504, nonce: <Buffer c9 16 01 5d 12 31 6b 52> }
connected to auth! from local port 33570
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 71 e0 46 79 22 3e ad a7>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 42 49 bc 5a c9 35 60 62>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 42 49 bc 5a c9 35 60 62> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.86:42078',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer b9 48 63 1e a7 a3 eb a9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 77 13 af 0e 60 e7 54 09>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer ab c5 dc 01 6f 8a 41 be>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer ab c5 dc 01 6f 8a 41 be> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.87:43360',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400018
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33824
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400019
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 33838
received auth hello!
{ authId: 504, nonce: <Buffer 7f c6 0a f6 18 52 49 d1> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer aa 0c 5a 0d c4 ea 6d 80>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer c7 01 3d ce 3e f8 ad 69>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer c7 01 3d ce 3e f8 ad 69> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.86:42348',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 03 a8 f4 91 21 4a 56 92> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e4 eb f0 e7 86 26 05 0d>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 60 da 8f 98 c5 f8 58 37>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 60 da 8f 98 c5 f8 58 37> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.87:43628',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400024
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34094
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400025
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34106
received auth hello!
{ authId: 504, nonce: <Buffer f2 a3 87 ff 15 39 de 9a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c1 c3 2f fb f7 58 12 4b>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 4d b1 f3 c0 9b 82 3e 41>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 4d b1 f3 c0 9b 82 3e 41> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 6,
  remoteAddress: '::ffff:10.0.1.86:42618',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 6 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 6 }
specified socketID: 6
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer c1 ca 13 b0 4e 86 c2 b6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 64 eb 20 f3 fb ce 98 da>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer da 68 d6 71 6b 68 a0 22>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer da 68 d6 71 6b 68 a0 22> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 7,
  remoteAddress: '::ffff:10.0.1.87:43898',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 7 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 7 }
specified socketID: 7
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #6 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400030
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34364
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #7 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400031
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34376
received auth hello!
{ authId: 504, nonce: <Buffer 1c ed c3 9f 2f 0a f0 d6> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ea 32 83 da b2 07 ea 97>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 6e fa 42 bb 25 08 42 8d>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 6e fa 42 bb 25 08 42 8d> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 8,
  remoteAddress: '::ffff:10.0.1.86:42888',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 8 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 8 }
specified socketID: 8
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 504, nonce: <Buffer 29 99 92 50 0a 8c b8 a5> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b3 de c7 83 db cc f5 3f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 39 54 d4 aa 9b 7b f8 59>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 39 54 d4 aa 9b 7b f8 59> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 9,
  remoteAddress: '::ffff:10.0.1.87:44168',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 9 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 9 }
specified socketID: 9
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #8 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50400036
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 34634
Handler: Error in server - details: Disconnected from auth before getting session key response
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100098
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 1
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100110
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 47720
received auth hello!
{ authId: 503, nonce: <Buffer b3 c6 aa ba a7 b5 2a 9a> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100121
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 48010
received auth hello!
{ authId: 503, nonce: <Buffer 58 45 a7 63 14 01 e2 9c> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100131
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 37232
received auth hello!
{ authId: 403, nonce: <Buffer fc 2a 0b de 1c ab 97 d7> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100144
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 37532
received auth hello!
{ authId: 403, nonce: <Buffer ca c7 51 e9 83 6b d8 97> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in server - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100151
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 51390
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #9 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100154
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
Handler: Error in server - details: handshake2 timed out...
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 51412
Handler: Error in server - details: handshake2 timed out...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100167
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100168
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in server - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 34936
connected to auth! from local port 34938
Handler: Error in server - details: handshake2 timed out...
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 501, nonce: <Buffer c8 a7 86 9b cc 89 de 5e> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth501',
     commonName: '10.0.1.4' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth504',
     commonName: '10.0.0.7' },
  serial: '0162445E9CB5',
  notBefore: 2018-03-20T17:02:53.000Z,
  notAfter: 2018-03-21T17:04:33.000Z,
  subjectHash: '3f39c028',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'FC:F4:39:B9:6B:A2:0C:F3:70:D1:5D:A9:5F:73:03:C4:F5:CF:DE:3E',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B305220D50439E5096824AA1AB00C052735B10C920A6954E368F2A70060CC90063ED5E8EE75398A6A4382D1450737A4C21C6F1EF0176123C3CDE36A6EC846FB8849CD3857B127E3E43D98D96191800E693719D3994663F4943572AB6E9E53C1459B99A1586B1E885DF736E1418BD84566DE57F30A343015FF61EAF5FE8816C7D1ACFD236F7FD92B1033DB958ECAC4CFC84FA8CAAA0FCBB8E38ECC560E7D89034E1E3962EECF62A21D5C12FA09A8B47420FC4A2939B3586EF31E55F64363D7ED3E9216401B22D4F84AC641C4325D695B28AD28C9216B4479DF19B50B1C4D2A122FE51BAAFB7D4507CBBBBEFCD5215DF00A1E189DEFFAB4B74C0EB4F9BF8ED9DE1',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.4' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 501,
  host: '10.0.1.4',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEXpy1MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg1MDQxETAPBgNVBAMMCDEwLjAuMC43MB4XDTE4MDMy\nMDE3MDI1M1oXDTE4MDMyMTE3MDQzM1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMTERMA8GA1UEAwwIMTAuMC4xLjQwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCzBSINUEOeUJaCSqGrAMBSc1sQySCmlU42jypwBgzJAGPtXo7n\nU5impDgtFFBzekwhxvHvAXYSPDzeNqbshG+4hJzThXsSfj5D2Y2WGRgA5pNxnTmU\nZj9JQ1cqtunlPBRZuZoVhrHohd9zbhQYvYRWbeV/MKNDAV/2Hq9f6IFsfRrP0jb3\n/ZKxAz25WOysTPyE+oyqoPy7jjjsxWDn2JA04eOWLuz2KiHVwS+gmotHQg/EopOb\nNYbvMeVfZDY9ftPpIWQBsi1PhKxkHEMl1pWyitKMkha0R53xm1CxxNKhIv5Ruq+3\n1FB8u7vvzVIV3wCh4Yne/6tLdMDrT5v47Z3hAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQQwDQYJKoZIhvcNAQELBQADggEBACIcBRbwyiZxlsh/7V/3n3xAekLolm5g\nuJwp4uIYfiCCLMlaA03ulvmIuUoraz+xvkXt/RumbiWIcobgq0wM2hW2Ab9KM3KK\nrstl7hCNdpDowDj/eA+GGdbR0IXn7lwFbV39MZXBRraNLtaqBqIR6IrCsD5AghI6\nyzePbQjW44ff74sVs+Yydz4BUc0hoBs1zYV46TKnLN46CDKMN3A7xSeD8hpylBgq\nBucFmVxe3vjLoG4lIUxgtbulTOtvTIEPYNZzz56+3fGZf6vOI0kSlzWgOmwfO7Fn\nHZaoB5b9J3iWcmj1AfhrHemZ1JGSd0x9u6wLox4bdPtUe1BKCcpHqv0=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 3
to: 4
disconnected from auth
received auth hello!
{ authId: 501, nonce: <Buffer 2d bc 30 f7 03 36 67 1d> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth501',
     commonName: '10.0.1.4' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth504',
     commonName: '10.0.0.7' },
  serial: '0162445E9CB5',
  notBefore: 2018-03-20T17:02:53.000Z,
  notAfter: 2018-03-21T17:04:33.000Z,
  subjectHash: '3f39c028',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'FC:F4:39:B9:6B:A2:0C:F3:70:D1:5D:A9:5F:73:03:C4:F5:CF:DE:3E',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B305220D50439E5096824AA1AB00C052735B10C920A6954E368F2A70060CC90063ED5E8EE75398A6A4382D1450737A4C21C6F1EF0176123C3CDE36A6EC846FB8849CD3857B127E3E43D98D96191800E693719D3994663F4943572AB6E9E53C1459B99A1586B1E885DF736E1418BD84566DE57F30A343015FF61EAF5FE8816C7D1ACFD236F7FD92B1033DB958ECAC4CFC84FA8CAAA0FCBB8E38ECC560E7D89034E1E3962EECF62A21D5C12FA09A8B47420FC4A2939B3586EF31E55F64363D7ED3E9216401B22D4F84AC641C4325D695B28AD28C9216B4479DF19B50B1C4D2A122FE51BAAFB7D4507CBBBBEFCD5215DF00A1E189DEFFAB4B74C0EB4F9BF8ED9DE1',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.4' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 501,
  host: '10.0.1.2',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEXpy1MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg1MDQxETAPBgNVBAMMCDEwLjAuMC43MB4XDTE4MDMy\nMDE3MDI1M1oXDTE4MDMyMTE3MDQzM1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMTERMA8GA1UEAwwIMTAuMC4xLjQwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQCzBSINUEOeUJaCSqGrAMBSc1sQySCmlU42jypwBgzJAGPtXo7n\nU5impDgtFFBzekwhxvHvAXYSPDzeNqbshG+4hJzThXsSfj5D2Y2WGRgA5pNxnTmU\nZj9JQ1cqtunlPBRZuZoVhrHohd9zbhQYvYRWbeV/MKNDAV/2Hq9f6IFsfRrP0jb3\n/ZKxAz25WOysTPyE+oyqoPy7jjjsxWDn2JA04eOWLuz2KiHVwS+gmotHQg/EopOb\nNYbvMeVfZDY9ftPpIWQBsi1PhKxkHEMl1pWyitKMkha0R53xm1CxxNKhIv5Ruq+3\n1FB8u7vvzVIV3wCh4Yne/6tLdMDrT5v47Z3hAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQQwDQYJKoZIhvcNAQELBQADggEBACIcBRbwyiZxlsh/7V/3n3xAekLolm5g\nuJwp4uIYfiCCLMlaA03ulvmIuUoraz+xvkXt/RumbiWIcobgq0wM2hW2Ab9KM3KK\nrstl7hCNdpDowDj/eA+GGdbR0IXn7lwFbV39MZXBRraNLtaqBqIR6IrCsD5AghI6\nyzePbQjW44ff74sVs+Yydz4BUc0hoBs1zYV46TKnLN46CDKMN3A7xSeD8hpylBgq\nBucFmVxe3vjLoG4lIUxgtbulTOtvTIEPYNZzz56+3fGZf6vOI0kSlzWgOmwfO7Fn\nHZaoB5b9J3iWcmj1AfhrHemZ1JGSd0x9u6wLox4bdPtUe1BKCcpHqv0=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 4
to: 5
disconnected from auth
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
Handler: Error in server - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in server - details: Error occurred in migration request: Auth hello timedout ...
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100179
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57000
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 40100180
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 57008
Handler: Error in server - details: handshake2 timed out...
Handler: Error in server - details: handshake2 timed out...
received auth hello!
{ authId: 402, nonce: <Buffer 45 d6 3f 76 59 1a 4b 7c> }
disconnected from auth
received auth hello!
{ authId: 402, nonce: <Buffer 22 a2 46 71 a1 14 4f 0a> }
disconnected from auth
Unidentified client disconnected
Handler: Error in server - details: Closed during comm init from undefined:undefined
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
