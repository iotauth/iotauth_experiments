changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s517.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's517',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 77 79 ... > }
Handler: listening on port 22100
s517:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300881
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 51194
received auth hello!
{ authId: 503, nonce: <Buffer 1c 66 a7 dc df df cf e6> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer ed d9 08 ec e7 89 7c 8d>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 73 5d fa d1 b8 19 9f eb b2 45 29 42 28 93 4c 50>,
  macKeyVal: <Buffer 24 22 72 39 c3 78 02 ed 2c 8b 6e 5f 7e cb a4 58 82 72 01 b4 bc 98 52 e2 c5 dc fd 41 7b 73 93 ad>,
  absValidity: 2018-03-21T09:03:44.308Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f4 ae fa 69 b1 8e 83 94>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer f4 ae fa 69 b1 8e 83 94> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.83:45662',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300886
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 51464
received auth hello!
{ authId: 503, nonce: <Buffer f3 6a ed 97 22 92 be 7a> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b5 6c b4 1a 5d eb 78 85>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 45 ce 66 e6 4f 57 76 95>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 45 ce 66 e6 4f 57 76 95> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.83:45932',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300891
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 51734
received auth hello!
{ authId: 503, nonce: <Buffer 94 aa d3 4a 8c b0 cd 77> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 25 0b e3 15 1a af a8 96>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 53 98 7f a5 0a 20 81 1b>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 53 98 7f a5 0a 20 81 1b> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.83:46202',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300896
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 52004
received auth hello!
{ authId: 503, nonce: <Buffer 47 a1 a5 a7 53 d5 aa a9> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 97 19 86 b6 f8 92 5a 96>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 57 2c 37 10 bf 4c 03 28>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 57 2c 37 10 bf 4c 03 28> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.83:46472',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300901
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 52274
received auth hello!
{ authId: 503, nonce: <Buffer 1f a5 66 a3 91 5c f7 8b> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer d0 c6 92 e0 5d c3 0e 5f>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 71 3b ab 68 59 fe d1 96>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 71 3b ab 68 59 fe d1 96> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.83:46742',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50300906
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 52544
received auth hello!
{ authId: 503, nonce: <Buffer 33 ea 92 50 46 b8 7c 46> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a1 f1 df f9 32 87 8c fe>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer b7 08 30 c3 e6 d4 bf 88>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer b7 08 30 c3 e6 d4 bf 88> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.83:47012',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
