changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for echoServer: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Servers/s517.config
initializing secure comm server...
Session protocol: TCP
current parameters: { migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { migrationEnabled: false,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 's517',
  group: 'Servers',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 6f 77 49 42 41 41 4b 43 41 51 45 41 77 79 ... > }
Handler: listening on port 22100
s517:Servers prompt>
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50301515
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58324
received auth hello!
{ authId: 503, nonce: <Buffer 50 ae d4 b5 40 d5 0b d0> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 2a 30 58 62 59 59 f5 68>
auth nonce verified
updating distribution key: { cipherKeyVal: <Buffer 85 a0 da 3f ee 73 68 69 67 f5 1e 6e 01 db 35 2b>,
  macKeyVal: <Buffer c2 ff 3a ca b0 19 7a ea 7c f2 fd 46 f9 c7 e1 7a 02 47 19 ac fb 9f cf bd 55 de 33 be 7a 0f 62 e1>,
  absValidity: 2018-03-22T01:56:16.844Z }
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f8 94 55 fb 7a 7b 4f 85>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer f8 94 55 fb 7a 7b 4f 85> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 0,
  remoteAddress: '::ffff:10.0.1.83:52790',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 0 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 0 }
specified socketID: 0
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #0 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50301520
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58594
received auth hello!
{ authId: 503, nonce: <Buffer 17 f9 0d 11 3b 4b bb 19> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a9 25 7d 75 d1 3b 1d 43>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 6c 8c 41 86 3f 6a 11 73>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer 6c 8c 41 86 3f 6a 11 73> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 1,
  remoteAddress: '::ffff:10.0.1.83:53060',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 1 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 1 }
specified socketID: 1
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #1 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50301525
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 58864
received auth hello!
{ authId: 503, nonce: <Buffer d1 f2 c5 48 1e 0c b1 9d> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer fd 43 f4 48 84 ec 2e d7>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer 2d cb fd 52 8b 6d 90 2d>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer 2d cb fd 52 8b 6d 90 2d> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 2,
  remoteAddress: '::ffff:10.0.1.83:53330',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 2 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 2 }
specified socketID: 2
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #2 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50301530
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 59134
received auth hello!
{ authId: 503, nonce: <Buffer e2 db 91 cf 96 d9 c2 24> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer c8 fb 64 f0 0b 6a ff 30>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer f6 55 81 18 bb da 4e 1f>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer f6 55 81 18 bb da 4e 1f> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 3,
  remoteAddress: '::ffff:10.0.1.83:53600',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 3 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 3 }
specified socketID: 3
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #3 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50301535
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 59402
received auth hello!
{ authId: 503, nonce: <Buffer 05 22 bb 42 27 0a ed 8c> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a6 a3 d4 de ef 0b f8 92>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer bb aa 58 2c e3 9a 10 49>
switching to HANDSHAKE_2_SENT
disconnected from auth
received session key handshake3!
{ replyNonce: <Buffer bb aa 58 2c e3 9a 10 49> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 4,
  remoteAddress: '::ffff:10.0.1.83:53870',
  status: 'open' }
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 4 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 4 }
specified socketID: 4
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #4 closed
Unidentified client connected
received session key handshake1
switching to HANDSHAKE_1_RECEIVED state.
session key id: 50301540
session key NOT found! sending session key id to AuthService
Distribution protocol: TCP
connected to auth! from local port 59674
received auth hello!
{ authId: 503, nonce: <Buffer f1 fb 55 79 aa 71 36 ff> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer f8 dc f7 e9 27 82 5e c5>
auth nonce verified
received 1 keys
Session key id is as expected
server ret: [object Object]
chosen nonce: <Buffer d4 57 cf 94 88 6d a8 37>
switching to HANDSHAKE_2_SENT
received session key handshake3!
{ replyNonce: <Buffer d4 57 cf 94 88 6d a8 37> }
client authenticated/authorized by solving nonce!
switching to IN_COMM
Handler: secure connection with the client established.
{ id: 5,
  remoteAddress: '::ffff:10.0.1.83:54140',
  status: 'open' }
disconnected from auth
received secure communication!
Received seqNum: 0
data received from server via secure communication
Handler: socketID: 5 data: data1
toSend: { data: <Buffer 64 61 74 61 31>, id: 5 }
specified socketID: 5
Unidentified client disconnected
Handler: secure connection with the client closed.
socket #5 closed
