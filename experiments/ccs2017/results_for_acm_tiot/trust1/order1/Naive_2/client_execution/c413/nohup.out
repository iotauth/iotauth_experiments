changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c413.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c413',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 41 49 42 41 41 4b 43 41 51 45 41 77 34 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521569559000
connected to auth! from local port 36892
received auth hello!
{ authId: 402, nonce: <Buffer 93 30 2c 0a 14 87 96 4e> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 19 b3 c3 9a 45 cf 45 cb>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer e0 ca 6d f0 86 a9 22 cb d8 fa 18 79 fb 98 25 d8>,
  macKeyVal: <Buffer 60 1e ee a3 f1 ab 19 0b 47 a2 72 d0 4a 9d 08 c8 14 f5 71 9e 85 7a 2d bf 44 86 4c 17 31 ff 1e eb>,
  absValidity: 2018-03-20T19:12:40.792Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200202,
  cipherKeyVal: <Buffer d6 4a b6 d2 22 5b 74 67 58 39 59 dc d5 53 13 e8>,
  macKeyVal: <Buffer fa 3b 61 78 c2 44 53 4c 48 bf 85 0a 74 18 43 62 c4 c9 f3 d7 8c 23 83 a4 26 d8 52 65 2d ff 99 ae>,
  absValidity: 2018-03-21T18:12:40.792Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200202,
     cipherKeyVal: <Buffer d6 4a b6 d2 22 5b 74 67 58 39 59 dc d5 53 13 e8>,
     macKeyVal: <Buffer fa 3b 61 78 c2 44 53 4c 48 bf 85 0a 74 18 43 62 c4 c9 f3 d7 8c 23 83 a4 26 d8 52 65 2d ff 99 ae>,
     absValidity: 2018-03-21T18:12:40.792Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 8c ba 1f 53 5b b4 19 8b>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:12:42 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521569563421
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521569619054
connected to auth! from local port 37078
received auth hello!
{ authId: 402, nonce: <Buffer ba 9d 75 a7 c9 ad 02 e8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 22 57 79 30 81 0c 54 ba>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200209,
  cipherKeyVal: <Buffer 75 d1 0a b3 6d f4 e8 d7 99 1e b9 1f d8 2b 01 e8>,
  macKeyVal: <Buffer d3 f6 1f f4 00 3d eb 79 3e 26 19 1f d4 d5 33 c3 88 b0 44 60 c1 d6 89 2c cb 5f 31 ef 7e 3a 85 90>,
  absValidity: 2018-03-21T18:13:40.857Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200209,
     cipherKeyVal: <Buffer 75 d1 0a b3 6d f4 e8 d7 99 1e b9 1f d8 2b 01 e8>,
     macKeyVal: <Buffer d3 f6 1f f4 00 3d eb 79 3e 26 19 1f d4 d5 33 c3 88 b0 44 60 c1 d6 89 2c cb 5f 31 ef 7e 3a 85 90>,
     absValidity: 2018-03-21T18:13:40.857Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 08 9d 0d e5 46 cc a9 f5>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:13:43 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521569623501
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521569679105
connected to auth! from local port 37348
received auth hello!
{ authId: 402, nonce: <Buffer 45 41 08 c5 37 c6 8f 04> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 11 08 f2 4f 0d ae 69 78>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200216,
  cipherKeyVal: <Buffer a1 b1 10 ef 25 7f 02 b0 f6 32 b5 32 89 03 0f d7>,
  macKeyVal: <Buffer 4f 12 cb a2 cf dd 00 dd 07 a5 f2 ec 6b c1 4e 60 9b db 78 40 5d a0 38 10 57 cd 51 0e ff b8 b7 e5>,
  absValidity: 2018-03-21T18:14:40.917Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200216,
     cipherKeyVal: <Buffer a1 b1 10 ef 25 7f 02 b0 f6 32 b5 32 89 03 0f d7>,
     macKeyVal: <Buffer 4f 12 cb a2 cf dd 00 dd 07 a5 f2 ec 6b c1 4e 60 9b db 78 40 5d a0 38 10 57 cd 51 0e ff b8 b7 e5>,
     absValidity: 2018-03-21T18:14:40.917Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 75 0e 05 69 46 0b ca ca>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:14:43 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521569683543
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521569739161
connected to auth! from local port 37618
received auth hello!
{ authId: 402, nonce: <Buffer 3b 34 6a e7 14 8a 67 1f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 7f e8 7e 20 d8 3c 23 69>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200223,
  cipherKeyVal: <Buffer eb 9b df d5 33 da a7 33 10 83 d8 67 f4 18 47 bf>,
  macKeyVal: <Buffer f8 52 0b 41 45 19 35 e5 09 5e 57 09 9a 24 3e 9f f1 c2 9c 1a cf ab d9 cc a6 41 24 fd 0c e3 d4 c7>,
  absValidity: 2018-03-21T18:15:40.971Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200223,
     cipherKeyVal: <Buffer eb 9b df d5 33 da a7 33 10 83 d8 67 f4 18 47 bf>,
     macKeyVal: <Buffer f8 52 0b 41 45 19 35 e5 09 5e 57 09 9a 24 3e 9f f1 c2 9c 1a cf ab d9 cc a6 41 24 fd 0c e3 d4 c7>,
     absValidity: 2018-03-21T18:15:40.971Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 6c 56 1e 26 0b dc cc 7d>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:15:43 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521569743556
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521569799209
connected to auth! from local port 37888
received auth hello!
{ authId: 402, nonce: <Buffer bf 9b f5 b3 49 d1 c6 ec> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ec ff 85 f5 14 6d 54 66>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200230,
  cipherKeyVal: <Buffer 9f ad 35 3f fa b1 29 1b c9 1c 8e 28 57 89 de f6>,
  macKeyVal: <Buffer 16 a1 20 47 c2 09 f2 67 10 53 fd 00 45 67 94 5d 6e 0a 43 77 09 f1 52 ba 78 12 e7 fd f9 9a a3 bb>,
  absValidity: 2018-03-21T18:16:41.013Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200230,
     cipherKeyVal: <Buffer 9f ad 35 3f fa b1 29 1b c9 1c 8e 28 57 89 de f6>,
     macKeyVal: <Buffer 16 a1 20 47 c2 09 f2 67 10 53 fd 00 45 67 94 5d 6e 0a 43 77 09 f1 52 ba 78 12 e7 fd f9 9a a3 bb>,
     absValidity: 2018-03-21T18:16:41.013Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 72 a4 0e 69 58 5b d4 67>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:16:43 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521569803600
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521569859261
connected to auth! from local port 38158
received auth hello!
{ authId: 402, nonce: <Buffer 2b c5 1d bc ff a8 c9 61> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 54 eb 29 c3 44 c1 be 41>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200237,
  cipherKeyVal: <Buffer 73 15 56 df 72 e0 94 a9 dc c4 cd 39 3f 4d ad 83>,
  macKeyVal: <Buffer f7 fa ca 50 40 05 96 f3 02 11 4c 21 83 72 79 78 8c cd b6 83 41 20 7c 95 ae 5a 7e 20 e4 25 37 b5>,
  absValidity: 2018-03-21T18:17:41.067Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200237,
     cipherKeyVal: <Buffer 73 15 56 df 72 e0 94 a9 dc c4 cd 39 3f 4d ad 83>,
     macKeyVal: <Buffer f7 fa ca 50 40 05 96 f3 02 11 4c 21 83 72 79 78 8c cd b6 83 41 20 7c 95 ae 5a 7e 20 e4 25 37 b5>,
     absValidity: 2018-03-21T18:17:41.067Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 61 e4 b9 f7 ca af 8d 78>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:17:43 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521569863702
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521569919281
connected to auth! from local port 38428
received auth hello!
{ authId: 402, nonce: <Buffer ad c1 98 51 b1 50 87 d4> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 71 2c 4a 11 2a c2 2c e3>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200244,
  cipherKeyVal: <Buffer be cb 0e 79 ab f6 e5 6d b3 f4 c3 11 6b 64 23 b0>,
  macKeyVal: <Buffer 53 56 ce e8 f9 94 5a 24 e1 08 dd be 3b 43 d8 4b a6 50 44 26 a8 49 d3 c7 b9 aa 63 1e 03 bd 80 d7>,
  absValidity: 2018-03-21T18:18:41.122Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.16',
  serverPort: 22100,
  sessionKey: 
   { id: 40200244,
     cipherKeyVal: <Buffer be cb 0e 79 ab f6 e5 6d b3 f4 c3 11 6b 64 23 b0>,
     macKeyVal: <Buffer 53 56 ce e8 f9 94 5a 24 e1 08 dd be 3b 43 d8 4b a6 50 44 26 a8 49 d3 c7 b9 aa 63 1e 03 bd 80 d7>,
     absValidity: 2018-03-21T18:18:41.122Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 73 8e 42 89 71 bf 8f 8c>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:18:43 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521569923831
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521569979315
connected to auth! from local port 38694
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 9 0.7777777777777778 1521570039326
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 10 0.7 1521570099336
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 49418
received auth hello!
{ authId: 502, nonce: <Buffer 75 aa 58 a3 f8 ac 7c 7d> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 11 0.6363636363636364 1521570159346
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 49666
received auth hello!
{ authId: 502, nonce: <Buffer 38 61 ad c0 c9 7b 19 d0> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 12 0.5833333333333334 1521570219353
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 56710
received auth hello!
{ authId: 501, nonce: <Buffer 9b c8 81 b9 cf b4 47 c6> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 13 0.5384615384615384 1521570279364
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 56958
received auth hello!
{ authId: 501, nonce: <Buffer 3e 21 2d f9 95 cd 8f 74> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 14 0.5 1521570339375
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 47144
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 15 0.4666666666666667 1521570399382
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 47396
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 16 0.4375 1521570459389
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 58488
received auth hello!
{ authId: 403, nonce: <Buffer 5a 72 dd 48 e4 f9 e2 6c> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 17 0.4117647058823529 1521570519397
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 58748
received auth hello!
{ authId: 403, nonce: <Buffer 42 88 89 cd 9e 3a 80 4a> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 18 0.3888888888888889 1521570579408
failure in connection with Auth : authFailureCount: 10
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 3
to: 4
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 39164
received auth hello!
{ authId: 503, nonce: <Buffer dc d3 3d 62 ad 3b 62 ef> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth503',
     commonName: '10.0.1.6' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '0162449B557E',
  notBefore: 2018-03-20T18:09:13.000Z,
  notAfter: 2018-03-21T18:10:53.000Z,
  subjectHash: '5542437f',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '3C:AA:C7:02:26:ED:A0:5F:E6:73:73:C6:D1:0C:84:E7:C9:3A:0D:90',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'DE5B30AA46CAB50E9EB99610D7CD6F5A13A506E423E0B2FA7E5B5516308134D5EBA5029E1E86687304DE74F1EDC282AFF2BDBD5A1EEA4AB5A9C11B58BE559B6581427760281F7D05FB35B0241357C06845115CC2742374425A859E0CF161E9E28FB5DADEF2AD5312533F095CB0709A99F829AD0B3B1B19C8FB4E17DFB5D85CE6E65EA745001E8C0CC8AC5A752E195090E212D1563BE34185B3211F90F9135C8AD962B139057D6E600CF5797302C942DB7EEA5A0963E1105D1B46C227E6B60D0B1D7EF08EA4E9BE1220E5269AD51AB8E328F18D2AC5A2F47D0508AD6101DC087A6295158FC3BEDA4B4CD32EC8D3E6E2F67DC2962059753EE1281A41E463966327',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.6' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 503,
  host: '10.0.1.6',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEm1V+MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMDE4MDkxM1oXDTE4MDMyMTE4MTA1M1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMzERMA8GA1UEAwwIMTAuMC4xLjYwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQDeWzCqRsq1Dp65lhDXzW9aE6UG5CPgsvp+W1UWMIE01eulAp4e\nhmhzBN508e3Cgq/yvb1aHupKtanBG1i+VZtlgUJ3YCgffQX7NbAkE1fAaEURXMJ0\nI3RCWoWeDPFh6eKPtdre8q1TElM/CVywcJqZ+CmtCzsbGcj7Thfftdhc5uZep0UA\nHowMyKxadS4ZUJDiEtFWO+NBhbMhH5D5E1yK2WKxOQV9bmAM9XlzAslC237qWglj\n4RBdG0bCJ+a2DQsdfvCOpOm+EiDlJprVGrjjKPGNKsWi9H0FCK1hAdwIemKVFY/D\nvtpLTNMuyNPm4vZ9wpYgWXU+4SgaQeRjlmMnAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQYwDQYJKoZIhvcNAQELBQADggEBABVb9rf2T3ft1bpaAmDr3eb+nODoWvrl\nXeJ5EgDA8Tpf2+eYByrKYmPxgGjcPaX5mRpCJy2/5oxWG4dQe1Ex2GrL7sJ78NGA\nCkkOlFkzqQ4KITkc3qJ2TpvRF1wNr0tf7phZuv5KgZdE7qG3W34k5nsYMp/Qe08s\nNJHEkXjQ/Tstt2eMlC72TUJL6n25leowJ7RZrF8lDynOdYUp+gRVkiCNMev4hl9n\nfpfx31jALYqVFON0s6E9mI/o8vJM+1vpTZX0/K4gUZIqtcKKDwjaBUHuX/EB9sk5\ntsi9w9TZ14XNc2ct+YrJzhUNtzy9XBNRzpkyOd4CPoPtE7vRcVKZ9Us=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 4
to: 5
disconnected from auth
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
