changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c525.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c525',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 67 49 42 41 41 4b 43 41 51 45 41 74 74 ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521569661338
connected to auth! from local port 44270
received auth hello!
{ authId: 504, nonce: <Buffer b6 d3 2e 23 f0 66 a4 3e> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 5b 46 84 1c 8a 97 17 75>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer cd 48 5a 20 21 de d9 5e 4d 51 f8 9b ea 93 0c e4>,
  macKeyVal: <Buffer 0e 38 71 70 eb fc 6c 1a dd 15 72 c9 24 b2 a0 78 76 bc 09 f7 4b e5 7e 9e 65 8a 3f 2f 77 b0 9d 96>,
  absValidity: 2018-03-20T19:14:25.131Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400043,
  cipherKeyVal: <Buffer a2 8b f7 ca 3f 99 7c a6 59 e3 35 91 6b 79 98 ca>,
  macKeyVal: <Buffer 1e 04 7c 8c 14 66 13 75 a9 26 c6 e8 df b3 5f ce c4 78 00 0e 75 40 c8 21 dc 47 12 1a 8a f8 d5 cf>,
  absValidity: 2018-03-21T18:14:25.131Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400043,
     cipherKeyVal: <Buffer a2 8b f7 ca 3f 99 7c a6 59 e3 35 91 6b 79 98 ca>,
     macKeyVal: <Buffer 1e 04 7c 8c 14 66 13 75 a9 26 c6 e8 df b3 5f ce c4 78 00 0e 75 40 c8 21 dc 47 12 1a 8a f8 d5 cf>,
     absValidity: 2018-03-21T18:14:25.131Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 20 ed 72 6e 6c cc 67 0a>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:14:29 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521569669647
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521569721386
connected to auth! from local port 44540
received auth hello!
{ authId: 504, nonce: <Buffer aa 15 60 36 6d 9a a2 3b> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b8 e3 70 8b 23 9d 97 22>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400049,
  cipherKeyVal: <Buffer b8 15 59 b7 38 a7 27 d8 eb 41 93 c6 45 c3 ef 75>,
  macKeyVal: <Buffer 0e 92 4a 5f 9f c6 fe f0 83 31 a7 d0 ad 04 7b 33 13 6a 8c f1 2f ff 1a 6d d1 87 b9 a2 75 a2 2c 53>,
  absValidity: 2018-03-21T18:15:25.137Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400049,
     cipherKeyVal: <Buffer b8 15 59 b7 38 a7 27 d8 eb 41 93 c6 45 c3 ef 75>,
     macKeyVal: <Buffer 0e 92 4a 5f 9f c6 fe f0 83 31 a7 d0 ad 04 7b 33 13 6a 8c f1 2f ff 1a 6d d1 87 b9 a2 75 a2 2c 53>,
     absValidity: 2018-03-21T18:15:25.137Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 36 dc 23 b9 79 84 28 77>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:15:29 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521569730259
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521569781436
connected to auth! from local port 44810
received auth hello!
{ authId: 504, nonce: <Buffer 2e a1 80 0e 3c 51 0e 23> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 51 84 2c e1 be eb 20 55>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400055,
  cipherKeyVal: <Buffer 51 b5 4e 30 6b 0d a1 22 d7 ae 05 e8 f7 5c e4 00>,
  macKeyVal: <Buffer 4b b6 d2 64 77 c8 50 88 33 ce b5 cc 08 35 07 ab 07 fd db 8c d4 c4 fc 1b b7 a1 3e 3b d6 9c ac 1d>,
  absValidity: 2018-03-21T18:16:24.930Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400055,
     cipherKeyVal: <Buffer 51 b5 4e 30 6b 0d a1 22 d7 ae 05 e8 f7 5c e4 00>,
     macKeyVal: <Buffer 4b b6 d2 64 77 c8 50 88 33 ce b5 cc 08 35 07 ab 07 fd db 8c d4 c4 fc 1b b7 a1 3e 3b d6 9c ac 1d>,
     absValidity: 2018-03-21T18:16:24.930Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 78 b1 68 10 00 ca 1e 7f>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:16:29 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521569789801
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521569841487
connected to auth! from local port 45080
received auth hello!
{ authId: 504, nonce: <Buffer 83 e7 01 ff 4d e1 db 03> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 9d 32 d9 34 02 fe 16 64>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400061,
  cipherKeyVal: <Buffer fb ed 5d 5f 22 53 38 4f c4 eb 13 32 9e c9 55 df>,
  macKeyVal: <Buffer 80 f7 cf de c5 65 3a 56 de 5d 02 ce 95 57 f6 3f 43 ad 32 54 75 85 49 c3 6c 2f 79 d8 99 a9 8a ff>,
  absValidity: 2018-03-21T18:17:25.201Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400061,
     cipherKeyVal: <Buffer fb ed 5d 5f 22 53 38 4f c4 eb 13 32 9e c9 55 df>,
     macKeyVal: <Buffer 80 f7 cf de c5 65 3a 56 de 5d 02 ce 95 57 f6 3f 43 ad 32 54 75 85 49 c3 6c 2f 79 d8 99 a9 8a ff>,
     absValidity: 2018-03-21T18:17:25.201Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 42 b4 9a e7 02 71 c8 10>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:17:29 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521569850141
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521569901524
connected to auth! from local port 45350
received auth hello!
{ authId: 504, nonce: <Buffer f2 37 96 97 b8 6a 54 f8> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 40 69 81 cf 15 40 28 83>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400067,
  cipherKeyVal: <Buffer b8 19 9e 12 59 1a 22 5e 56 e1 a5 d9 b0 b5 9c 9a>,
  macKeyVal: <Buffer 07 89 6a f5 fd 9e e2 00 d1 51 0c d9 28 ce 4b 8a 8e 49 8a 14 1f 57 1e 66 aa 99 d2 a9 fe 80 4d b6>,
  absValidity: 2018-03-21T18:18:25.282Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400067,
     cipherKeyVal: <Buffer b8 19 9e 12 59 1a 22 5e 56 e1 a5 d9 b0 b5 9c 9a>,
     macKeyVal: <Buffer 07 89 6a f5 fd 9e e2 00 d1 51 0c d9 28 ce 4b 8a 8e 49 8a 14 1f 57 1e 66 aa 99 d2 a9 fe 80 4d b6>,
     absValidity: 2018-03-21T18:18:25.282Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer ee e3 ec 2a 55 7c 76 6a>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:18:29 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521569910376
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521569961573
connected to auth! from local port 45620
received auth hello!
{ authId: 504, nonce: <Buffer 11 f0 54 a1 de 7b 34 e4> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e4 b6 25 c4 55 49 6d 82>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 50400073,
  cipherKeyVal: <Buffer ec c0 74 ea 81 d1 48 de 44 2a c9 e3 90 af 8b 87>,
  macKeyVal: <Buffer a8 9c eb 52 69 ea 04 86 06 40 19 c1 df 75 cf 8e 2c 26 e3 36 e3 54 25 c0 00 f2 48 6d 24 c6 69 7c>,
  absValidity: 2018-03-21T18:19:25.302Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 50400073,
     cipherKeyVal: <Buffer ec c0 74 ea 81 d1 48 de 44 2a c9 e3 90 af 8b 87>,
     macKeyVal: <Buffer a8 9c eb 52 69 ea 04 86 06 40 19 c1 df 75 cf 8e 2c 26 e3 36 e3 54 25 c0 00 f2 48 6d 24 c6 69 7c>,
     absValidity: 2018-03-21T18:19:25.302Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer d8 13 4e b0 c0 98 f2 3b>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
Handler: Error in secure comm - details: Comm init failed: handshake1 timed out ...
Handler: Error in secure comm - details: Comm init failed: disconnected from server during communication initialization.10.0.1.42:undefined
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 7 0.7142857142857143 1521570021577
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 8 0.625 1521570081585
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 52172
received auth hello!
{ authId: 503, nonce: <Buffer 09 bf d7 35 9c 87 56 31> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 9 0.5555555555555556 1521570141589
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 52418
received auth hello!
{ authId: 503, nonce: <Buffer 22 3c c4 a7 02 ac d7 c7> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 10 0.5 1521570201599
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 40548
received auth hello!
{ authId: 403, nonce: <Buffer b6 7a f3 b3 a4 08 76 a0> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 11 0.45454545454545453 1521570261609
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 40798
received auth hello!
{ authId: 403, nonce: <Buffer 7a 12 f5 b1 67 c8 58 35> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 12 0.4166666666666667 1521570321617
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 35308
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 13 0.38461538461538464 1521570381627
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.7:21100
connected to auth! from local port 35558
received auth hello!
{ authId: 401, nonce: <Buffer d0 2c 29 8d bd b5 50 df> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth401',
     commonName: '10.0.1.1' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth504',
     commonName: '10.0.0.7' },
  serial: '0162449B5D18',
  notBefore: 2018-03-20T18:09:15.000Z,
  notAfter: 2018-03-21T18:10:55.000Z,
  subjectHash: 'de555cae',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: 'EC:B8:59:7B:3F:CC:B5:35:90:F7:DA:2B:04:4B:08:08:14:7B:D2:FB',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'B95EF3029A4C4FAE066EFDE0A6119C37979EDB5A64C834CFDC68175183A2CCB6F817A6CEE1A9EF3E562CF75048E8894B6036030296F313DEBF7C1069E42825C46A5F1F6D69FFE10EE6D73B7805503AA7E6A4C2FF62C2E4D5BF7079FBED00C4B24480D5BC43B7B3B042025990D06DEE0A0388CF2AE7F4B313EF564F2EB3931C44FD1DBD6DFA6DA12843C6DBAAE1EFBC5E7EEDA9407AE6D78B6211169F194056CA6F9CD9F20F33FE469D35BCC944D43D2ECB947F73AF95BB5530BFF2A9B92CA16EB949D06EB8218BBBEC8EA009AC9F6C53C626A2796484448AEDAAB3D19834BA2A19D35D0E105AD47B9A6B3E1589517039E098E992676ED418010E608FA312B251',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.1' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 401,
  host: '10.0.1.1',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEm10YMA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg1MDQxETAPBgNVBAMMCDEwLjAuMC43MB4XDTE4MDMy\nMDE4MDkxNVoXDTE4MDMyMTE4MTA1NVowYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDQwMTERMA8GA1UEAwwIMTAuMC4xLjEwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQC5XvMCmkxPrgZu/eCmEZw3l57bWmTINM/caBdRg6LMtvgXps7h\nqe8+Viz3UEjoiUtgNgMClvMT3r98EGnkKCXEal8fbWn/4Q7m1zt4BVA6p+akwv9i\nwuTVv3B5++0AxLJEgNW8Q7ezsEICWZDQbe4KA4jPKuf0sxPvVk8us5McRP0dvW36\nbaEoQ8bbquHvvF5+7alAeubXi2IRFp8ZQFbKb5zZ8g8z/kadNbzJRNQ9LsuUf3Ov\nlbtVML/yqbksoW65SdBuuCGLu+yOoAmsn2xTxiaieWSERIrtqrPRmDS6KhnTXQ4Q\nWtR7mms+FYlRcDngmOmSZ27UGAEOYI+jErJRAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQEwDQYJKoZIhvcNAQELBQADggEBAHYYkzjM4W/LOEVCey5ognIdFpx8UoSp\nOmBRF/s0KTfl6CmE37F8X+P7N5StA+Hi7azRDzytnIkYVb/lLLV6mnNiRSehzHEy\nK7AK2xq7B1V8Vg19EO5hNzGHj3Wrlq8Q7pTdJ5Avjxusv4B4QBu47IyzrvEKs3H5\ne/6B/a/6rlAkI1+vnpMMqD5imRzn3TYKUawfP19IleVIqZA8ITr4ir29R3/gh4tj\nYDdeUVwccdOdJ5BJrQUpdcsl1YHHULvYcntmxDe1IPzKVVksMUFFO3UAOfGVwfu9\n8kZG4doVLMouaoDcCWGHJvr6nQxlMklFm1cmkTIr577yEzDxcUnEhCM=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 2
to: 3
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 14 0.35714285714285715 1521570441638
connected to auth! from local port 35792
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 15 0.3333333333333333 1521570501649
connected to auth! from local port 36040
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 16 0.3125 1521570561660
connected to auth! from local port 36300
received auth hello!
{ authId: 401, nonce: <Buffer ae 9c a7 7a fd e3 95 fe> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer 0e 1e c4 01 8d 0e 81 ec>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer a7 70 69 0b 2d bd 00 5b 1d 4e c6 2f 4b bf 26 a3>,
  macKeyVal: <Buffer c2 cc f4 a3 b5 17 f8 31 9a d4 1b 57 6c 7c 47 28 5c e8 2d 3b b5 a7 ea fd 11 29 ee 04 9e 9f 71 17>,
  absValidity: 2018-03-20T19:29:29.393Z }
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40100382,
  cipherKeyVal: <Buffer 80 fa 9d aa 27 87 b0 28 a1 a2 f9 3e 68 e8 23 86>,
  macKeyVal: <Buffer 4b dc 86 bf a8 17 0d 43 bd b2 6d bd 4a 5e 48 52 e9 3d 05 b3 f1 cf 63 71 6c b5 e0 4c 43 87 6e fd>,
  absValidity: 2018-03-21T18:29:29.393Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.42',
  serverPort: 22100,
  sessionKey: 
   { id: 40100382,
     cipherKeyVal: <Buffer 80 fa 9d aa 27 87 b0 28 a1 a2 f9 3e 68 e8 23 86>,
     macKeyVal: <Buffer 4b dc 86 bf a8 17 0d 43 bd b2 6d bd 4a 5e 48 52 e9 3d 05 b3 f1 cf 63 71 6c b5 e0 4c 43 87 6e fd>,
     absValidity: 2018-03-21T18:29:29.393Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 04 70 86 85 a1 5c af 8c>
switching to HANDSHAKE_1_SENT
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
Handler: Error in secure comm - details: Disconnected from auth before getting session key response
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
