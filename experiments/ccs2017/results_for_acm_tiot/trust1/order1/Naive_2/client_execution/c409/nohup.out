changing working directory to: /home/hokeunkim/Development/iotauth/entity/node/example_entities
loading from config file: /home/hokeunkim/Development/iotauth_experiments/experiments/ccs2017/expOptions/expEntity.option
Experimental options for autoClient: { autoSendPeriod: 60000,
  useSameSessionKeyCount: 1,
  connectionTimeout: 50000,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
loading from config file: /home/hokeunkim/Development/iotauth/entity/node/example_entities/configs/Clients/c409.config
initializing...
current parameters: { numKeysPerRequest: 3,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: false,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 3,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 3 }
current parameters: { numKeysPerRequest: 1,
  migrationEnabled: true,
  authFailureThreshold: 2,
  migrationFailureThreshold: 2 }
current entityInfo: { name: 'c409',
  group: 'Clients',
  distProtocol: 'TCP',
  usePermanentDistKey: false,
  connectionTimeout: 50000,
  privateKey: <Buffer 2d 2d 2d 2d 2d 42 45 47 49 4e 20 52 53 41 20 50 52 49 56 41 54 45 20 4b 45 59 2d 2d 2d 2d 2d 0a 4d 49 49 45 70 41 49 42 41 41 4b 43 41 51 45 41 73 4d ... > }
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 0 1 0 1521569546054
connected to auth! from local port 52668
received auth hello!
{ authId: 402, nonce: <Buffer b5 e9 dd b4 cd fe f1 85> }
received session key response with distribution key attached!
auth signature verified
replyNonce in sessionKeyResp: <Buffer f1 56 27 9c 94 a3 d7 f5>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
updating distribution key: { cipherKeyVal: <Buffer 2f e9 84 f0 05 8c 88 8e 21 f7 22 73 73 60 d7 c2>,
  macKeyVal: <Buffer 0e 4f bc 1d ad 07 b3 8f bb 24 29 f5 42 ea 16 e2 c3 eb 2e a2 09 2e 93 9c 54 93 89 bb 6e c4 c6 11>,
  absValidity: 2018-03-20T19:12:26.213Z }
received 1 keys
currentSessionKey: [object Object]
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200198,
  cipherKeyVal: <Buffer 7f 4e bc d6 1f c0 7c 50 d9 fa 5f 72 38 84 75 2d>,
  macKeyVal: <Buffer f2 84 03 2f 0e 9d fe b5 49 fa f4 b9 5a c5 a1 89 14 78 67 47 4f 93 c8 52 81 c5 bc 33 df 80 e6 eb>,
  absValidity: 2018-03-21T18:12:26.213Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200198,
     cipherKeyVal: <Buffer 7f 4e bc d6 1f c0 7c 50 d9 fa 5f 72 38 84 75 2d>,
     macKeyVal: <Buffer f2 84 03 2f 0e 9d fe b5 49 fa f4 b9 5a c5 a1 89 14 78 67 47 4f 93 c8 52 81 c5 bc 33 df 80 e6 eb>,
     absValidity: 2018-03-21T18:12:26.213Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
disconnected from auth
chosen nonce: <Buffer 14 3f b4 29 39 ae 2b cc>
switching to HANDSHAKE_1_SENT
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:12:26 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 1 1 1 1521569547207
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 1 2 0.5 1521569606086
connected to auth! from local port 52830
received auth hello!
{ authId: 402, nonce: <Buffer c7 c0 5d 02 31 8d 8f 34> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer e1 4f 91 a6 5a 87 20 ac>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200205,
  cipherKeyVal: <Buffer 85 ce 8d d7 88 69 28 84 08 b7 d6 b6 bd 04 12 eb>,
  macKeyVal: <Buffer 01 7d 27 06 36 fc 95 f0 f4 34 39 90 8e e9 11 38 ba a5 39 1b c4 0a 03 c4 a6 8a 37 aa b5 64 ed c5>,
  absValidity: 2018-03-21T18:13:26.222Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200205,
     cipherKeyVal: <Buffer 85 ce 8d d7 88 69 28 84 08 b7 d6 b6 bd 04 12 eb>,
     macKeyVal: <Buffer 01 7d 27 06 36 fc 95 f0 f4 34 39 90 8e e9 11 38 ba a5 39 1b c4 0a 03 c4 a6 8a 37 aa b5 64 ed c5>,
     absValidity: 2018-03-21T18:13:26.222Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 6e b0 87 ec 64 a7 29 da>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:13:26 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 2 2 1 1521569607238
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 2 3 0.6666666666666666 1521569666142
connected to auth! from local port 53096
received auth hello!
{ authId: 402, nonce: <Buffer ee c9 93 05 52 9c ac 3e> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer a7 8f 7b 7f 2b 49 7f 1d>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200212,
  cipherKeyVal: <Buffer 72 89 2f b9 32 32 38 26 90 94 b3 b6 a2 71 64 96>,
  macKeyVal: <Buffer 5f e2 6a 86 36 15 fb c3 11 f7 d2 2e 99 37 db 57 69 10 f5 1b c9 8c 40 c9 96 9d 8a 1d 06 8c 78 55>,
  absValidity: 2018-03-21T18:14:26.320Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200212,
     cipherKeyVal: <Buffer 72 89 2f b9 32 32 38 26 90 94 b3 b6 a2 71 64 96>,
     macKeyVal: <Buffer 5f e2 6a 86 36 15 fb c3 11 f7 d2 2e 99 37 db 57 69 10 f5 1b c9 8c 40 c9 96 9d 8a 1d 06 8c 78 55>,
     absValidity: 2018-03-21T18:14:26.320Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 3c 52 f8 90 88 3b 8d 43>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:14:26 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 3 3 1 1521569667291
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 3 4 0.75 1521569726191
connected to auth! from local port 53366
received auth hello!
{ authId: 402, nonce: <Buffer 0e 8e 5a ff 97 ed b7 67> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer b3 54 d5 d3 e4 89 6f 2a>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200219,
  cipherKeyVal: <Buffer fb f4 f9 6d 27 c0 70 f5 91 82 e9 31 ba cb 43 eb>,
  macKeyVal: <Buffer ea 79 9c c6 af a8 1d e1 4c 9f 65 60 da 23 c8 0e a1 d6 8e fb 3c f3 11 86 18 58 c0 ab dd d0 23 31>,
  absValidity: 2018-03-21T18:15:26.323Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200219,
     cipherKeyVal: <Buffer fb f4 f9 6d 27 c0 70 f5 91 82 e9 31 ba cb 43 eb>,
     macKeyVal: <Buffer ea 79 9c c6 af a8 1d e1 4c 9f 65 60 da 23 c8 0e a1 d6 8e fb 3c f3 11 86 18 58 c0 ab dd d0 23 31>,
     absValidity: 2018-03-21T18:15:26.323Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 88 6e c6 ad eb 0c fa b1>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:15:27 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 4 4 1 1521569727304
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 4 5 0.8 1521569786228
connected to auth! from local port 53636
received auth hello!
{ authId: 402, nonce: <Buffer 04 85 c0 29 34 45 29 66> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer fa a7 ad fb 2b a3 b2 bb>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200226,
  cipherKeyVal: <Buffer 74 5b 82 da e9 74 cb 45 54 5f fe 88 31 2d fc 1c>,
  macKeyVal: <Buffer aa 12 4d 0d f6 11 2c ee 2a e7 46 11 47 fd 30 6e 6e 86 d5 ca 48 e2 37 0e f6 0d 11 b2 8a 44 01 e0>,
  absValidity: 2018-03-21T18:16:26.352Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200226,
     cipherKeyVal: <Buffer 74 5b 82 da e9 74 cb 45 54 5f fe 88 31 2d fc 1c>,
     macKeyVal: <Buffer aa 12 4d 0d f6 11 2c ee 2a e7 46 11 47 fd 30 6e 6e 86 d5 ca 48 e2 37 0e f6 0d 11 b2 8a 44 01 e0>,
     absValidity: 2018-03-21T18:16:26.352Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 5e ab 2b ee c9 4b 1c fc>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:16:27 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 5 5 1 1521569787383
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 5 6 0.8333333333333334 1521569846285
connected to auth! from local port 53906
received auth hello!
{ authId: 402, nonce: <Buffer 3c 81 fe 9d 62 ca 5e 1f> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer d5 0a 95 4c 19 6d ba 36>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200233,
  cipherKeyVal: <Buffer ca c6 a5 4c 28 1b 58 3d 31 13 03 04 39 19 80 3f>,
  macKeyVal: <Buffer 99 3d f9 af ed cf 34 c7 5e 1b 12 5c 88 2c 12 06 f4 1a bf 77 b0 d0 47 61 74 c8 52 89 16 31 1c 2a>,
  absValidity: 2018-03-21T18:17:26.461Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200233,
     cipherKeyVal: <Buffer ca c6 a5 4c 28 1b 58 3d 31 13 03 04 39 19 80 3f>,
     macKeyVal: <Buffer 99 3d f9 af ed cf 34 c7 5e 1b 12 5c 88 2c 12 06 f4 1a bf 77 b0 d0 47 61 74 c8 52 89 16 31 1c 2a>,
     absValidity: 2018-03-21T18:17:26.461Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer da ce 79 77 06 58 49 06>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:17:27 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 6 6 1 1521569847450
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 6 7 0.8571428571428571 1521569906344
connected to auth! from local port 54176
received auth hello!
{ authId: 402, nonce: <Buffer db 2e 13 b7 97 6a 7f 07> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer 50 e1 97 4a 2c 34 e6 3c>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200240,
  cipherKeyVal: <Buffer ae 1d bd d2 38 7d ad 55 64 03 fd eb e4 f0 61 e0>,
  macKeyVal: <Buffer ef bb b7 70 1b 49 b9 5d 7b 67 38 5c 30 99 96 78 17 03 cd bf a7 3c 22 5e b3 e2 43 9a e1 a1 20 0d>,
  absValidity: 2018-03-21T18:18:26.514Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200240,
     cipherKeyVal: <Buffer ae 1d bd d2 38 7d ad 55 64 03 fd eb e4 f0 61 e0>,
     macKeyVal: <Buffer ef bb b7 70 1b 49 b9 5d 7b 67 38 5c 30 99 96 78 17 03 cd bf a7 3c 22 5e b3 e2 43 9a e1 a1 20 0d>,
     absValidity: 2018-03-21T18:18:26.514Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer fe c6 7d aa 17 30 9a fe>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:18:27 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 7 7 1 1521569907514
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 7 8 0.875 1521569966403
connected to auth! from local port 54446
received auth hello!
{ authId: 402, nonce: <Buffer a8 4b c1 af 94 99 fc 13> }
received session key response encrypted with distribution key
replyNonce in sessionKeyResp: <Buffer ab d9 04 d2 a7 88 0b 84>
auth nonce verified
handleSessionKeyResp: session key request succeeded! authFailureCount: 0
received 1 keys
currentSessionKey: [object Object]
Status: Secure connection closed before starting a new connection.
Session protocol: TCP
chosen commSessionKey: 
{ id: 40200247,
  cipherKeyVal: <Buffer 7d 88 d2 3e 56 f2 db d2 76 63 40 4c 4e 81 09 86>,
  macKeyVal: <Buffer ab fe 22 44 d7 c4 e6 dc 23 5a 60 a5 48 af 80 ac b9 a8 da 06 23 87 85 f8 7e 7d a8 2a a0 91 dd d5>,
  absValidity: 2018-03-21T18:19:26.542Z,
  relValidity: 7200000 }
options
{ serverHost: '10.0.1.14',
  serverPort: 22100,
  sessionKey: 
   { id: 40200247,
     cipherKeyVal: <Buffer 7d 88 d2 3e 56 f2 db d2 76 63 40 4c 4e 81 09 86>,
     macKeyVal: <Buffer ab fe 22 44 d7 c4 e6 dc 23 5a 60 a5 48 af 80 ac b9 a8 da 06 23 87 85 f8 7e 7d a8 2a a0 91 dd d5>,
     absValidity: 2018-03-21T18:19:26.542Z,
     relValidity: 7200000 },
  sessionCryptoSpec: { cipher: 'AES-128-CBC', mac: 'SHA256' },
  sessionProtocol: 'TCP',
  handshakeTimeout: 50000 }
chosen nonce: <Buffer 79 82 94 6e 4e f1 67 69>
switching to HANDSHAKE_1_SENT
disconnected from auth
Handler: secure connection with the server closed.
received session key handshake2!
client ret: [object Object]
server authenticated/authorized by solving nonce!
Handler: communication initialization succeeded
file data length: 1024
sending at Tue Mar 20 2018 18:19:27 GMT+0000 (UTC)
switching to IN_COMM
received secure communication message!
Received seqNum: 0
Handler: data received from server via secure communication
data1
Resp-actual/expected/ratio/ts: 8 8 1 1521569967498
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 9 0.8888888888888888 1521570026449
failure in connection with Auth : authFailureCount: 1
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 10 0.8 1521570086457
failure in connection with Auth : authFailureCount: 2
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 38858
received auth hello!
{ authId: 502, nonce: <Buffer a0 d1 d7 79 b7 eb b5 67> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 11 0.7272727272727273 1521570146465
failure in connection with Auth : authFailureCount: 3
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 39106
received auth hello!
{ authId: 502, nonce: <Buffer b4 d9 9a 20 b7 bd c4 a2> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 12 0.6666666666666666 1521570206476
failure in connection with Auth : authFailureCount: 4
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 0
to: 1
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 50494
received auth hello!
{ authId: 501, nonce: <Buffer 98 3e f7 bf 7a 56 ac 50> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 13 0.6153846153846154 1521570266485
failure in connection with Auth : authFailureCount: 5
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 50742
received auth hello!
{ authId: 501, nonce: <Buffer 9b 07 64 1b df e7 d3 1b> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 14 0.5714285714285714 1521570326493
failure in connection with Auth : authFailureCount: 6
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 1
to: 2
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 47282
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 15 0.5333333333333333 1521570386501
failure in connection with Auth : authFailureCount: 7
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 47526
Handler: Error in secure comm - details: Auth hello timedout ...
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 16 0.5 1521570446508
failure in connection with Auth : authFailureCount: 8
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 2
to: 3
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 57642
received auth hello!
{ authId: 403, nonce: <Buffer a5 33 cd ba d9 b8 9a 9d> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 1
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 17 0.47058823529411764 1521570506517
failure in connection with Auth : authFailureCount: 9
failure count reached threshold (2), try migration...
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 57890
received auth hello!
{ authId: 403, nonce: <Buffer a7 b7 90 9d e5 82 bc 29> }
received an Auth alert!
failure in migration to another Auth : migrationFailureCount: 2
Handler: Error in secure comm - details: Error occurred in migration request: received an Auth alert! code: 1
disconnected from auth
Handler: Error in secure comm - details: Auth hello timedout ...
Distribution protocol: TCP
Resp-actual/expected/ratio/ts: 8 18 0.4444444444444444 1521570566522
failure in connection with Auth : authFailureCount: 10
failure count reached threshold (2), try migration...
reached migration failure threshold, rotate migration info index from: 3
to: 4
In iotAuth.js migrateToTrustedAuth: 
In iotAuthService.js sendMigrationReqViaTCP: 
Handler: Error in secure comm - details: Error occurred in session key request: Error: connect EHOSTUNREACH 10.0.1.2:21100
connected to auth! from local port 44174
received auth hello!
{ authId: 503, nonce: <Buffer 84 48 e4 d8 19 11 03 df> }
more data will come. current: 1445 expected: 1485
received migration response with signature!
{ version: 2,
  subject: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth503',
     commonName: '10.0.1.6' },
  issuer: 
   { countryName: 'US',
     stateOrProvinceName: 'CA',
     localityName: 'Berkeley',
     organizationName: 'EECS',
     organizationalUnitName: 'Auth402',
     commonName: '10.0.0.2' },
  serial: '0162449B557E',
  notBefore: 2018-03-20T18:09:13.000Z,
  notAfter: 2018-03-21T18:10:53.000Z,
  subjectHash: '5542437f',
  signatureAlgorithm: 'sha256WithRSAEncryption',
  fingerPrint: '3C:AA:C7:02:26:ED:A0:5F:E6:73:73:C6:D1:0C:84:E7:C9:3A:0D:90',
  publicKey: 
   { algorithm: 'rsaEncryption',
     e: '65537',
     n: 'DE5B30AA46CAB50E9EB99610D7CD6F5A13A506E423E0B2FA7E5B5516308134D5EBA5029E1E86687304DE74F1EDC282AFF2BDBD5A1EEA4AB5A9C11B58BE559B6581427760281F7D05FB35B0241357C06845115CC2742374425A859E0CF161E9E28FB5DADEF2AD5312533F095CB0709A99F829AD0B3B1B19C8FB4E17DFB5D85CE6E65EA745001E8C0CC8AC5A752E195090E212D1563BE34185B3211F90F9135C8AD962B139057D6E600CF5797302C942DB7EEA5A0963E1105D1B46C227E6B60D0B1D7EF08EA4E9BE1220E5269AD51AB8E328F18D2AC5A2F47D0508AD6101DC087A6295158FC3BEDA4B4CD32EC8D3E6E2F67DC2962059753EE1281A41E463966327',
     bitSize: 2048 },
  altNames: [],
  extensions: { subjectAlternativeName: 'IP Address:10.0.1.6' } }
null
true
Certificate of new Auth is verified!
Subject information matches Auth ID!
Signature of new Auth is verified.
Auth nonce is verified
migration completed!
new Auth info: !
{ id: 503,
  host: '10.0.1.6',
  port: 21100,
  publicKey: '-----BEGIN CERTIFICATE-----\nMIIDVTCCAj2gAwIBAgIGAWJEm1V+MA0GCSqGSIb3DQEBCwUAMGExCzAJBgNVBAYT\nAlVTMQswCQYDVQQIDAJDQTERMA8GA1UEBwwIQmVya2VsZXkxDTALBgNVBAoMBEVF\nQ1MxEDAOBgNVBAsMB0F1dGg0MDIxETAPBgNVBAMMCDEwLjAuMC4yMB4XDTE4MDMy\nMDE4MDkxM1oXDTE4MDMyMTE4MTA1M1owYTELMAkGA1UEBhMCVVMxCzAJBgNVBAgM\nAkNBMREwDwYDVQQHDAhCZXJrZWxleTENMAsGA1UECgwERUVDUzEQMA4GA1UECwwH\nQXV0aDUwMzERMA8GA1UEAwwIMTAuMC4xLjYwggEiMA0GCSqGSIb3DQEBAQUAA4IB\nDwAwggEKAoIBAQDeWzCqRsq1Dp65lhDXzW9aE6UG5CPgsvp+W1UWMIE01eulAp4e\nhmhzBN508e3Cgq/yvb1aHupKtanBG1i+VZtlgUJ3YCgffQX7NbAkE1fAaEURXMJ0\nI3RCWoWeDPFh6eKPtdre8q1TElM/CVywcJqZ+CmtCzsbGcj7Thfftdhc5uZep0UA\nHowMyKxadS4ZUJDiEtFWO+NBhbMhH5D5E1yK2WKxOQV9bmAM9XlzAslC237qWglj\n4RBdG0bCJ+a2DQsdfvCOpOm+EiDlJprVGrjjKPGNKsWi9H0FCK1hAdwIemKVFY/D\nvtpLTNMuyNPm4vZ9wpYgWXU+4SgaQeRjlmMnAgMBAAGjEzARMA8GA1UdEQQIMAaH\nBAoAAQYwDQYJKoZIhvcNAQELBQADggEBABVb9rf2T3ft1bpaAmDr3eb+nODoWvrl\nXeJ5EgDA8Tpf2+eYByrKYmPxgGjcPaX5mRpCJy2/5oxWG4dQe1Ex2GrL7sJ78NGA\nCkkOlFkzqQ4KITkc3qJ2TpvRF1wNr0tf7phZuv5KgZdE7qG3W34k5nsYMp/Qe08s\nNJHEkXjQ/Tstt2eMlC72TUJL6n25leowJ7RZrF8lDynOdYUp+gRVkiCNMev4hl9n\nfpfx31jALYqVFON0s6E9mI/o8vJM+1vpTZX0/K4gUZIqtcKKDwjaBUHuX/EB9sk5\ntsi9w9TZ14XNc2ct+YrJzhUNtzy9XBNRzpkyOd4CPoPtE7vRcVKZ9Us=\n-----END CERTIFICATE-----' }
received migration response, for next round of migration, rotate migration info index from: 4
to: 5
disconnected from auth
/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902
            eventHandlers.onError('Error occurred in migration request: Disconnected from auth before getting migration response: ' + error);
                                                                                                                                      ^

ReferenceError: error is not defined
    at Socket.<anonymous> (/home/hokeunkim/Development/iotauth/entity/node/accessors/node_modules/iotAuthService.js:902:135)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:188:7)
    at endReadableNT (_stream_readable.js:975:12)
    at _combinedTickCallback (internal/process/next_tick.js:80:11)
    at process._tickCallback (internal/process/next_tick.js:104:9)
